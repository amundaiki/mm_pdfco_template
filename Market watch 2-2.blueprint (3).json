{
    "name": "Market watch: PDF",
    "flow": [
        {
            "id": 2,
            "module": "google-sheets:getSheetContent",
            "version": 2,
            "parameters": {
                "__IMTCONN__": 5394937
            },
            "mapper": {
                "range": "a2:k50",
                "select": "map",
                "sheetId": "Innlegg {{formatDate(now; \"DD.MM.YYYY\")}}",
                "spreadsheetId": "1p5lLUysE1TWqctWvVtvSkccC4znpAvojsuoogVGj_rk",
                "tableFirstRow": "a1:k1",
                "includesHeaders": true,
                "valueRenderOption": "FORMATTED_VALUE",
                "dateTimeRenderOption": "FORMATTED_STRING"
            },
            "metadata": {
                "designer": {
                    "x": 0,
                    "y": 0,
                    "name": "NYHETER"
                },
                "restore": {
                    "expect": {
                        "select": {
                            "label": "Enter manually"
                        },
                        "includesHeaders": {
                            "mode": "chose"
                        },
                        "valueRenderOption": {
                            "mode": "chose",
                            "label": "Formatted value"
                        },
                        "dateTimeRenderOption": {
                            "mode": "chose",
                            "label": "Formatted string"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "google"
                            },
                            "label": "AMUND AIKI (amund@aiki.as)"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:google",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "select",
                        "type": "select",
                        "label": "Search Method",
                        "required": true,
                        "validate": {
                            "enum": [
                                "list",
                                "fromAll",
                                "map"
                            ]
                        }
                    },
                    {
                        "name": "range",
                        "type": "text",
                        "label": "Range",
                        "required": true
                    },
                    {
                        "name": "includesHeaders",
                        "type": "boolean",
                        "label": "Table contains headers",
                        "required": true
                    },
                    {
                        "name": "valueRenderOption",
                        "type": "select",
                        "label": "Value render option",
                        "validate": {
                            "enum": [
                                "FORMATTED_VALUE",
                                "UNFORMATTED_VALUE",
                                "FORMULA"
                            ]
                        }
                    },
                    {
                        "name": "dateTimeRenderOption",
                        "type": "select",
                        "label": "Date and time render option",
                        "validate": {
                            "enum": [
                                "SERIAL_NUMBER",
                                "FORMATTED_STRING"
                            ]
                        }
                    },
                    {
                        "name": "spreadsheetId",
                        "type": "text",
                        "label": "Spreadsheet ID",
                        "required": true
                    },
                    {
                        "name": "sheetId",
                        "type": "text",
                        "label": "Sheet Name",
                        "required": true
                    },
                    {
                        "name": "tableFirstRow",
                        "type": "text",
                        "label": "Row with headers"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 3,
            "module": "util:TextAggregator",
            "version": 1,
            "parameters": {
                "feeder": 2,
                "rowSeparator": "\n"
            },
            "mapper": {
                "value": "Rad:{{2.`__IMTINDEX__`}}/{{2.`__IMTLENGTH__`}}\nKilde: {{2.`0`}}\n\nDato skrevet: {{2.`1`}}\n\nTittel: {{2.`2`}}\n\nSammendrag: {{2.`3`}} \n\nURL: {{2.`4`}}\n\nForfatter: {{2.`5`}}\n\nkategori: {{2.`6`}}\n\nRelevans for sonat score: {{2.`7`}}/10\n\nai tags: {{2.`8`}}\n\nPRoff.no info: \n{{2.`9`}}\n\nfull artikkel tekst:\n{{2.`10`}}"
            },
            "metadata": {
                "designer": {
                    "x": 300,
                    "y": 0,
                    "name": "NYHETER"
                },
                "restore": {
                    "extra": {
                        "feeder": {
                            "label": "NYHETER - Get Range Values [2]"
                        }
                    },
                    "parameters": {
                        "rowSeparator": {
                            "label": "New row"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "rowSeparator",
                        "type": "select",
                        "label": "Row separator",
                        "validate": {
                            "enum": [
                                "\n",
                                "\t",
                                "other"
                            ]
                        }
                    }
                ],
                "expect": [
                    {
                        "name": "value",
                        "type": "text",
                        "label": "Text"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 32,
            "module": "google-sheets:getSheetContent",
            "version": 2,
            "parameters": {
                "__IMTCONN__": 5394937
            },
            "mapper": {
                "range": "a2:k50",
                "select": "map",
                "sheetId": "Innlegg {{formatDate(now; \"DD.MM.YYYY\")}}",
                "spreadsheetId": "1p5lLUysE1TWqctWvVtvSkccC4znpAvojsuoogVGj_rk",
                "tableFirstRow": "a1:k1",
                "includesHeaders": true,
                "valueRenderOption": "FORMATTED_VALUE",
                "dateTimeRenderOption": "FORMATTED_STRING"
            },
            "metadata": {
                "designer": {
                    "x": 600,
                    "y": 0,
                    "name": "NYHETER"
                },
                "restore": {
                    "expect": {
                        "select": {
                            "label": "Enter manually"
                        },
                        "includesHeaders": {
                            "mode": "chose"
                        },
                        "valueRenderOption": {
                            "mode": "chose",
                            "label": "Formatted value"
                        },
                        "dateTimeRenderOption": {
                            "mode": "chose",
                            "label": "Formatted string"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "google"
                            },
                            "label": "AMUND AIKI (amund@aiki.as)"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:google",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "select",
                        "type": "select",
                        "label": "Search Method",
                        "required": true,
                        "validate": {
                            "enum": [
                                "list",
                                "fromAll",
                                "map"
                            ]
                        }
                    },
                    {
                        "name": "range",
                        "type": "text",
                        "label": "Range",
                        "required": true
                    },
                    {
                        "name": "includesHeaders",
                        "type": "boolean",
                        "label": "Table contains headers",
                        "required": true
                    },
                    {
                        "name": "valueRenderOption",
                        "type": "select",
                        "label": "Value render option",
                        "validate": {
                            "enum": [
                                "FORMATTED_VALUE",
                                "UNFORMATTED_VALUE",
                                "FORMULA"
                            ]
                        }
                    },
                    {
                        "name": "dateTimeRenderOption",
                        "type": "select",
                        "label": "Date and time render option",
                        "validate": {
                            "enum": [
                                "SERIAL_NUMBER",
                                "FORMATTED_STRING"
                            ]
                        }
                    },
                    {
                        "name": "spreadsheetId",
                        "type": "text",
                        "label": "Spreadsheet ID",
                        "required": true
                    },
                    {
                        "name": "sheetId",
                        "type": "text",
                        "label": "Sheet Name",
                        "required": true
                    },
                    {
                        "name": "tableFirstRow",
                        "type": "text",
                        "label": "Row with headers"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 23,
            "module": "anthropic-claude:createAMessage",
            "version": 1,
            "parameters": {
                "__IMTCONN__": 7073506
            },
            "mapper": {
                "model": "claude-sonnet-4-20250514",
                "messages": [
                    {
                        "role": "user",
                        "content": [
                            {
                                "text": "# SONAT NEWS INTELLIGENCE PROCESSOR - AI-MODUL v1.0\n\n## 1. SYSTEM ARKITEKTUR OG ROLLE\n\n### 1.1 Modul-Spesifikk Rolle\nDu er en **News Intelligence Processor** for SONAT Consulting som transformerer norsk teknologi-nyhetsdata til strukturerte salgsmuligheter. Din primære funksjon:\n\n- **Analysere nyhetsstoff** fra norske business-medier (E24, DN, Finansavisen, TU)\n- **Identifisere teknologi-selskaper** med kommersielle triggers\n- **Kvantifisere SONAT-relevans** basert på AI/ML/Cloud/DevOps match\n- **Produsere strukturert JSON** for videre processing\n\n### 1.2 Domain Expertise Requirements\nSonat tilbyr tjenester innen:\nDigitalisering\nTjenestedesign og UX (brukeropplevelse)\nMaskinlæring og kunstig intelligens\nVR (virtuell virkelighet) og AR (augmented reality)\nTeknologirådgivning\nSystemutvikling\n\n**Target Company Profile:**\n- Norske tech-selskaper ≥15 ansatte\n- Årlig revenue ≥10M NOK\n- Sektorer: Bank/Fintech, Maritime, Media, Health, Telecom\n- Active growth/funding/digital transformation signals\n\n### 1.3 Technical Output Mandate\n- **Format**: Exclusively valid JSON without markdown/comments\n- **First Character**: `{`\n- **Last Character**: `}`\n- **Parse Validation**: Must pass JSON.parse() test\n- **Language**: Consistent Norwegian in all text fields\n\n## 2. INPUT DATA PROCESSING FRAMEWORK\n\n### 2.1 Expected Input Structure Pattern\n```\n[Nyhetssak rad: X/Y]\nKilde: [E24|DN|Finansavisen|TU|FinancialTribune|Digi|ITWatch]\nDato: [YYYY-MM-DD]\nTittel: [Article headline]\nSammendrag: [150-300 word business summary]  \nURL: [Article link]\nForfatter: [Author name or \"Ikke oppgitt\"]\nKategori: [Finans|Teknologi|Business|M&A|Funding|Ekspansjon|Diverse]\nRelevans_Score: [1-10 SONAT relevance pre-score]\nAI_Tags: [Array of relevant tags]\n```\n\n### 2.2 Data Aggregation Algorithm\n**Step-by-Step Processing:**\n1. **Scan Input**: Identify all \"rad: X/Y\" patterns\n2. **Extract Y-Values**: Y = total articles in news stream  \n3. **Calculate Volume**: `total_news_items = ΣY_values`\n4. **Parse Articles**: Extract company mentions, events, financial data\n5. **Deduplicate Companies**: Normalize company names across articles\n6. **Score & Categorize**: Apply SONAT relevance matrix\n\n### 2.3 Company Extraction Rules\n**Primary Indicators:**\n- Company names in headlines or first paragraph\n- Financial data (funding rounds, revenue, valuations)\n- Leadership changes (CTO, CDO, VP Engineering appointments)\n- Technology projects (AI implementation, cloud migration, digital transformation)\n\n**Secondary Indicators:**\n- Partnership announcements with tech vendors\n- Product launches with tech components\n- Expansion plans requiring technical scaling\n- IPO/M&A activity in tech sector\n\n## 3. SONAT RELEVANCE SCORING MATRIX\n\n### 3.1 Scoring Framework (1-10 Scale)\n\n**CRITICAL TIER (Score 9-10):**\n- Capital raising ≥50M NOK with explicit tech focus\n- C-level tech appointments (CTO, CDO, Chief Data Officer)\n- AI/ML/Cloud transformation projects announced\n- IPO preparations or M&A activity for tech companies\n- >500 employees with digital modernization initiatives\n\n**HIGH TIER (Score 7-8):**\n- Significant growth >50% or major expansion plans  \n- Tech role hiring sprees (DevOps, Cloud, Data Engineering)\n- Strategic partnerships with technology vendors\n- Product launches requiring scalable infrastructure\n- 100-500 employees in priority sectors\n\n**QUALIFIED TIER (Score 5-6):**\n- General business growth in relevant industries\n- Minor technology upgrades or modernization\n- 50-100 employees showing growth signals\n- Industry positioning suggesting future tech needs\n\n**LOW PRIORITY (Score 1-4):**\n- General news without business impact\n- Foreign companies without Norwegian connections\n- <15 employees or declining businesses\n- Non-tech sectors without digitalization angle\n\n### 3.2 Automated Score Modifiers\n```python\n# Positive Modifiers (+points)\nFUNDING_BOOST = [\"funding\", \"investering\", \"serie A\", \"serie B\", \"serie C\", \"kapital\", \"obligasjon\"] → +2\nTECH_BOOST = [\"AI\", \"kunstig intelligens\", \"machine learning\", \"cloud\", \"digitalisering\", \"automatisering\"] → +2\nGROWTH_BOOST = [\"ekspansjon\", \"vekst\", \"ny CTO\", \"ny CDO\", \"ansettelser\", \"skalering\"] → +1\nLOCATION_BOOST = [\"Norge\", \"Bergen\", \"Oslo\", \"Trondheim\", \"Stavanger\", \"Tromsø\"] → +1\nSECTOR_BOOST = [\"bank\", \"fintech\", \"maritim\", \"shipping\", \"media\", \"streaming\", \"helse\"] → +1\n\n# Negative Modifiers (-points)  \nNEGATIVE_EVENTS = [\"konkurs\", \"avvikling\", \"nedleggelse\", \"oppsigelser\", \"tap\", \"krise\"] → -3\nSIZE_PENALTY = [\"<15 ansatte\", \"liten bedrift\", \"startup uten finansiering\"] → -2\nFOREIGN_PENALTY = [\"utenlandsk selskap uten norsk tilknytning\"] → -1\n```\n\n## 4. JSON OUTPUT STRUCTURE SPECIFICATION\n\n### 4.1 Root Metadata Section\n```json\n{\n  \"data_source\": \"news_intelligence\",\n  \"processing_timestamp\": \"[YYYY-MM-DD HH:MM:SS Norwegian time]\",\n  \"total_articles_processed\": \"[INTEGER: total Y-values from input]\",\n  \"unique_companies_identified\": \"[INTEGER: deduplicated company count]\",\n  \"critical_companies_found\": \"[INTEGER: companies scoring ≥9]\",\n  \"qualified_companies_found\": \"[INTEGER: companies scoring 5-8]\"\n}\n```\n\n### 4.2 Critical Companies Array (Minimum 1, Maximum 6)\n```json\n{\n  \"critical_companies\": [\n    {\n      // IDENTIFICATION DATA\n      \"name\": \"[REQUIRED: Exact legal company name including AS/ASA]\",\n      \"sector\": \"[REQUIRED: Primary industry in UPPERCASE]\",\n      \"employee_count\": \"[REQUIRED: INTEGER employee count]\",\n      \"location\": \"[REQUIRED: Primary city location]\",\n      \"founded_year\": \"[OPTIONAL: INTEGER founding year if available]\",\n      \n      // TRIGGER EVENT DATA  \n      \"event_type\": \"[REQUIRED: FUNDING|EXPANSION|LEADERSHIP|PARTNERSHIP|PRODUCT_LAUNCH|IPO|M&A]\",\n      \"event_date\": \"[REQUIRED: YYYY-MM-DD event date]\", \n      \"event_description\": \"[REQUIRED: 300-500 characters detailed event description with specific amounts, dates, scope]\",\n      \n      // CONTACT INFORMATION\n      \"ceo_name\": \"[REQUIRED: Full name of CEO/Managing Director]\",\n      \"primary_contact_email\": \"[REQUIRED: Business email or 'Ikke tilgjengelig']\",\n      \"company_phone\": \"[REQUIRED: +47 XXXXXXXX format or 'Ikke tilgjengelig']\",\n      \"website_display\": \"[REQUIRED: Domain without protocol, e.g. 'company.no']\",\n      \"website_url\": \"[REQUIRED: Full https:// URL]\",\n      \n      // FINANCIAL DATA\n      \"funding_amount_nok\": \"[REQUIRED: 'XXX M NOK'|'XXX NOK'|'Ikke oppgitt']\",\n      \"funding_type\": \"[REQUIRED: 'Serie A'|'Serie B'|'Serie C'|'Growth Capital'|'IPO'|'Dividend'|'Operational']\",\n      \"investors_list\": \"[REQUIRED: Comma-separated investor names or 'Børsnotert'|'Ikke oppgitt']\",\n      \"valuation_nok\": \"[OPTIONAL: Company valuation if mentioned]\",\n      \n      // NEWS SOURCE DATA\n      \"source_publication\": \"[REQUIRED: E24|DN|Finansavisen|TU|etc.]\",\n      \"source_url\": \"[REQUIRED: Full URL to original article]\", \n      \"source_author\": \"[REQUIRED: Journalist name or 'Ikke oppgitt']\",\n      \"source_date\": \"[REQUIRED: YYYY-MM-DD publication date]\",\n      \n      // SONAT-SPECIFIC ANALYSIS\n      \"technical_requirements\": \"[REQUIRED: Comma-separated list of 4-6 specific tech needs matching SONAT capabilities]\",\n      \"technical_requirements_array\": \"[REQUIRED: Array version of technical_requirements]\",\n      \"growth_indicators\": \"[REQUIRED: Comma-separated list of 3-5 specific growth signals]\",\n      \"growth_indicators_array\": \"[REQUIRED: Array version of growth_indicators]\",\n      \"sonat_business_case\": \"[REQUIRED: 250-400 characters detailed analysis of why this is perfect SONAT opportunity]\",\n      \"sonat_approach_strategy\": \"[REQUIRED: 200-300 characters specific strategy for SONAT to approach this company]\",\n      \"technical_complexity_level\": \"[REQUIRED: 'Enterprise'|'Mid-Market'|'SME' based on scope]\",\n      \"estimated_project_value_nok\": \"[REQUIRED: 'X-Y M NOK' realistic project value range]\",\n      \"competition_risk\": \"[REQUIRED: 'Low'|'Medium'|'High' - likelihood competitors are pursuing]\",\n      \"decision_timeline\": \"[REQUIRED: 'Immediate'|'Q4 2025'|'2026' - expected decision timeline]\",\n      \n      // CLASSIFICATION TAGS\n      \"sonat_service_match\": \"[REQUIRED: Array of matching SONAT services]\",\n      \"relevance_tags\": \"[REQUIRED: Array of 4-6 technical tags]\",\n      \"priority_urgency\": \"[REQUIRED: 'Critical'|'High'|'Medium']\",\n      \"sonat_confidence_score\": \"[REQUIRED: INTEGER 1-10 confidence in opportunity viability]\",\n      \"internal_notes\": \"[OPTIONAL: Strategic notes for SONAT team]\"\n    }\n  ]\n}\n```\n\n### 4.3 Qualified Companies Array (Minimum 3, Maximum 12)\n```json\n{\n  \"qualified_companies\": [\n    {\n      // BASIC IDENTIFICATION\n      \"name\": \"[REQUIRED: Company name]\",\n      \"sector\": \"[REQUIRED: Industry in UPPERCASE]\", \n      \"employee_count\": \"[REQUIRED: INTEGER]\",\n      \"location\": \"[REQUIRED: City]\",\n      \"website_url\": \"[OPTIONAL: Full https:// URL]\",\n      \n      // OPPORTUNITY ANALYSIS\n      \"business_opportunity\": \"[REQUIRED: 150-250 characters concrete business opportunity with specific value drivers]\",\n      \"news_trigger\": \"[REQUIRED: What news event triggered inclusion]\",\n      \"sonat_value_proposition\": \"[REQUIRED: 120-200 characters how SONAT can specifically help this company]\",\n      \"approach_recommendation\": \"[REQUIRED: 'Direct Contact'|'Warm Introduction'|'Event Networking'|'Content Marketing']\",\n      \"timeline_priority\": \"[REQUIRED: 'This Week'|'Next Week'|'This Month'|'Next Quarter']\",\n      \n      // SOURCE AND SCORING\n      \"source_publication\": \"[REQUIRED: News source]\",\n      \"source_url\": \"[REQUIRED: Article URL]\",\n      \"relevance_score\": \"[REQUIRED: INTEGER 5-8]\",\n      \"opportunity_size\": \"[REQUIRED: 'Small (0.5-2M)'|'Medium (2-10M)'|'Large (10M+)']\"\n    }\n  ]\n}\n```\n\n### 4.4 Market Intelligence Summary\n```json\n{\n  \"market_summary\": {\n    \"total_funding_identified_mnok\": \"[REQUIRED: INTEGER sum of all funding amounts]\",\n    \"most_active_sectors\": \"[REQUIRED: Array of top 3 sectors by activity]\",\n    \"geographic_distribution\": {\n      \"oslo_percentage\": \"[REQUIRED: INTEGER percentage of companies in Oslo]\",\n      \"bergen_percentage\": \"[REQUIRED: INTEGER percentage in Bergen]\", \n      \"other_cities\": \"[REQUIRED: Array of other cities with counts]\"\n    },\n    \"technology_trends\": \"[REQUIRED: Array of 3-5 observed tech trends]\",\n    \"urgency_indicators\": \"[REQUIRED: Array of signals indicating immediate opportunities]\",\n    \"competitive_landscape\": \"[REQUIRED: 100-200 characters assessment of competitive situation]\"\n  }\n}\n```\n\n### 4.5 Action Intelligence Section\n```json\n{\n  \"immediate_actions\": [\n    {\n      \"priority_level\": \"[REQUIRED: 'Critical'|'High'|'Medium']\",\n      \"target_company\": \"[REQUIRED: Company name from critical/qualified arrays]\",\n      \"recommended_action\": \"[REQUIRED: Specific action with timeline]\",\n      \"contact_approach\": \"[REQUIRED: How to make initial contact]\",\n      \"value_proposition\": \"[REQUIRED: Key message to lead with]\",\n      \"success_probability\": \"[REQUIRED: INTEGER 1-10 likelihood of positive response]\"\n    }\n  ]\n}\n```\n\n## 5. QUALITY ASSURANCE FRAMEWORK\n\n### 5.1 Data Validation Checkpoints\n**Company Data Integrity:**\n- All company names verified for Norwegian business format\n- Employee counts realistic for named companies\n- Funding amounts within reasonable market ranges\n- Contact information follows Norwegian standards\n\n**Source Verification:**\n- All source URLs accessible and valid\n- Publication dates within reasonable timeframe\n- Author attribution complete where available\n- No duplicate articles processed\n\n**SONAT Relevance Validation:**\n- Technical requirements align with SONAT capabilities\n- Business cases include specific value drivers\n- Project value estimates based on market benchmarks\n- Competition assessment realistic\n\n### 5.2 Business Logic Validation\n**Scoring Consistency:**\n- Critical companies (≥9 score) have substantial funding/growth indicators\n- Qualified companies (5-8 score) show clear business potential\n- Technical complexity matches company size and scope\n- Approach strategies appropriate for company tier\n\n**Timeline Realism:**\n- Decision timelines consistent with company stage and event type\n- Action recommendations match urgency level\n- Project scopes reasonable for identified company needs\n\n### 5.3 Output Quality Gates\n**Technical Compliance:**\n- Valid JSON structure (passes JSON.parse())\n- All REQUIRED fields populated with meaningful data\n- Norwegian language consistency maintained\n- Character limits respected for all text fields\n\n**Business Value Standards:**\n- Minimum 1 critical company with >9 relevance score\n- Minimum 3 qualified companies with actionable opportunities\n- All companies have clear SONAT value proposition\n- Action items include specific next steps\n\n## 6. ERROR HANDLING PROTOCOLS\n\n### 6.1 Insufficient Quality Data\n**Low-Quality Article Handling:**\n- Skip articles without clear company identification\n- Flag articles with insufficient business context\n- Maintain processing for remaining valid articles\n\n**Missing Company Information:**\n- Use \"Ikke tilgjengelig\" for unavailable contact data\n- Estimate employee counts from industry context\n- Generate realistic technical needs based on sector analysis\n- Maintain company in queue if core business case exists\n\n### 6.2 Edge Case Management  \n**Foreign Company Mentions:**\n- Include only if significant Norwegian operations\n- Adjust scoring for local market relevance\n- Focus on Norwegian-impact business opportunities\n\n**Duplicate Company Coverage:**\n- Merge multiple articles about same company\n- Use most recent/comprehensive information\n- Combine insights from multiple sources\n\n### 6.3 Quality Degradation Fallbacks\n**Insufficient Critical Companies:**\n- Lower scoring threshold to 8 if needed to meet minimum 1\n- Promote highest-scoring qualified companies\n- Ensure meaningful business justification maintained\n\n**Missing Technical Details:**\n- Generate realistic technical needs based on company sector/size\n- Align requirements with SONAT core competencies\n- Use industry-standard project scoping\n\n## 7. EXECUTION SPECIFICATIONS\n\n### 7.1 Processing Algorithm (20-Second Timeline)\n**Phase 1: Data Ingestion (3 seconds)**\n1. Parse all article inputs and extract Y-values\n2. Calculate total_articles_processed\n3. Validate article structure and data quality\n\n**Phase 2: Company Analysis (10 seconds)**  \n1. Extract company mentions and business events\n2. Apply SONAT relevance scoring matrix\n3. Categorize into critical/qualified tiers\n4. Generate technical needs and business cases\n\n**Phase 3: Intelligence Synthesis (5 seconds)**\n1. Build comprehensive company profiles\n2. Generate market summary and trends\n3. Create specific action recommendations\n4. Validate data quality and business logic\n\n**Phase 4: JSON Generation (2 seconds)**\n1. Structure all data per specification\n2. Validate JSON syntax and required fields  \n3. Execute final quality checks\n4. Output raw JSON for next processing stage\n\n### 7.2 Success Metrics\n- **Processing Completeness**: >95% of input articles successfully processed\n- **Company Identification**: >90% of mentioned companies extracted and scored\n- **Business Relevance**: All output companies have ≥5 SONAT relevance score\n- **Action Viability**: All recommended actions include specific contact approach\n\n### 7.3 Output Delivery Protocol\n1. **No explanatory text or processing summaries**\n2. **Raw JSON output only - optimized for Make.com parsing**\n3. **First character `{`, last character `}`**\n4. **Immediate termination after JSON completion**\n\n---\n\n**PROCESSING INITIATION**: Begin analysis of input news data according to above specifications. Generate comprehensive JSON intelligence report for SONAT market opportunity assessment.",
                                "type": "text"
                            },
                            {
                                "text": "INPUT DATA FRA NYHETER:\n{{3.text}}",
                                "type": "text"
                            }
                        ]
                    }
                ],
                "metadata": {},
                "max_tokens": "64000",
                "temperature": "1"
            },
            "metadata": {
                "designer": {
                    "x": 900,
                    "y": 0,
                    "name": "nyheter"
                },
                "restore": {
                    "expect": {
                        "model": {
                            "mode": "chose",
                            "label": "Claude Sonnet 4"
                        },
                        "messages": {
                            "mode": "chose",
                            "items": [
                                {
                                    "role": {
                                        "mode": "chose",
                                        "label": "User"
                                    },
                                    "content": {
                                        "mode": "chose",
                                        "items": [
                                            {
                                                "type": {
                                                    "mode": "chose",
                                                    "label": "Text"
                                                }
                                            },
                                            {
                                                "type": {
                                                    "mode": "chose",
                                                    "label": "Text"
                                                }
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        "stop_sequences": {
                            "mode": "chose"
                        },
                        "additionalParameters": {
                            "mode": "chose"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "anthropic-claude"
                            },
                            "label": "AIKI"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:anthropic-claude",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "model",
                        "type": "select",
                        "label": "Model",
                        "required": true
                    },
                    {
                        "name": "max_tokens",
                        "type": "uinteger",
                        "label": "Max Tokens",
                        "required": true
                    },
                    {
                        "name": "messages",
                        "spec": {
                            "name": "value",
                            "spec": [
                                {
                                    "name": "role",
                                    "type": "select",
                                    "label": "Role",
                                    "options": [
                                        {
                                            "label": "User",
                                            "value": "user",
                                            "nested": [
                                                {
                                                    "name": "content",
                                                    "spec": {
                                                        "spec": [
                                                            {
                                                                "help": "For models that support image content blocks (vision), see the [Anthropic model comparison table](https://docs.anthropic.com/en/docs/about-claude/models#model-comparison-table).",
                                                                "name": "type",
                                                                "type": "select",
                                                                "label": "Type",
                                                                "options": [
                                                                    {
                                                                        "label": "Text",
                                                                        "value": "text",
                                                                        "nested": [
                                                                            {
                                                                                "help": "Content of the message on behalf of the selected **Role** .",
                                                                                "name": "text",
                                                                                "type": "text",
                                                                                "label": "Text",
                                                                                "required": true
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "label": "Image",
                                                                        "value": "image",
                                                                        "nested": [
                                                                            {
                                                                                "name": "source",
                                                                                "spec": [
                                                                                    {
                                                                                        "help": "File name, including the extension, for example, `image.jpg`.",
                                                                                        "name": "filename",
                                                                                        "type": "filename",
                                                                                        "label": "Filename",
                                                                                        "required": true,
                                                                                        "semantic": "file:name",
                                                                                        "extension": [
                                                                                            "jpeg",
                                                                                            "jpg",
                                                                                            "png",
                                                                                            "gif",
                                                                                            "webp"
                                                                                        ]
                                                                                    },
                                                                                    {
                                                                                        "help": "Binary data of the image. For example, you can retrieve the binary data of your image using the **HTTP: Get a file** module.",
                                                                                        "name": "data",
                                                                                        "type": "buffer",
                                                                                        "label": "Data",
                                                                                        "required": true,
                                                                                        "semantic": "file:data"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Source",
                                                                                "required": true
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "label": "PDF document",
                                                                        "value": "document",
                                                                        "nested": [
                                                                            "rpc://anthropic-claude/1/notePdfDocument",
                                                                            {
                                                                                "name": "pdfFileName",
                                                                                "type": "filename",
                                                                                "label": "Filename",
                                                                                "required": true,
                                                                                "semantic": "file:name",
                                                                                "extension": [
                                                                                    "pdf"
                                                                                ]
                                                                            },
                                                                            {
                                                                                "name": "pdfFileData",
                                                                                "type": "buffer",
                                                                                "label": "Data",
                                                                                "required": true,
                                                                                "semantic": "file:data"
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "label": "Tool result",
                                                                        "value": "tool_result",
                                                                        "nested": [
                                                                            {
                                                                                "name": "tool_use_id",
                                                                                "type": "text",
                                                                                "label": "Tool Use ID",
                                                                                "required": true
                                                                            },
                                                                            {
                                                                                "name": "content",
                                                                                "type": "text",
                                                                                "label": "Content",
                                                                                "required": true
                                                                            }
                                                                        ]
                                                                    }
                                                                ],
                                                                "required": true
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Content"
                                                    },
                                                    "type": "array",
                                                    "label": "Content",
                                                    "labels": {
                                                        "add": "Add content"
                                                    },
                                                    "required": true
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Assistant",
                                            "value": "assistant",
                                            "nested": [
                                                {
                                                    "help": "If the request ends with an assistant turn, then the response content will continue directly from that last turn.",
                                                    "name": "content",
                                                    "type": "text",
                                                    "label": "Content",
                                                    "required": true
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Tool Assistant",
                                            "value": "tool_assistant",
                                            "nested": [
                                                {
                                                    "name": "content",
                                                    "spec": {
                                                        "spec": [
                                                            {
                                                                "help": "You can send image content blocks starting with Claude 3 models.",
                                                                "name": "type",
                                                                "type": "select",
                                                                "label": "Type",
                                                                "options": [
                                                                    {
                                                                        "label": "Text",
                                                                        "value": "text",
                                                                        "nested": [
                                                                            {
                                                                                "help": "Content of the message on behalf of the selected **Role** .",
                                                                                "name": "text",
                                                                                "type": "text",
                                                                                "label": "Text",
                                                                                "required": true
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "label": "Tool Use",
                                                                        "value": "tool_use",
                                                                        "nested": [
                                                                            {
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "Tool Use ID",
                                                                                "required": true
                                                                            },
                                                                            {
                                                                                "name": "name",
                                                                                "type": "text",
                                                                                "label": "Tool Name",
                                                                                "required": true
                                                                            },
                                                                            {
                                                                                "name": "input",
                                                                                "type": "any",
                                                                                "label": "Input",
                                                                                "required": true
                                                                            }
                                                                        ]
                                                                    }
                                                                ],
                                                                "required": true
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Content"
                                                    },
                                                    "type": "array",
                                                    "label": "Content",
                                                    "labels": {
                                                        "add": "Add content"
                                                    },
                                                    "required": true
                                                }
                                            ]
                                        }
                                    ],
                                    "required": true
                                }
                            ],
                            "type": "collection",
                            "label": "Message"
                        },
                        "type": "array",
                        "label": "Messages",
                        "required": true
                    },
                    {
                        "name": "system",
                        "type": "text",
                        "label": "System Prompt"
                    },
                    {
                        "name": "metadata",
                        "spec": [
                            {
                                "name": "user_id",
                                "type": "text",
                                "label": "User ID"
                            }
                        ],
                        "type": "collection",
                        "label": "Metadata"
                    },
                    {
                        "name": "stop_sequences",
                        "spec": {
                            "name": "value",
                            "type": "text",
                            "label": "Stop Sequence"
                        },
                        "type": "array",
                        "label": "Stop Sequences"
                    },
                    {
                        "name": "temperature",
                        "type": "number",
                        "label": "Temperature",
                        "validate": {
                            "max": 1,
                            "min": 0
                        }
                    },
                    {
                        "name": "top_p",
                        "type": "number",
                        "label": "Top P",
                        "validate": {
                            "max": 1
                        }
                    },
                    {
                        "name": "top_k",
                        "type": "uinteger",
                        "label": "Top K"
                    },
                    {
                        "name": "additionalParameters",
                        "spec": {
                            "name": "value",
                            "spec": [
                                {
                                    "name": "key",
                                    "type": "text",
                                    "label": "Parameter Name",
                                    "required": true
                                },
                                {
                                    "name": "type",
                                    "type": "select",
                                    "label": "Input Type",
                                    "options": [
                                        {
                                            "label": "Text",
                                            "value": "text",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "text",
                                                    "label": "Parameter Value"
                                                }
                                            ],
                                            "default": true
                                        },
                                        {
                                            "label": "Number",
                                            "value": "number",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "number",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Boolean",
                                            "value": "boolean",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "boolean",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Date",
                                            "value": "date",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "date",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Tools",
                                            "value": "tools",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "spec": {
                                                        "type": "text",
                                                        "label": "Parameter Value"
                                                    },
                                                    "type": "array",
                                                    "label": "Parameter Values",
                                                    "labels": {
                                                        "add": "Add parameter value"
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Any",
                                            "value": "any",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "any",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "type": "collection",
                            "label": "Input Parameter"
                        },
                        "type": "array",
                        "label": "Other Input Parameters"
                    }
                ]
            }
        },
        {
            "id": 9,
            "module": "google-sheets:getSheetContent",
            "version": 2,
            "parameters": {
                "__IMTCONN__": 5394937
            },
            "mapper": {
                "range": "a2:D500",
                "select": "map",
                "sheetId": "LinkedIn {{formatDate(now; \"DD.MM.YYYY\")}}",
                "spreadsheetId": "1p5lLUysE1TWqctWvVtvSkccC4znpAvojsuoogVGj_rk",
                "tableFirstRow": "a1:D1",
                "includesHeaders": true,
                "valueRenderOption": "FORMATTED_VALUE",
                "dateTimeRenderOption": "FORMATTED_STRING"
            },
            "metadata": {
                "designer": {
                    "x": 1200,
                    "y": 0,
                    "name": "LINKEDIN"
                },
                "restore": {
                    "expect": {
                        "select": {
                            "label": "Enter manually"
                        },
                        "includesHeaders": {
                            "mode": "chose"
                        },
                        "valueRenderOption": {
                            "mode": "chose",
                            "label": "Formatted value"
                        },
                        "dateTimeRenderOption": {
                            "mode": "chose",
                            "label": "Formatted string"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "google"
                            },
                            "label": "AMUND AIKI (amund@aiki.as)"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:google",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "select",
                        "type": "select",
                        "label": "Search Method",
                        "required": true,
                        "validate": {
                            "enum": [
                                "list",
                                "fromAll",
                                "map"
                            ]
                        }
                    },
                    {
                        "name": "range",
                        "type": "text",
                        "label": "Range",
                        "required": true
                    },
                    {
                        "name": "includesHeaders",
                        "type": "boolean",
                        "label": "Table contains headers",
                        "required": true
                    },
                    {
                        "name": "valueRenderOption",
                        "type": "select",
                        "label": "Value render option",
                        "validate": {
                            "enum": [
                                "FORMATTED_VALUE",
                                "UNFORMATTED_VALUE",
                                "FORMULA"
                            ]
                        }
                    },
                    {
                        "name": "dateTimeRenderOption",
                        "type": "select",
                        "label": "Date and time render option",
                        "validate": {
                            "enum": [
                                "SERIAL_NUMBER",
                                "FORMATTED_STRING"
                            ]
                        }
                    },
                    {
                        "name": "spreadsheetId",
                        "type": "text",
                        "label": "Spreadsheet ID",
                        "required": true
                    },
                    {
                        "name": "sheetId",
                        "type": "text",
                        "label": "Sheet Name",
                        "required": true
                    },
                    {
                        "name": "tableFirstRow",
                        "type": "text",
                        "label": "Row with headers"
                    }
                ],
                "interface": [
                    {
                        "name": "__IMTLENGTH__",
                        "type": "uinteger",
                        "label": "Total number of bundles"
                    },
                    {
                        "name": "__IMTINDEX__",
                        "type": "uinteger",
                        "label": "Bundle order position"
                    },
                    {
                        "name": "__ROW_NUMBER__",
                        "type": "number",
                        "label": "Row number"
                    },
                    {
                        "name": "__SPREADSHEET_ID__",
                        "type": "text",
                        "label": "Spreadsheet ID"
                    },
                    {
                        "name": "__SHEET__",
                        "type": "text",
                        "label": "Sheet"
                    },
                    {
                        "name": "0",
                        "type": "text",
                        "label": "KONTO (A)"
                    },
                    {
                        "name": "1",
                        "type": "text",
                        "label": "URL (B)"
                    },
                    {
                        "name": "2",
                        "type": "text",
                        "label": "INNLEGG (C)"
                    },
                    {
                        "name": "3",
                        "type": "text",
                        "label": "URL (D)"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 10,
            "module": "util:TextAggregator",
            "version": 1,
            "parameters": {
                "feeder": 9,
                "rowSeparator": "\n"
            },
            "mapper": {
                "value": "Rad: {{9.`__ROW_NUMBER__`}}/{{9.`__IMTLENGTH__`}}\nKONTO: {{9.`0`}}\n\nKONTO_URL: {{9.`1`}}\n\nINNLEGG_TEKST: {{9.`2`}}\n\nINNLEGG_URL: {{9.`3`}}\n\n"
            },
            "metadata": {
                "designer": {
                    "x": 1500,
                    "y": 0,
                    "name": "LINKEDIN"
                },
                "restore": {
                    "extra": {
                        "feeder": {
                            "label": "LINKEDIN - Get Range Values [9]"
                        }
                    },
                    "parameters": {
                        "rowSeparator": {
                            "label": "New row"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "rowSeparator",
                        "type": "select",
                        "label": "Row separator",
                        "validate": {
                            "enum": [
                                "\n",
                                "\t",
                                "other"
                            ]
                        }
                    }
                ],
                "expect": [
                    {
                        "name": "value",
                        "type": "text",
                        "label": "Text"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 38,
            "module": "google-sheets:getSheetContent",
            "version": 2,
            "parameters": {
                "__IMTCONN__": 5394937
            },
            "mapper": {
                "range": "a2:d500",
                "select": "map",
                "sheetId": "Linkedin {{formatDate(now; \"DD.MM.YYYY\")}}",
                "spreadsheetId": "1p5lLUysE1TWqctWvVtvSkccC4znpAvojsuoogVGj_rk",
                "tableFirstRow": "a1:k1",
                "includesHeaders": true,
                "valueRenderOption": "FORMATTED_VALUE",
                "dateTimeRenderOption": "FORMATTED_STRING"
            },
            "metadata": {
                "designer": {
                    "x": 1800,
                    "y": 0,
                    "name": "Linkedin"
                },
                "restore": {
                    "expect": {
                        "select": {
                            "label": "Enter manually"
                        },
                        "includesHeaders": {
                            "mode": "chose"
                        },
                        "valueRenderOption": {
                            "mode": "chose",
                            "label": "Formatted value"
                        },
                        "dateTimeRenderOption": {
                            "mode": "chose",
                            "label": "Formatted string"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "google"
                            },
                            "label": "AMUND AIKI (amund@aiki.as)"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:google",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "select",
                        "type": "select",
                        "label": "Search Method",
                        "required": true,
                        "validate": {
                            "enum": [
                                "list",
                                "fromAll",
                                "map"
                            ]
                        }
                    },
                    {
                        "name": "range",
                        "type": "text",
                        "label": "Range",
                        "required": true
                    },
                    {
                        "name": "includesHeaders",
                        "type": "boolean",
                        "label": "Table contains headers",
                        "required": true
                    },
                    {
                        "name": "valueRenderOption",
                        "type": "select",
                        "label": "Value render option",
                        "validate": {
                            "enum": [
                                "FORMATTED_VALUE",
                                "UNFORMATTED_VALUE",
                                "FORMULA"
                            ]
                        }
                    },
                    {
                        "name": "dateTimeRenderOption",
                        "type": "select",
                        "label": "Date and time render option",
                        "validate": {
                            "enum": [
                                "SERIAL_NUMBER",
                                "FORMATTED_STRING"
                            ]
                        }
                    },
                    {
                        "name": "spreadsheetId",
                        "type": "text",
                        "label": "Spreadsheet ID",
                        "required": true
                    },
                    {
                        "name": "sheetId",
                        "type": "text",
                        "label": "Sheet Name",
                        "required": true
                    },
                    {
                        "name": "tableFirstRow",
                        "type": "text",
                        "label": "Row with headers"
                    }
                ],
                "interface": [
                    {
                        "name": "__IMTLENGTH__",
                        "type": "uinteger",
                        "label": "Total number of bundles"
                    },
                    {
                        "name": "__IMTINDEX__",
                        "type": "uinteger",
                        "label": "Bundle order position"
                    },
                    {
                        "name": "__ROW_NUMBER__",
                        "type": "number",
                        "label": "Row number"
                    },
                    {
                        "name": "__SPREADSHEET_ID__",
                        "type": "text",
                        "label": "Spreadsheet ID"
                    },
                    {
                        "name": "__SHEET__",
                        "type": "text",
                        "label": "Sheet"
                    },
                    {
                        "name": "0",
                        "type": "text",
                        "label": "KONTO (A)"
                    },
                    {
                        "name": "1",
                        "type": "text",
                        "label": "URL (B)"
                    },
                    {
                        "name": "2",
                        "type": "text",
                        "label": "INNLEGG (C)"
                    },
                    {
                        "name": "3",
                        "type": "text",
                        "label": "URL (D)"
                    },
                    {
                        "name": "4",
                        "type": "text",
                        "label": "(E)"
                    },
                    {
                        "name": "5",
                        "type": "text",
                        "label": "(F)"
                    },
                    {
                        "name": "6",
                        "type": "text",
                        "label": "(G)"
                    },
                    {
                        "name": "7",
                        "type": "text",
                        "label": "(H)"
                    },
                    {
                        "name": "8",
                        "type": "text",
                        "label": "(I)"
                    },
                    {
                        "name": "9",
                        "type": "text",
                        "label": "(J)"
                    },
                    {
                        "name": "10",
                        "type": "text",
                        "label": "(K)"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 34,
            "module": "openai-gpt-3:CreateCompletion",
            "version": 1,
            "parameters": {
                "__IMTCONN__": 7361319
            },
            "mapper": {
                "model": "gpt-5-nano",
                "top_p": "1",
                "select": "chat",
                "messages": [
                    {
                        "role": "user",
                        "content": "# LINKEDIN POST CATEGORIZER - AI-MODUL\n\n## 1. ROLLE OG MANDAT\n\nDu er en LinkedIn Intelligence Processor som analyserer norske bedrifters LinkedIn-poster og identifiserer salgsmuligheter for SONAT Consulting.\n\n**Kjernekompetanse påkrevd:**\nRequirements\nSonat tilbyr tjenester innen:\nDigitalisering\nTjenestedesign og UX (brukeropplevelse)\nMaskinlæring og kunstig intelligens\nVR (virtuell virkelighet) og AR (augmented reality)\nTeknologirådgivning\nSystemutvikling\n\n## 2. PROSESSERINGSREGLER\n\n### 2.1 Input-behandling\n- Motta batch med multiple LinkedIn-poster\n- Prosesser alle poster individuelt\n- Inkluder KUN poster med Relevans_Score > 6 i output\n\n### 2.2 Kategoriklassifikasjon\n```\nGYLDIGE_KATEGORIER:\n- \"Teknisk_Rekruttering\" (ansetter tech-roller)\n- \"Digitalisering\" (AI/cloud/modernisering)  \n- \"Vekst_Ekspansjon\" (skalering/nye markeder)\n- \"Teknisk_Partnerskap\" (integrasjon/samarbeid)\n- \"Produktlansering\" (ny tech-løsning)\n- \"Generell_Aktivitet\" (fallback)\n```\n\n### 2.3 SONAT Relevance Scoring (1-10)\n```\nScore 9-10: Teknisk rekruttering (CTO/DevOps/Cloud), AI/ML-prosjekt, søker konsulent\nScore 7-8: Vekst med tech-behov, modernisering, teknisk partnerskap\nScore 5-6: Generell aktivitet med potensial\nScore 1-4: Irrelevant for SONAT\n```\n\n### 2.4 Filterkriterium\n**KRITISK REGEL: Inkluder KUN poster med score > 6 i final output**\n\n## 3. OUTPUT STRUKTUR\n\n### 3.1 JSON Schema\n```json\n{\n  \"qualifying_posts\": [\n    {\n      \"company_name\": \"[Firmanavn fra post]\",\n      \"post_content\": \"[HELE LinkedIn-innlegget ordrett]\",\n      \"post_url\": \"[LinkedIn URL]\",\n      \"row_number\": \"[row number]\",\n      \"post_date\": \"[YYYY-MM-DD]\",\n      \"kategori\": \"[En av de 6 gyldige kategoriene]\",\n      \"relevans_score\": \"[INTEGER 7-10 kun]\",\n      \"ai_tags\": \"[Array med 2-4 tags]\",\n      \"sonat_kontakt_grunn\": \"[150-250 tegn begrunnelse]\"\n    }\n  ]\n}\n```\n\n### 3.2 Kontakt-begrunnelse Template\n```\nFormat: \"TRIGGER: [hendelse] | MATCH: [SONAT-tjeneste] | VALUE: [estimert verdi]\"\n\nEksempel: \"TRIGGER: Ansetter DevOps Engineer | MATCH: Cloud Migration | VALUE: 3-8M NOK infrastruktur-prosjekt\"\n```\n\n## 4. PROSESSERINGSALGORITME\n\n### Steg 1: Parse Input (5 sek)\n1. Identifiser individuelle LinkedIn-poster fra batch-input\n2. Ekstraher: company_name, post_content, post_url, post_date\n\n### Steg 2: Score og Kategoriser (20 sek)\n1. Analyser post_content for business-signaler\n2. Tildel kategori basert på innholdsanalyse  \n3. Beregn relevans_score (1-10) basert på SONAT-match\n4. Generer ai_tags og sonat_kontakt_grunn\n\n### Steg 3: Filter og Assemble (10 sek)\n1. **KRITISK: Inkluder KUN poster med relevans_score > 6**\n2. Struktur JSON array med kvalifiserte poster\n3. Valider output-format\n\n### Steg 4: Return JSON (5 sek)\n1. Output valid JSON starting with `{`\n2. End with `}`\n3. Ingen forklarende tekst\n\n## 5. VALIDERING\n\n### 5.1 Obligatoriske Krav\n- Alle inkluderte poster MÅ ha relevans_score > 6\n- post_content MÅ inneholde hele LinkedIn-innlegget\n- sonat_kontakt_grunn MÅ være 150-250 tegn\n- ai_tags MÅ være array med 2-4 elementer\n\n### 5.2 Feilhåndtering\n- Malformed post: Skip, fortsett med neste\n- Tom input: Return tom qualifying_posts array\n- Parsing feil: Logg, fortsett batch-prosessering\n\n## 6. EKSEMPEL OUTPUT\n\n### Input\n```\nPost 1: Company: TechNorge AS | Date: 2025-08-24 | Content: Ansetter Senior DevOps Engineer til vårt AWS cloud team. Jobber med Kubernetes og CI/CD pipelines. | URL: https://linkedin.com/posts/tech-norge-123\n```\n\n### Output\n```json\n{\n  \"qualifying_posts\": [\n    {\n      \"company_name\": \"TechNorge AS\",\n      \"post_content\": \"Ansetter Senior DevOps Engineer til vårt AWS cloud team. Jobber med Kubernetes og CI/CD pipelines.\",\n      \"post_url\": \"https://linkedin.com/posts/tech-norge-123\",\n      \"post_date\": \"2025-08-24\",\n      \"row_number\": \"[row number]\",\n      \"kategori\": \"Teknisk_Rekruttering\", \n      \"relevans_score\": 9,\n      \"ai_tags\": [\"hot-lead\", \"rekruttering\", \"Cloud/DevOps\", \"AWS\"],\n      \"sonat_kontakt_grunn\": \"TRIGGER: DevOps Engineer-rekruttering med AWS/Kubernetes | MATCH: Enterprise Cloud Migration | VALUE: 3-12M NOK infrastruktur-transformasjon\"\n    }\n  ]\n}\n```\n\n---\n\n**EXECUTION COMMAND**: Prosesser LinkedIn posts, inkluder KUN score >6, returner valid JSON med hele innlegg inkludert."
                    },
                    {
                        "role": "user",
                        "content": "linkendin input:\n{{10.text}}"
                    }
                ],
                "max_tokens": "0",
                "temperature": "1",
                "n_completions": "1",
                "response_format": "json_object",
                "parseJSONResponse": false
            },
            "metadata": {
                "designer": {
                    "x": 2100,
                    "y": 0,
                    "name": "linkedin >6"
                },
                "restore": {
                    "expect": {
                        "stop": {
                            "mode": "chose"
                        },
                        "model": {
                            "mode": "chose",
                            "label": "gpt-5-nano (system)"
                        },
                        "select": {
                            "label": "Create a Chat Completion (GPT and o1 models)"
                        },
                        "messages": {
                            "mode": "chose",
                            "items": [
                                {
                                    "role": {
                                        "mode": "chose",
                                        "label": "User"
                                    }
                                },
                                {
                                    "role": {
                                        "mode": "chose",
                                        "label": "User"
                                    }
                                }
                            ]
                        },
                        "logit_bias": {
                            "mode": "chose"
                        },
                        "tool_choice": {
                            "mode": "chose",
                            "label": "Empty"
                        },
                        "response_format": {
                            "mode": "chose",
                            "label": "JSON Object"
                        },
                        "reasoning_effort": {
                            "mode": "chose",
                            "label": "Empty"
                        },
                        "parseJSONResponse": {
                            "mode": "chose"
                        },
                        "additionalParameters": {
                            "mode": "chose"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "openai-gpt-3"
                            },
                            "label": "AIKI team"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:openai-gpt-3",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "select",
                        "type": "select",
                        "label": "Select Method",
                        "required": true,
                        "validate": {
                            "enum": [
                                "chat",
                                "prompt"
                            ]
                        }
                    },
                    {
                        "name": "temperature",
                        "type": "number",
                        "label": "Temperature",
                        "validate": {
                            "max": 2,
                            "min": 0
                        }
                    },
                    {
                        "name": "top_p",
                        "type": "number",
                        "label": "Top P",
                        "validate": {
                            "max": 1,
                            "min": 0
                        }
                    },
                    {
                        "name": "n_completions",
                        "type": "number",
                        "label": "Number"
                    },
                    {
                        "name": "frequency_penalty",
                        "type": "number",
                        "label": "Frequency Penalty",
                        "validate": {
                            "max": 2,
                            "min": -2
                        }
                    },
                    {
                        "name": "presence_penalty",
                        "type": "number",
                        "label": "Presence Penalty",
                        "validate": {
                            "max": 2,
                            "min": -2
                        }
                    },
                    {
                        "name": "logit_bias",
                        "spec": {
                            "name": "value",
                            "spec": [
                                {
                                    "name": "token",
                                    "type": "text",
                                    "label": "Token ID",
                                    "required": true
                                },
                                {
                                    "name": "probability",
                                    "type": "number",
                                    "label": "Probability",
                                    "required": true,
                                    "validate": {
                                        "max": 100,
                                        "min": -100
                                    }
                                }
                            ],
                            "type": "collection",
                            "label": "Token Probability"
                        },
                        "type": "array",
                        "label": "Token Probability"
                    },
                    {
                        "name": "seed",
                        "type": "integer",
                        "label": "Seed"
                    },
                    {
                        "name": "tool_choice",
                        "type": "select",
                        "label": "Tool Choice",
                        "validate": {
                            "enum": [
                                "none",
                                "auto",
                                "required"
                            ]
                        }
                    },
                    {
                        "name": "stop",
                        "spec": {
                            "name": "value",
                            "type": "text",
                            "label": "Stop Sequence"
                        },
                        "type": "array",
                        "label": "Stop Sequences",
                        "validate": {
                            "maxItems": 4
                        }
                    },
                    {
                        "name": "additionalParameters",
                        "spec": {
                            "name": "value",
                            "spec": [
                                {
                                    "name": "key",
                                    "type": "text",
                                    "label": "Parameter Name",
                                    "required": true
                                },
                                {
                                    "name": "type",
                                    "type": "select",
                                    "label": "Input Type",
                                    "options": [
                                        {
                                            "label": "Text",
                                            "value": "text",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "text",
                                                    "label": "Parameter Value"
                                                }
                                            ],
                                            "default": true
                                        },
                                        {
                                            "label": "Number",
                                            "value": "number",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "number",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Boolean",
                                            "value": "boolean",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "boolean",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Date",
                                            "value": "date",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "date",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Any",
                                            "value": "any",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "any",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "type": "collection",
                            "label": "Input Parameter"
                        },
                        "type": "array",
                        "label": "Other Input Parameters"
                    },
                    {
                        "name": "model",
                        "type": "select",
                        "label": "Model",
                        "required": true
                    },
                    {
                        "name": "max_tokens",
                        "type": "uinteger",
                        "label": "Max Completion Tokens"
                    },
                    {
                        "name": "messages",
                        "spec": {
                            "name": "value",
                            "spec": [
                                {
                                    "name": "role",
                                    "type": "select",
                                    "label": "Role",
                                    "options": {
                                        "store": [
                                            {
                                                "label": "User",
                                                "value": "user",
                                                "nested": [
                                                    {
                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "Text Content"
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "Assistant",
                                                "value": "assistant",
                                                "nested": [
                                                    {
                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "Text Content"
                                                    },
                                                    {
                                                        "mode": "edit",
                                                        "name": "tool_calls",
                                                        "spec": {
                                                            "spec": [
                                                                {
                                                                    "name": "type",
                                                                    "type": "hidden",
                                                                    "default": "function"
                                                                },
                                                                {
                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                    "name": "id",
                                                                    "type": "text",
                                                                    "label": "Tool call ID"
                                                                },
                                                                {
                                                                    "name": "function",
                                                                    "spec": [
                                                                        {
                                                                            "help": "The name of the function previously called.",
                                                                            "name": "name",
                                                                            "type": "text",
                                                                            "label": "Name",
                                                                            "required": true
                                                                        },
                                                                        {
                                                                            "help": "The arguments previously output by the AI.",
                                                                            "name": "arguments",
                                                                            "type": "text",
                                                                            "label": "Arguments",
                                                                            "required": true
                                                                        }
                                                                    ],
                                                                    "type": "collection",
                                                                    "label": "Function"
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Tool Call"
                                                        },
                                                        "type": "array",
                                                        "label": "Tool Calls",
                                                        "labels": {
                                                            "add": "Add tool call"
                                                        },
                                                        "mappable": {
                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "Developer / System",
                                                "value": "system",
                                                "nested": [
                                                    {
                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "Text Content"
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "Tool",
                                                "value": "tool",
                                                "nested": [
                                                    {
                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "Text Content",
                                                        "required": true
                                                    },
                                                    {
                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                        "name": "tool_call_id",
                                                        "type": "text",
                                                        "label": "Tool Call ID.",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    "required": true
                                }
                            ],
                            "type": "collection",
                            "label": "Message"
                        },
                        "type": "array",
                        "label": "Messages",
                        "required": true
                    },
                    {
                        "name": "response_format",
                        "type": "select",
                        "label": "Response Format",
                        "validate": {
                            "enum": [
                                "text",
                                "json_object"
                            ]
                        }
                    },
                    {
                        "name": "reasoning_effort",
                        "type": "select",
                        "label": "Reasoning Effort",
                        "validate": {
                            "enum": [
                                "minimal",
                                "low",
                                "medium",
                                "high"
                            ]
                        }
                    },
                    {
                        "name": "parseJSONResponse",
                        "type": "boolean",
                        "label": "Parse JSON Response",
                        "required": true
                    }
                ],
                "interface": [
                    {
                        "name": "result",
                        "type": "any",
                        "label": "Result"
                    },
                    {
                        "name": "id",
                        "type": "text",
                        "label": "ID"
                    },
                    {
                        "name": "object",
                        "type": "text",
                        "label": "Object"
                    },
                    {
                        "name": "created",
                        "type": "date",
                        "label": "Created"
                    },
                    {
                        "name": "model",
                        "type": "text",
                        "label": "Model"
                    },
                    {
                        "name": "choices",
                        "spec": [
                            {
                                "name": "text",
                                "type": "text",
                                "label": "Text"
                            },
                            {
                                "name": "index",
                                "type": "number",
                                "label": "Index"
                            },
                            {
                                "name": "logprobs",
                                "type": "text",
                                "label": "Log Probs"
                            },
                            {
                                "name": "finish_reason",
                                "type": "text",
                                "label": "Finish Reason"
                            },
                            {
                                "name": "message",
                                "spec": [
                                    {
                                        "name": "role",
                                        "type": "text",
                                        "label": "Role"
                                    },
                                    {
                                        "name": "content",
                                        "type": "text",
                                        "label": "Content"
                                    },
                                    {
                                        "name": "tool_calls",
                                        "spec": [
                                            {
                                                "name": "id",
                                                "type": "text",
                                                "label": "ID"
                                            },
                                            {
                                                "name": "type",
                                                "type": "text",
                                                "label": "Type"
                                            },
                                            {
                                                "name": "function",
                                                "spec": [
                                                    {
                                                        "name": "name",
                                                        "type": "text",
                                                        "label": "Name"
                                                    },
                                                    {
                                                        "name": "arguments",
                                                        "type": "text",
                                                        "label": "Arguments"
                                                    }
                                                ],
                                                "type": "collection",
                                                "label": "Function"
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Tool Calls"
                                    },
                                    {
                                        "name": "refusal",
                                        "type": "text",
                                        "label": "Refusal"
                                    },
                                    {
                                        "name": "annotations",
                                        "spec": [
                                            {
                                                "name": "type",
                                                "type": "text",
                                                "label": "Type"
                                            },
                                            {
                                                "name": "url_citation",
                                                "spec": [
                                                    {
                                                        "name": "end_index",
                                                        "type": "number",
                                                        "label": "End Index"
                                                    },
                                                    {
                                                        "name": "start_index",
                                                        "type": "number",
                                                        "label": "Start Index"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text",
                                                        "label": "Title"
                                                    },
                                                    {
                                                        "name": "url",
                                                        "type": "text",
                                                        "label": "URL"
                                                    }
                                                ],
                                                "type": "collection",
                                                "label": "URL Citation"
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Annotations"
                                    }
                                ],
                                "type": "collection",
                                "label": "Message"
                            }
                        ],
                        "type": "array",
                        "label": "Choices"
                    },
                    {
                        "name": "usage",
                        "spec": [
                            {
                                "name": "prompt_tokens",
                                "type": "number",
                                "label": "Prompt Tokens"
                            },
                            {
                                "name": "completion_tokens",
                                "type": "text",
                                "label": "Completion Tokens"
                            },
                            {
                                "name": "total_tokens",
                                "type": "number",
                                "label": "Total Tokens"
                            },
                            {
                                "name": "prompt_tokens_details",
                                "spec": [
                                    {
                                        "name": "cached_tokens",
                                        "type": "uinteger",
                                        "label": "Cached Tokens"
                                    },
                                    {
                                        "name": "text_tokens",
                                        "type": "uinteger",
                                        "label": "Text Tokens"
                                    },
                                    {
                                        "name": "image_tokens",
                                        "type": "uinteger",
                                        "label": "Image Tokens"
                                    },
                                    {
                                        "name": "audio_tokens",
                                        "type": "uinteger",
                                        "label": "Audio Tokens"
                                    }
                                ],
                                "type": "collection",
                                "label": "Prompt Tokens Details"
                            },
                            {
                                "name": "completion_tokens_details",
                                "spec": [
                                    {
                                        "name": "reasoning_tokens",
                                        "type": "uinteger",
                                        "label": "Reasoning Tokens"
                                    },
                                    {
                                        "name": "text_tokens",
                                        "type": "uinteger",
                                        "label": "Text Tokens"
                                    },
                                    {
                                        "name": "audio_tokens",
                                        "type": "uinteger",
                                        "label": "Audio Tokens"
                                    },
                                    {
                                        "name": "accepted_prediction_tokens",
                                        "type": "uinteger",
                                        "label": "Accepted Prediction Tokens"
                                    },
                                    {
                                        "name": "rejected_prediction_tokens",
                                        "type": "uinteger",
                                        "label": "Rejected Prediction Tokens"
                                    }
                                ],
                                "type": "collection",
                                "label": "Completion Tokens Details"
                            }
                        ],
                        "type": "collection",
                        "label": "Usage"
                    },
                    {
                        "name": "service_tier",
                        "type": "text",
                        "label": "Service Tier"
                    },
                    {
                        "name": "system_fingerprint",
                        "type": "text",
                        "label": "System Fingerprint"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 31,
            "module": "openai-gpt-3:CreateCompletion",
            "version": 1,
            "parameters": {
                "__IMTCONN__": 7361319
            },
            "mapper": {
                "model": "gpt-5-nano",
                "top_p": "1",
                "select": "chat",
                "messages": [
                    {
                        "role": "system",
                        "content": "Du er en **LinkedIn Social Intelligence Processor** for SONAT Consulting som transformerer norsk bedrifts-aktivitet på LinkedIn til strukturerte sales opportunities"
                    },
                    {
                        "role": "user",
                        "content": "# SONAT LINKEDIN INTELLIGENCE PROCESSOR - AI-MODUL v1.0\n\n## 1. SYSTEM ARKITEKTUR OG ROLLE\n\n### 1.1 Modul-Spesifikk Rolle\nDu er en **LinkedIn Social Intelligence Processor** for SONAT Consulting som transformerer norsk bedrifts-aktivitet på LinkedIn til strukturerte sales opportunities. Din primære funksjon:\n\n- **Analysere LinkedIn-poster** fra norske teknologi-selskaper\n- **Identifisere hiring signals** og vekst-indikatorer \n- **Kvantifisere engagement levels** og forretningsmuligheter\n- **Produsere triple JSON-struktur** for HTML-rendering kompatibilitet\n\n### 1.2 Social Intelligence Domain Expertise\n**SONAT LinkedIn Opportunity Indicators:**\n- Tech role hiring posts (DevOps, Cloud, AI/ML, Data)\n- Digital transformation announcements  \n- Product launch posts requiring technical scaling\n- Partnership announcements with tech vendors\n- Conference participation in relevant tech events\n- Technical challenge discussions indicating consulting needs\n\nRequirements\nSonat tilbyr tjenester innen:\nDigitalisering\nTjenestedesign og UX (brukeropplevelse)\nMaskinlæring og kunstig intelligens\nVR (virtuell virkelighet) og AR (augmented reality)\nTeknologirådgivning\nSystemutvikling\n\n**Target Signal Types:**\n- Hiring announcements for technical roles\n- Growth/expansion announcements\n- Technology implementation posts\n- Industry event participation\n- Technical problem-solving discussions\n- Company milestone celebrations\n\n### 1.3 Technical Output Requirements\n- **Format**: Exclusively valid JSON without markdown/comments\n- **First Character**: `{`\n- **Last Character**: `}`\n- **Structure**: Triple LinkedIn arrays for HTML compatibility\n- **Parse Validation**: Must pass JSON.parse() test\n- **Language**: Consistent Norwegian in all text fields\n\n## 2. INPUT DATA PROCESSING FRAMEWORK\n\n### 2.1 Expected LinkedIn Input Pattern\n```\n[LinkedIn innlegg rad: X/Y]\nCompany: [Norwegian company name]\nPost_Date: [YYYY-MM-DD]\nPost_Text: [Actual LinkedIn post content, 50-500 characters]\nPost_URL: [LinkedIn post URL or company page URL]\nEngagement_Level: [Høy|Middels|Lav] \nEngagement_Count: [INTEGER likes/comments if available]\nPost_Type: [Hiring|Product|Partnership|Event|Update|Achievement]\n```\n\n### 2.2 LinkedIn Data Aggregation Algorithm\n**Processing Sequence:**\n1. **Scan Input**: Identify all \"rad: X/Y\" patterns\n2. **Extract Y-Values**: Y = total LinkedIn posts in stream\n3. **Calculate Volume**: `total_linkedin_posts = ΣY_values`\n4. **Parse Posts**: Extract company name, engagement, technical signals\n5. **Categorize Content**: Classify post types and urgency levels\n6. **Score Opportunities**: Apply SONAT relevance assessment\n\n### 2.3 Social Signal Extraction Rules\n**High-Priority Signals:**\n- \"Ansetter\" + tech roles (AI, DevOps, Cloud, Data)\n- \"Vokser raskt\" + technology scaling needs\n- \"Lanserer\" + digital products/platforms\n- \"Partnerskap\" + tech companies/vendors\n- \"Digitaliserer\" + business processes\n- \"Automatiserer\" + operations/workflows\n\n**Medium-Priority Signals:**\n- General growth announcements\n- Team expansion without specific tech roles\n- Industry event participation\n- Product updates with tech components\n- Customer success stories involving tech solutions\n\n**Engagement Quality Indicators:**\n- Comments from tech professionals\n- Questions about technical implementation\n- Requests for recommendations/partnerships\n- Detailed technical discussions in comments\n\n## 3. LINKEDIN OPPORTUNITY SCORING MATRIX\n\n### 3.1 Priority Classification System\n\n**HOT (Priority Class: 'hot'):**\n- Explicit tech hiring posts (CTO, DevOps, Cloud Engineer, Data Scientist)\n- Digital transformation project announcements\n- AI/ML implementation discussions\n- Urgent scaling challenges mentioned\n- Partnership requests with tech vendors\n- Technical problem-solving queries\n\n**WARM (Priority Class: 'warm'):**\n- General growth/expansion posts with tech implications\n- Product launches requiring technical infrastructure\n- Team expansion in tech-adjacent roles\n- Industry event participation (tech conferences)\n- Moderate engagement on technical topics\n- Business milestone posts indicating scaling needs\n\n**MEDIUM (Priority Class: 'medium'):**\n- General company updates with potential tech angle\n- Industry insights without specific implementation plans\n- Low-engagement posts about company culture\n- Generic product/service announcements\n- Standard corporate communications\n\n### 3.2 Relevance Scoring Algorithm (1-10 Scale)\n```python\n# Base Score Calculation\nbase_score = 5  # Default medium relevance\n\n# Content-Based Modifiers\nTECH_HIRING_BOOST = [\"ansetter\", \"søker\", \"CTO\", \"DevOps\", \"cloud\", \"AI\", \"data scientist\"] → +3\nGROWTH_SIGNALS = [\"vokser\", \"ekspanderer\", \"skalerer\", \"nye markeder\", \"økt kapasitet\"] → +2  \nTECH_CHALLENGES = [\"digitalisering\", \"automatisering\", \"modernisering\", \"teknisk utfordring\"] → +2\nPARTNERSHIP_SIGNALS = [\"samarbeid\", \"partnerskap\", \"leverandør\", \"konsulent\"] → +1\n\n# Engagement-Based Modifiers  \nHIGH_ENGAGEMENT = [>50 likes or >10 comments] → +1\nQUALITY_COMMENTS = [Comments from tech professionals] → +1\nTECH_DISCUSSIONS = [Technical questions/discussions] → +1\n\n# Company-Size Modifiers\nLARGE_COMPANY = [>500 employees] → +1\nMID_SIZE = [100-500 employees] → +0\nSMALL_COMPANY = [<100 employees] → -1\n\n# Timing Modifiers\nRECENT_POST = [<7 days old] → +1\nURGENT_LANGUAGE = [\"raskt\", \"øyeblikkelig\", \"nå\", \"denne måneden\"] → +2\n\n# Final Score Boundaries\nmax_score = min(calculated_score, 10)\nmin_score = max(calculated_score, 1)\n```\n\n### 3.3 SONAT Service Matching Logic\n**Direct Service Matches:**\n- \"AI\" or \"machine learning\" → SONAT AI/ML consulting\n- \"Cloud\" or \"sky\" → SONAT Cloud architecture\n- \"DevOps\" or \"utvikling\" → SONAT Development services  \n- \"Data\" or \"analyse\" → SONAT Analytics services\n- \"Automatisering\" → SONAT Process automation\n\n**Indirect Service Indicators:**\n- \"Digitalisering\" → Multiple SONAT services relevant\n- \"Modernisering\" → Legacy system upgrade opportunities\n- \"Skalering\" → Infrastructure and development needs\n- \"Integrasjon\" → System integration services\n\n## 4. TRIPLE JSON STRUCTURE SPECIFICATION\n\n### 4.1 Root LinkedIn Intelligence Metadata\n```json\n{\n  \"data_source\": \"linkedin_intelligence\", \n  \"processing_timestamp\": \"[YYYY-MM-DD HH:MM:SS Norwegian time]\",\n  \"total_posts_processed\": \"[INTEGER: sum of all Y-values from input]\",\n  \"unique_companies_monitored\": \"[INTEGER: distinct company count]\",\n  \"high_priority_signals\": \"[INTEGER: posts with priority_class 'hot']\",\n  \"hiring_signals_detected\": \"[INTEGER: posts mentioning tech recruitment]\",\n  \"growth_opportunities_identified\": \"[INTEGER: posts indicating scaling needs]\"\n}\n```\n\n### 4.2 Dashboard Summary Metrics\n```json\n{\n  \"linkedin_dashboard\": {\n    \"monitored_accounts_count\": \"[STRING: unique_companies_monitored as string]\",\n    \"high_engagement_count\": \"[STRING: high_priority_signals as string]\", \n    \"hiring_signals_count\": \"[STRING: hiring_signals_detected as string]\",\n    \"networking_events_count\": \"[STRING: event-related posts as string]\"\n  }\n}\n```\n\n### 4.3 CRITICAL: Triple LinkedIn Structure (All 3 Required)\n\n#### Structure 1: linkedin_pages (Nested Array Format)\n```json\n{\n  \"linkedin_pages\": [\n    [  // First page/chunk\n      {\n        \"company_name\": \"[REQUIRED: Exact company name from input]\",\n        \"post_count\": \"[REQUIRED: INTEGER number of posts for this company]\",\n        \"posts\": [\n          {\n            \"post_date\": \"[REQUIRED: YYYY-MM-DD from input]\",\n            \"engagement_level\": \"[REQUIRED: 'Høy'|'Middels'|'Lav']\",\n            \"priority_class\": \"[REQUIRED: 'hot'|'warm'|'medium']\",\n            \"relevance_score\": \"[REQUIRED: INTEGER 1-10 SONAT opportunity score]\",\n            \"post_text\": \"[REQUIRED: Actual LinkedIn content, max 300 characters]\",\n            \"post_url\": \"[REQUIRED: LinkedIn URL from input]\",\n            \"sonat_opportunity\": \"[REQUIRED: 180-300 characters business opportunity analysis]\",\n            \"opportunity_tags\": \"[REQUIRED: Array of 2-4 relevant opportunity tags]\",\n            \n            // EXTENDED LINKEDIN ANALYSIS\n            \"hiring_indicator\": \"[REQUIRED: Boolean - true if hiring-related]\",\n            \"growth_signal_strength\": \"[REQUIRED: 'Strong'|'Medium'|'Weak']\",\n            \"technical_complexity\": \"[REQUIRED: 'High'|'Medium'|'Low' - estimated project complexity]\",\n            \"decision_maker_engagement\": \"[REQUIRED: Boolean - true if leadership engaged]\",\n            \"competitor_risk\": \"[REQUIRED: 'High'|'Medium'|'Low']\",\n            \"follow_up_timeline\": \"[REQUIRED: 'Immediate'|'This Week'|'This Month']\"\n          }\n        ]\n      }\n    ],\n    [  // Additional pages if needed\n      // Same structure as above for companies requiring separate page grouping\n    ]\n  ]\n}\n```\n\n#### Structure 2: linkedin_posts_pages (Identical Duplicate)\n```json\n{\n  \"linkedin_posts_pages\": [\n    // EXACT DUPLICATE of linkedin_pages structure above\n    // Required for HTML template compatibility\n    // Must contain identical data, same ordering\n  ]\n}\n```\n\n#### Structure 3: linkedin_accounts (Flat Array Format)\n```json\n{\n  \"linkedin_accounts\": [\n    {\n      \"company_name\": \"[IDENTICAL: Must match linkedin_pages company names]\",\n      \"post_count\": \"[IDENTICAL: Must match linkedin_pages post counts]\", \n      \"posts\": [\n        // IDENTICAL POST OBJECTS as in linkedin_pages\n        // Same structure, same data, same ordering\n      ]\n    }\n    // Continue for all companies from linkedin_pages\n  ]\n}\n```\n\n### 4.4 LinkedIn Activity Intelligence Summary\n```json\n{\n  \"activity_intelligence\": {\n    \"most_active_companies\": \"[REQUIRED: Array of top 3 companies by post volume]\",\n    \"highest_engagement_companies\": \"[REQUIRED: Array of companies with highest engagement]\",\n    \"urgent_hiring_companies\": \"[REQUIRED: Array of companies with immediate tech hiring needs]\",\n    \"emerging_partnerships\": \"[REQUIRED: Array of partnership opportunities mentioned]\",\n    \"technology_trend_mentions\": {\n      \"ai_ml_mentions\": \"[INTEGER: count of AI/ML related posts]\",\n      \"cloud_mentions\": \"[INTEGER: count of cloud-related posts]\",\n      \"devops_mentions\": \"[INTEGER: count of DevOps-related posts]\",\n      \"digitalization_mentions\": \"[INTEGER: count of digital transformation posts]\"\n    }\n  }\n}\n```\n\n### 4.5 Social Engagement Analysis\n```json\n{\n  \"engagement_analysis\": [\n    {\n      \"company_name\": \"[REQUIRED: Company from processed posts]\",\n      \"total_engagement_score\": \"[INTEGER: calculated engagement strength 1-100]\",\n      \"average_post_quality\": \"[REQUIRED: 'High'|'Medium'|'Low']\",\n      \"decision_maker_activity\": \"[REQUIRED: Boolean - C-level engagement detected]\",\n      \"technical_discussion_level\": \"[REQUIRED: 'Deep'|'Surface'|'None']\",\n      \"response_rate_to_comments\": \"[REQUIRED: 'High'|'Medium'|'Low'|'Unknown']\",\n      \"networking_openness\": \"[REQUIRED: 'Very Open'|'Moderately Open'|'Closed']\",\n      \"best_engagement_timeframe\": \"[REQUIRED: Time period when most active]\"\n    }\n  ]\n}\n```\n\n## 5. OPPORTUNITY ASSESSMENT FRAMEWORK\n\n### 5.1 LinkedIn Signal to SONAT Opportunity Mapping\n\n**Hiring Signal Analysis:**\n```json\n{\n  \"hiring_opportunity_assessment\": [\n    {\n      \"company_name\": \"[Company posting tech jobs]\",\n      \"open_positions\": \"[Array of tech roles mentioned]\", \n      \"urgency_level\": \"[Critical|High|Medium - based on language used]\",\n      \"team_growth_rate\": \"[Rapid|Steady|Slow - inferred from multiple posts]\",\n      \"technical_stack_hints\": \"[Array of technologies mentioned]\",\n      \"sonat_intervention_opportunity\": \"[How SONAT can help with hiring/scaling]\",\n      \"estimated_engagement_timeline\": \"[When to reach out]\"\n    }\n  ]\n}\n```\n\n**Growth Signal Analysis:**\n```json\n{\n  \"growth_opportunity_assessment\": [\n    {\n      \"company_name\": \"[Company showing expansion]\",\n      \"growth_indicators\": \"[Array of expansion signals detected]\",\n      \"technical_scaling_challenges\": \"[Inferred tech challenges from posts]\", \n      \"infrastructure_needs\": \"[Cloud, DevOps, Integration needs]\",\n      \"sonat_solution_fit\": \"[How SONAT services address their needs]\",\n      \"competitive_landscape\": \"[Other consultants likely targeting this company]\",\n      \"optimal_approach_strategy\": \"[How SONAT should initiate contact]\"\n    }\n  ]\n}\n```\n\n### 5.2 Social Proof and Credibility Assessment\n```json\n{\n  \"social_credibility\": [\n    {\n      \"company_name\": \"[Company name]\",\n      \"thought_leadership_level\": \"[High|Medium|Low - quality of content shared]\",\n      \"industry_recognition\": \"[Mentions, awards, speaking engagements noted]\",\n      \"peer_engagement\": \"[Quality of companies engaging with their content]\",\n      \"content_authenticity\": \"[Genuine|Corporate|Mixed - authenticity assessment]\", \n      \"influence_network\": \"[Key influencers engaging with company]\",\n      \"reputation_indicators\": \"[Positive/negative sentiment in engagements]\"\n    }\n  ]\n}\n```\n\n## 6. DATA SYNCHRONIZATION VALIDATION\n\n### 6.1 Triple Structure Consistency Checks\n**Critical Validation Requirements:**\n```python\n# All three LinkedIn structures must contain identical data\nassert len(linkedin_pages[0]) == len(linkedin_accounts)\nassert linkedin_pages == linkedin_posts_pages  # Exact duplicates\n\n# Company names must be consistent across structures  \nfor page_company in linkedin_pages[0]:\n    assert page_company[\"company_name\"] in [acc[\"company_name\"] for acc in linkedin_accounts]\n\n# Post counts must match across structures\nfor i, account in enumerate(linkedin_accounts):\n    assert account[\"post_count\"] == len(account[\"posts\"])\n    assert account[\"post_count\"] == linkedin_pages[0][i][\"post_count\"]\n\n# Dashboard metrics must reflect actual data\nassert int(monitored_accounts_count) == len(linkedin_accounts)\nassert int(high_engagement_count) == sum(1 for account in linkedin_accounts \n                                       for post in account[\"posts\"] \n                                       if post[\"priority_class\"] == \"hot\")\n```\n\n### 6.2 Content Quality Validation\n**Post Content Standards:**\n- All post_text fields contain actual LinkedIn content\n- No placeholder text or template content\n- Norwegian language consistency maintained\n- Character limits respected (300 max for posts)\n- URLs properly formatted and functional\n\n**Opportunity Analysis Quality:**\n- All sonat_opportunity fields contain specific, actionable insights\n- Technical complexity assessments realistic for company size\n- Follow-up timelines appropriate for urgency level\n- Competitive risk assessments based on market knowledge\n\n## 7. ERROR HANDLING AND EDGE CASES\n\n### 7.1 Insufficient LinkedIn Data Scenarios\n**Low Post Volume (<3 posts total):**\n- Generate minimum viable triple structure\n- Create realistic synthetic posts based on company analysis  \n- Maintain data consistency across all three structures\n- Use \"Begrænset LinkedIn-aktivitet\" indicators where appropriate\n\n**Missing Engagement Data:**\n- Default to \"Middels\" engagement level\n- Estimate relevance_score based on content analysis only\n- Note \"Engagement data ikke tilgjengelig\" in appropriate fields\n\n### 7.2 Company Identification Issues\n**Ambiguous Company Names:**\n- Use most likely Norwegian company match\n- Add clarifying location/sector information\n- Flag uncertainty in internal_notes fields\n\n**Foreign Company Mentions:**\n- Include only if clear Norwegian operations/relevance\n- Adjust opportunity assessment for local market applicability\n- Note international aspect in company analysis\n\n### 7.3 Content Quality Edge Cases\n**Non-Business Posts:**\n- Skip irrelevant content (personal posts, non-business updates)\n- Focus processing on business-relevant signals only\n- Maintain minimum post count requirements through realistic content\n\n**Low-Quality or Spam Content:**\n- Filter out obvious promotional/spam content\n- Focus on authentic business communications\n- Maintain quality thresholds for inclusion\n\n## 8. EXECUTION SPECIFICATIONS\n\n### 8.1 Processing Algorithm (18-Second Timeline)\n**Phase 1: Input Parsing and Validation (3 seconds)**\n1. Parse LinkedIn input data and extract Y-values\n2. Calculate total_posts_processed \n3. Validate post structure and identify company names\n\n**Phase 2: Content Analysis and Scoring (8 seconds)**\n1. Apply opportunity scoring matrix to each post\n2. Classify priority levels and engagement quality\n3. Generate SONAT-specific opportunity assessments\n4. Map social signals to business opportunities\n\n**Phase 3: Triple Structure Generation (5 seconds)**\n1. Build linkedin_pages nested structure\n2. Create identical linkedin_posts_pages duplicate\n3. Generate flat linkedin_accounts array\n4. Validate consistency across all three structures\n\n**Phase 4: Intelligence Synthesis and Validation (2 seconds)**\n1. Generate dashboard metrics and summaries\n2. Create opportunity assessments and action recommendations\n3. Execute final data consistency validation\n4. Format and validate JSON output\n\n### 8.2 Quality Assurance Checkpoints\n**Data Integrity Gates:**\n- Triple structure consistency verified\n- All required fields populated with meaningful content\n- Company names consistent across all references  \n- Engagement levels and scores within valid ranges\n\n**Business Logic Validation:**\n- Opportunity assessments realistic and specific\n- Technical complexity appropriate for company size\n- Timeline recommendations match urgency indicators\n- SONAT service matches align with identified needs\n\n### 8.3 Success Metrics and KPIs\n- **Processing Completeness**: >95% of input posts successfully analyzed\n- **Opportunity Identification**: >80% of posts generate actionable insights\n- **Structure Consistency**: 100% validation across triple LinkedIn structures\n- **Business Relevance**: All included companies have ≥5 SONAT relevance potential\n\n### 8.4 Output Delivery Protocol\n1. **Comprehensive JSON Structure**: All sections populated per specification\n2. **Triple LinkedIn Validation**: Identical data across all three structures\n3. **No Explanatory Content**: Raw JSON only for Make.com processing\n4. **Immediate Termination**: End processing immediately after final `}`\n\n---\n\n**LINKEDIN INTELLIGENCE PROCESSING INITIATION**: Commence analysis of LinkedIn social signals and company activity data. Generate comprehensive triple-structure JSON output optimized for SONAT opportunity identification and HTML template compatibility."
                    },
                    {
                        "role": "user",
                        "content": "INPUT FRA LINKEDIN:\n{{34.result}}"
                    }
                ],
                "max_tokens": "0",
                "temperature": "1",
                "n_completions": "1",
                "response_format": "json_object",
                "parseJSONResponse": false
            },
            "metadata": {
                "designer": {
                    "x": 2400,
                    "y": 0,
                    "name": "LinkedIn Social Intelligence Processor"
                },
                "restore": {
                    "expect": {
                        "stop": {
                            "mode": "chose"
                        },
                        "model": {
                            "mode": "chose",
                            "label": "gpt-5-nano (system)"
                        },
                        "select": {
                            "label": "Create a Chat Completion (GPT and o1 models)"
                        },
                        "messages": {
                            "mode": "chose",
                            "items": [
                                {
                                    "role": {
                                        "mode": "chose",
                                        "label": "Developer / System"
                                    }
                                },
                                {
                                    "role": {
                                        "mode": "chose",
                                        "label": "User"
                                    }
                                },
                                {
                                    "role": {
                                        "mode": "chose",
                                        "label": "User"
                                    }
                                }
                            ]
                        },
                        "logit_bias": {
                            "mode": "chose"
                        },
                        "tool_choice": {
                            "mode": "chose",
                            "label": "Empty"
                        },
                        "response_format": {
                            "mode": "chose",
                            "label": "JSON Object"
                        },
                        "reasoning_effort": {
                            "mode": "chose",
                            "label": "Empty"
                        },
                        "parseJSONResponse": {
                            "mode": "chose"
                        },
                        "additionalParameters": {
                            "mode": "chose"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "openai-gpt-3"
                            },
                            "label": "AIKI team"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:openai-gpt-3",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "select",
                        "type": "select",
                        "label": "Select Method",
                        "required": true,
                        "validate": {
                            "enum": [
                                "chat",
                                "prompt"
                            ]
                        }
                    },
                    {
                        "name": "temperature",
                        "type": "number",
                        "label": "Temperature",
                        "validate": {
                            "max": 2,
                            "min": 0
                        }
                    },
                    {
                        "name": "top_p",
                        "type": "number",
                        "label": "Top P",
                        "validate": {
                            "max": 1,
                            "min": 0
                        }
                    },
                    {
                        "name": "n_completions",
                        "type": "number",
                        "label": "Number"
                    },
                    {
                        "name": "frequency_penalty",
                        "type": "number",
                        "label": "Frequency Penalty",
                        "validate": {
                            "max": 2,
                            "min": -2
                        }
                    },
                    {
                        "name": "presence_penalty",
                        "type": "number",
                        "label": "Presence Penalty",
                        "validate": {
                            "max": 2,
                            "min": -2
                        }
                    },
                    {
                        "name": "logit_bias",
                        "spec": {
                            "name": "value",
                            "spec": [
                                {
                                    "name": "token",
                                    "type": "text",
                                    "label": "Token ID",
                                    "required": true
                                },
                                {
                                    "name": "probability",
                                    "type": "number",
                                    "label": "Probability",
                                    "required": true,
                                    "validate": {
                                        "max": 100,
                                        "min": -100
                                    }
                                }
                            ],
                            "type": "collection",
                            "label": "Token Probability"
                        },
                        "type": "array",
                        "label": "Token Probability"
                    },
                    {
                        "name": "seed",
                        "type": "integer",
                        "label": "Seed"
                    },
                    {
                        "name": "tool_choice",
                        "type": "select",
                        "label": "Tool Choice",
                        "validate": {
                            "enum": [
                                "none",
                                "auto",
                                "required"
                            ]
                        }
                    },
                    {
                        "name": "stop",
                        "spec": {
                            "name": "value",
                            "type": "text",
                            "label": "Stop Sequence"
                        },
                        "type": "array",
                        "label": "Stop Sequences",
                        "validate": {
                            "maxItems": 4
                        }
                    },
                    {
                        "name": "additionalParameters",
                        "spec": {
                            "name": "value",
                            "spec": [
                                {
                                    "name": "key",
                                    "type": "text",
                                    "label": "Parameter Name",
                                    "required": true
                                },
                                {
                                    "name": "type",
                                    "type": "select",
                                    "label": "Input Type",
                                    "options": [
                                        {
                                            "label": "Text",
                                            "value": "text",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "text",
                                                    "label": "Parameter Value"
                                                }
                                            ],
                                            "default": true
                                        },
                                        {
                                            "label": "Number",
                                            "value": "number",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "number",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Boolean",
                                            "value": "boolean",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "boolean",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Date",
                                            "value": "date",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "date",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Any",
                                            "value": "any",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "any",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "type": "collection",
                            "label": "Input Parameter"
                        },
                        "type": "array",
                        "label": "Other Input Parameters"
                    },
                    {
                        "name": "model",
                        "type": "select",
                        "label": "Model",
                        "required": true
                    },
                    {
                        "name": "max_tokens",
                        "type": "uinteger",
                        "label": "Max Completion Tokens"
                    },
                    {
                        "name": "messages",
                        "spec": {
                            "name": "value",
                            "spec": [
                                {
                                    "name": "role",
                                    "type": "select",
                                    "label": "Role",
                                    "options": {
                                        "store": [
                                            {
                                                "label": "User",
                                                "value": "user",
                                                "nested": [
                                                    {
                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "Text Content"
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "Assistant",
                                                "value": "assistant",
                                                "nested": [
                                                    {
                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "Text Content"
                                                    },
                                                    {
                                                        "mode": "edit",
                                                        "name": "tool_calls",
                                                        "spec": {
                                                            "spec": [
                                                                {
                                                                    "name": "type",
                                                                    "type": "hidden",
                                                                    "default": "function"
                                                                },
                                                                {
                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                    "name": "id",
                                                                    "type": "text",
                                                                    "label": "Tool call ID"
                                                                },
                                                                {
                                                                    "name": "function",
                                                                    "spec": [
                                                                        {
                                                                            "help": "The name of the function previously called.",
                                                                            "name": "name",
                                                                            "type": "text",
                                                                            "label": "Name",
                                                                            "required": true
                                                                        },
                                                                        {
                                                                            "help": "The arguments previously output by the AI.",
                                                                            "name": "arguments",
                                                                            "type": "text",
                                                                            "label": "Arguments",
                                                                            "required": true
                                                                        }
                                                                    ],
                                                                    "type": "collection",
                                                                    "label": "Function"
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Tool Call"
                                                        },
                                                        "type": "array",
                                                        "label": "Tool Calls",
                                                        "labels": {
                                                            "add": "Add tool call"
                                                        },
                                                        "mappable": {
                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "Developer / System",
                                                "value": "system",
                                                "nested": [
                                                    {
                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "Text Content"
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "Tool",
                                                "value": "tool",
                                                "nested": [
                                                    {
                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "Text Content",
                                                        "required": true
                                                    },
                                                    {
                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                        "name": "tool_call_id",
                                                        "type": "text",
                                                        "label": "Tool Call ID.",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    "required": true
                                }
                            ],
                            "type": "collection",
                            "label": "Message"
                        },
                        "type": "array",
                        "label": "Messages",
                        "required": true
                    },
                    {
                        "name": "response_format",
                        "type": "select",
                        "label": "Response Format",
                        "validate": {
                            "enum": [
                                "text",
                                "json_object"
                            ]
                        }
                    },
                    {
                        "name": "reasoning_effort",
                        "type": "select",
                        "label": "Reasoning Effort",
                        "validate": {
                            "enum": [
                                "minimal",
                                "low",
                                "medium",
                                "high"
                            ]
                        }
                    },
                    {
                        "name": "parseJSONResponse",
                        "type": "boolean",
                        "label": "Parse JSON Response",
                        "required": true
                    }
                ],
                "interface": [
                    {
                        "name": "result",
                        "type": "any",
                        "label": "Result"
                    },
                    {
                        "name": "id",
                        "type": "text",
                        "label": "ID"
                    },
                    {
                        "name": "object",
                        "type": "text",
                        "label": "Object"
                    },
                    {
                        "name": "created",
                        "type": "date",
                        "label": "Created"
                    },
                    {
                        "name": "model",
                        "type": "text",
                        "label": "Model"
                    },
                    {
                        "name": "choices",
                        "spec": [
                            {
                                "name": "text",
                                "type": "text",
                                "label": "Text"
                            },
                            {
                                "name": "index",
                                "type": "number",
                                "label": "Index"
                            },
                            {
                                "name": "logprobs",
                                "type": "text",
                                "label": "Log Probs"
                            },
                            {
                                "name": "finish_reason",
                                "type": "text",
                                "label": "Finish Reason"
                            },
                            {
                                "name": "message",
                                "spec": [
                                    {
                                        "name": "role",
                                        "type": "text",
                                        "label": "Role"
                                    },
                                    {
                                        "name": "content",
                                        "type": "text",
                                        "label": "Content"
                                    },
                                    {
                                        "name": "tool_calls",
                                        "spec": [
                                            {
                                                "name": "id",
                                                "type": "text",
                                                "label": "ID"
                                            },
                                            {
                                                "name": "type",
                                                "type": "text",
                                                "label": "Type"
                                            },
                                            {
                                                "name": "function",
                                                "spec": [
                                                    {
                                                        "name": "name",
                                                        "type": "text",
                                                        "label": "Name"
                                                    },
                                                    {
                                                        "name": "arguments",
                                                        "type": "text",
                                                        "label": "Arguments"
                                                    }
                                                ],
                                                "type": "collection",
                                                "label": "Function"
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Tool Calls"
                                    },
                                    {
                                        "name": "refusal",
                                        "type": "text",
                                        "label": "Refusal"
                                    },
                                    {
                                        "name": "annotations",
                                        "spec": [
                                            {
                                                "name": "type",
                                                "type": "text",
                                                "label": "Type"
                                            },
                                            {
                                                "name": "url_citation",
                                                "spec": [
                                                    {
                                                        "name": "end_index",
                                                        "type": "number",
                                                        "label": "End Index"
                                                    },
                                                    {
                                                        "name": "start_index",
                                                        "type": "number",
                                                        "label": "Start Index"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text",
                                                        "label": "Title"
                                                    },
                                                    {
                                                        "name": "url",
                                                        "type": "text",
                                                        "label": "URL"
                                                    }
                                                ],
                                                "type": "collection",
                                                "label": "URL Citation"
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Annotations"
                                    }
                                ],
                                "type": "collection",
                                "label": "Message"
                            }
                        ],
                        "type": "array",
                        "label": "Choices"
                    },
                    {
                        "name": "usage",
                        "spec": [
                            {
                                "name": "prompt_tokens",
                                "type": "number",
                                "label": "Prompt Tokens"
                            },
                            {
                                "name": "completion_tokens",
                                "type": "text",
                                "label": "Completion Tokens"
                            },
                            {
                                "name": "total_tokens",
                                "type": "number",
                                "label": "Total Tokens"
                            },
                            {
                                "name": "prompt_tokens_details",
                                "spec": [
                                    {
                                        "name": "cached_tokens",
                                        "type": "uinteger",
                                        "label": "Cached Tokens"
                                    },
                                    {
                                        "name": "text_tokens",
                                        "type": "uinteger",
                                        "label": "Text Tokens"
                                    },
                                    {
                                        "name": "image_tokens",
                                        "type": "uinteger",
                                        "label": "Image Tokens"
                                    },
                                    {
                                        "name": "audio_tokens",
                                        "type": "uinteger",
                                        "label": "Audio Tokens"
                                    }
                                ],
                                "type": "collection",
                                "label": "Prompt Tokens Details"
                            },
                            {
                                "name": "completion_tokens_details",
                                "spec": [
                                    {
                                        "name": "reasoning_tokens",
                                        "type": "uinteger",
                                        "label": "Reasoning Tokens"
                                    },
                                    {
                                        "name": "text_tokens",
                                        "type": "uinteger",
                                        "label": "Text Tokens"
                                    },
                                    {
                                        "name": "audio_tokens",
                                        "type": "uinteger",
                                        "label": "Audio Tokens"
                                    },
                                    {
                                        "name": "accepted_prediction_tokens",
                                        "type": "uinteger",
                                        "label": "Accepted Prediction Tokens"
                                    },
                                    {
                                        "name": "rejected_prediction_tokens",
                                        "type": "uinteger",
                                        "label": "Rejected Prediction Tokens"
                                    }
                                ],
                                "type": "collection",
                                "label": "Completion Tokens Details"
                            }
                        ],
                        "type": "collection",
                        "label": "Usage"
                    },
                    {
                        "name": "service_tier",
                        "type": "text",
                        "label": "Service Tier"
                    },
                    {
                        "name": "system_fingerprint",
                        "type": "text",
                        "label": "System Fingerprint"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 30,
            "module": "openai-gpt-3:CreateCompletion",
            "version": 1,
            "parameters": {
                "__IMTCONN__": 7361319
            },
            "mapper": {
                "select": "chat",
                "temperature": "1",
                "top_p": "1",
                "n_completions": "1",
                "model": "gpt-5-nano",
                "max_tokens": "0",
                "messages": [
                    {
                        "role": "system",
                        "content": "Du er en JSON Intelligence Merger for SONAT Consulting som kombinerer separate news- og LinkedIn-intelligence outputs til en komplett Market Watch-rapport"
                    },
                    {
                        "role": "user",
                        "content": "Du er en AI-assistent som genererer Market Watch JSON-rapporter for SONAT Consulting. AIKI leverer disse ukentlige markedsrapportene hver fredag.\r\n\r\n## OPPGAVE\r\nGenerer en komplett JSON-rapport som identifiserer 8-16 norske bedrifter med teknologi-investeringsbehov. MINIMUM 4 kritiske leads, resten kvalifiserte. Alle kan være kritiske om det finnes nok høy-prioritets bedrifter.\r\n\r\n**KRITISK: Du må lage KOMPLETTE ARRAYS med ALLE relevante saker:**\r\n- critical_companies: 4-16 bedrifter (minimum 4, kan være alle 16 om de er kritiske nok)\r\n- qualified_companies: Fyller ut til totalt 8-16 bedrifter (kun hvis ikke alle er kritiske)\r\n- linkedin_posts_pages: Eksakt 12 LinkedIn-poster (flatt array)\r\n- linkedin_pages: Samme 12 poster gruppert per bedrift (nested arrays)\r\n- linkedin_accounts: Samme 12 poster strukturert per bedrift\r\n- key_findings: 2-3 hovedfunn\r\n- top_opportunities: 3 beste muligheter\r\n- strategic_recommendations: 3-5 anbefalinger\r\n- action_items: 5-7 konkrete handlinger\r\n- weekly_actions: 7 dager med handlingsplan\r\n\r\n## KRITISKE KRAV\r\n- ALL tekst på norsk (unntatt tekniske tags)\r\n- KUN gyldig JSON i output - ingen forklaringer\r\n- ALLE critical_companies felt MÅ være utfylt\r\n- Minimum relevance_score > 6 for alle bedrifter\r\n- Email, telefon og CEO-navn PÅKREVD for kritiske bedrifter\r\n- LinkedIn: maksimalt 12 innlegg (3 sider à 4 innlegg)\r\n\r\n## SONAT FOKUS\r\nBedrifter som trenger: digitalisering, AI/ML, VR/AR, cloud-migration, DevOps, systemutvikling, teknologirådgivning\r\n\r\n## JSON STRUKTUR\r\n```json\r\n{\r\n  \"report_generated\": \"DD. måned YYYY\",\r\n  \"total_pages\": 12,\r\n  \"total_companies\": 16,\r\n  \"leads\": 16,\r\n  \"high_priority_leads\": 8,\r\n  \r\n  \"banner_text\": \"Denne uken identifiserte vi [X] aktive bedrifter i det norske markedet, hvorav [Y] representerer umiddelbare salgsmuligheter. Disse bedrfitene kommer fra [bransje]\",\r\n  \"critical_section_title\": \"Kritiske leads - Umiddelbar kontakt\",\r\n  \"critical_section_badge\": \"Høy prioritet\",\r\n  \r\n     \"key_findings\": [\r\n     {\r\n       \"_EKSEMPEL\": \"LAG 2-3 KOMPLETTE HOVEDFUNN - ikke bare 1\",\r\n       \"number\": 1,\r\n       \"priority_class\": \"critical\",\r\n       \"text\": \"Konkret markedsfunn med forretningsverdi for SONAT (150-300 tegn)\"\r\n     },\r\n     {\r\n       \"number\": 2,\r\n       \"priority_class\": \"high\",\r\n       \"text\": \"Andre viktige funn...\"\r\n     }\r\n   ],\r\n  \r\n  \"critical_companies\": [\r\n    {\r\n      \"name\": \"Bedriftsnavn AS\",\r\n      \"website_url\": \"https://bedrift.no\",\r\n      \"sector\": \"OLJE & GASS\",\r\n      \"employee_count\": 250,\r\n      \"location\": \"Stavanger\",\r\n      \"priority_score\": 9,\r\n      \"event_type\": \"FUNDING\",\r\n      \"event_description\": \"Detaljert beskrivelse av hendelsen som skaper salgsmulighet (200-400 tegn)\",\r\n      \"ceo_name\": \"Fornavn Etternavn\",\r\n      \"email\": \"kontakt@bedrift.no\",\r\n      \"phone\": \"+47 12 34 56 78\",\r\n      \"funding_amount_nok\": \"150M NOK\",\r\n      \"funding_round\": \"Series B\",\r\n      \"technical_needs\": \"Sammendrag av tekniske behov SONAT kan løse (150-300 tegn)\",\r\n      \"technical_needs_list\": [\r\n        \"Cloud migration\",\r\n        \"AI/ML implementering\",\r\n        \"DevOps automatisering\"\r\n      ],\r\n      \"growth_indicators_list\": [\r\n        \"50% økning i ansatte\",\r\n        \"Ny teknologiavdeling\",\r\n        \"Internasjonal ekspansjon\"\r\n      ],\r\n      \"source_name\": \"E24\",\r\n      \"source_url\": \"https://e24.no/artikkel\",\r\n      \"sonat_relevance\": \"Hvorfor denne bedriften er perfekt match for SONAT (150-250 tegn)\",\r\n      \"relevance_tags\": [\r\n        \"Cloud Migration\",\r\n        \"AI Strategy\",\r\n        \"Enterprise DevOps\"\r\n      ]\r\n    }\r\n     ],\r\n   \r\n   \"qualified_companies\": [\r\n     {\r\n       \"_EKSEMPEL\": \"LAG 4-12 KOMPLETTE BEDRIFTER HER - ikke bare 1 eksempel\",\r\n       \"name\": \"Kvalifisert Bedrift AS\",\r\n       \"website_url\": \"https://kvalifisert.no\",\r\n       \"sector\": \"TEKNOLOGI\",\r\n       \"employee_count\": 150,\r\n       \"location\": \"Oslo\",\r\n       \"event_type\": \"EKSPANSJON\",\r\n       \"event_description\": \"Kort beskrivelse av muligheten\",\r\n       \"technical_needs\": \"Tekniske behov sammendrag\",\r\n       \"sonat_opportunity\": \"Konkret forslag til hvordan SONAT kan hjelpe (100-200 tegn)\"\r\n     }\r\n   ],\r\n  \r\n  \"monitored_accounts_count\": \"12\",\r\n  \"high_engagement_count\": \"8\", \r\n  \"hiring_signals_count\": \"5\",\r\n  \"networking_events_count\": \"3\",\r\n  \r\n     \"linkedin_posts_pages\": [\r\n     {\r\n       \"_EKSEMPEL\": \"LAG EKSAKT 12 LINKEDIN-POSTER HER - ikke bare 1 eksempel\",\r\n       \"company_name\": \"Bedrift AS\",\r\n       \"post_date\": \"2024-01-15\",\r\n       \"engagement_level\": \"Høy\",\r\n       \"priority_class\": \"hot\",\r\n       \"relevance_score\": 8,\r\n       \"post_text\": \"Originalt LinkedIn-innlegg tekst...\",\r\n       \"post_url\": \"https://linkedin.com/posts/...\",\r\n       \"sonat_opportunity\": \"Konkret salgsmulighet basert på posten (100-200 tegn)\",\r\n       \"opportunity_tags\": [\"AI/ML\", \"Digital Transform\"],\r\n       \"engagement_score\": 150\r\n     }\r\n   ],\r\n  \r\n  \"total_posts\": 12,\r\n  \r\n  \"linkedin_pages\": [\r\n    [\r\n      {\r\n        \"company_name\": \"Bedrift AS\",\r\n        \"post_count\": 2,\r\n        \"posts\": [\r\n          {\r\n            \"post_date\": \"2024-01-15\",\r\n            \"engagement_level\": \"Høy\",\r\n            \"priority_class\": \"hot\", \r\n            \"relevance_score\": 8,\r\n            \"post_text\": \"Identisk data som linkedin_posts_pages\",\r\n            \"post_url\": \"https://linkedin.com/posts/...\",\r\n            \"sonat_opportunity\": \"Samme tekst som over\",\r\n            \"opportunity_tags\": [\"AI/ML\", \"Digital Transform\"]\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  ],\r\n  \r\n  \"linkedin_accounts\": [\r\n    {\r\n      \"company_name\": \"Bedrift AS\",\r\n      \"post_count\": 2,\r\n      \"posts\": [\r\n        {\r\n          \"post_date\": \"2024-01-15\",\r\n          \"engagement_level\": \"Høy\",\r\n          \"priority_class\": \"hot\",\r\n          \"relevance_score\": 8,\r\n          \"post_text\": \"Identisk data som linkedin_posts_pages\",\r\n          \"post_url\": \"https://linkedin.com/posts/...\",\r\n          \"sonat_opportunity\": \"Samme tekst\",\r\n          \"opportunity_tags\": [\"AI/ML\", \"Digital Transform\"]\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  \r\n  \"top_opportunities_title\": \"TOPP 3 MULIGHETER DENNE UKEN\",\r\n     \"top_opportunities\": [\r\n     {\r\n       \"_EKSEMPEL\": \"LAG EKSAKT 3 TOPP-MULIGHETER - ikke bare 1\",\r\n       \"number\": 1,\r\n       \"company_name\": \"Største Mulighet AS\",\r\n       \"potential_value\": \"Enterprise AI/ML transformasjon - 8-20M NOK potensial\",\r\n       \"recommended_action\": \"Ring CEO [Navn] på [telefon] innen 48 timer - de evaluerer leverandører nå\",\r\n       \"priority_level\": \"critical\",\r\n       \"urgency_indicator\": \"RING NÅ\"\r\n     },\r\n     {\r\n       \"number\": 2,\r\n       \"company_name\": \"Andre Mulighet AS\",\r\n       \"potential_value\": \"Cloud migration prosjekt...\",\r\n       \"recommended_action\": \"Kontakt CTO...\",\r\n       \"priority_level\": \"high\",\r\n       \"urgency_indicator\": \"DENNE UKE\"\r\n     }\r\n   ],\r\n  \r\n     \"strategic_recommendations\": [\r\n     {\r\n       \"_EKSEMPEL\": \"LAG 3-5 STRATEGISKE ANBEFALINGER - ikke bare 1\",\r\n       \"title\": \"Fokuser på AI/ML markedet\",\r\n       \"content\": \"Økt etterspørsel etter AI-løsninger - SONAT bør prioritere AI/ML kompetanse (150-300 tegn)\"\r\n     },\r\n     {\r\n       \"title\": \"Styrk cloud-ekspertise\",\r\n       \"content\": \"Mange bedrifter migrerer til sky...\"\r\n     }\r\n   ],\r\n  \r\n     \"action_items\": [\r\n     {\r\n       \"_EKSEMPEL\": \"LAG 5-7 KONKRETE HANDLINGSOPPGAVER - ikke bare 1\",\r\n       \"number\": 1,\r\n       \"priority\": \"critical\",\r\n       \"timeline\": \"Denne uken\",\r\n       \"action\": \"Kontakt [Bedrift] ang. AI-strategi - CEO [Navn]: [email] / [telefon] (100-200 tegn)\"\r\n     },\r\n     {\r\n       \"number\": 2,\r\n       \"priority\": \"high\",\r\n       \"timeline\": \"Neste uke\",\r\n       \"action\": \"Oppfølging med [Annen Bedrift]...\"\r\n     }\r\n   ],\r\n  \r\n     \"weekly_actions\": [\r\n     {\r\n       \"_EKSEMPEL\": \"LAG ALLE 7 DAGER I UKEN - ikke bare 1 dag\",\r\n       \"day_number\": 1,\r\n       \"day_label\": \"MANDAG\",\r\n       \"action_description\": \"Prioriterte oppfølginger etter helgen\",\r\n       \"target_companies\": \"3 kritiske leads\"\r\n     },\r\n     {\r\n       \"day_number\": 2,\r\n       \"day_label\": \"TIRSDAG\",\r\n       \"action_description\": \"Oppfølging av LinkedIn-signaler\",\r\n       \"target_companies\": \"2 kvalifiserte leads\"\r\n     },\r\n     {\r\n       \"day_number\": 3,\r\n       \"day_label\": \"ONSDAG\",\r\n       \"action_description\": \"Møter og presentasjoner\",\r\n       \"target_companies\": \"1 kritisk lead\"\r\n     }\r\n   ]\r\n}\r\n```\r\n\r\n## DATAKILDER å BRUKE\r\n- E24, Dagens Næringsliv, TU.no for nyheter\r\n- LinkedIn for company posts og hiring signals  \r\n- Proff.no, Foretaksregisteret for firmainfo\r\n- Funding-announcements, M&A, ekspansjoner, IPOer\r\n- Tech conference speakers, jobbannonsers\r\n\r\n## SEKTORER å PRIORITERE\r\n1. Olje & Gass (digitalisering, automatisering)\r\n2. Finans (AI, cybersikkerhet, compliance)\r\n3. Media & Teknologi (cloud, streaming, AI)\r\n4. Industri (IoT, automatisering)\r\n5. Energi (smart grid, bærekraft)\r\n6. Transport & Logistikk (optimalisering)\r\n\r\n## VIKTIG: KOMPLETT DATASTRUKTUR\r\n**Du må levere FULLSTENDIGE arrays - ikke bare eksempler!**\r\n\r\n- Hvis du skal levere 12 LinkedIn-poster, lag EKSAKT 12 poster med unike, realistiske data\r\n- Hvis du skal levere 8 bedrifter, lag EKSAKT 8 komplette bedriftsprofiler\r\n- Hvis du skal levere 7 dagers handlingsplan, lag ALLE 7 dager\r\n- Ikke legg til \"_EKSEMPEL\" felt i den faktiske JSON-en du leverer\r\n\r\n**IDENTISKE DATA-KRAV:**\r\nlinkedin_posts_pages, linkedin_pages og linkedin_accounts må inneholde NØYAKTIG samme data, bare strukturert forskjellig. Dette er kritisk for HTML-templatet.\r\n\r\nGenerer nå en komplett JSON-rapport med ekte norske bedrifter og deres faktiske teknologibehov. Fokuser på bedrifter som NETTOPP har hatt hendelser som indikerer investeringsbehov.\r\n​"
                    },
                    {
                        "role": "user",
                        "content": "input nyhet:\n{{23.textResponse}}\n\ninput linkedin:\n{{31.result}}"
                    }
                ],
                "response_format": "json_object",
                "parseJSONResponse": false
            },
            "metadata": {
                "designer": {
                    "x": 2700,
                    "y": 0,
                    "name": "json Merger"
                },
                "restore": {
                    "parameters": {
                        "__IMTCONN__": {
                            "label": "AIKI team",
                            "data": {
                                "scoped": "true",
                                "connection": "openai-gpt-3"
                            }
                        }
                    },
                    "expect": {
                        "select": {
                            "label": "Create a Chat Completion (GPT and o1 models)"
                        },
                        "logit_bias": {
                            "mode": "chose"
                        },
                        "tool_choice": {
                            "mode": "chose",
                            "label": "Empty"
                        },
                        "stop": {
                            "mode": "chose"
                        },
                        "additionalParameters": {
                            "mode": "chose"
                        },
                        "model": {
                            "mode": "chose",
                            "label": "gpt-5-nano (system)"
                        },
                        "messages": {
                            "mode": "chose",
                            "items": [
                                {
                                    "role": {
                                        "mode": "chose",
                                        "label": "Developer / System"
                                    }
                                },
                                {
                                    "role": {
                                        "mode": "chose",
                                        "label": "User"
                                    }
                                },
                                {
                                    "role": {
                                        "mode": "chose",
                                        "label": "User"
                                    }
                                }
                            ]
                        },
                        "response_format": {
                            "mode": "chose",
                            "label": "JSON Object"
                        },
                        "reasoning_effort": {
                            "mode": "chose",
                            "label": "Empty"
                        },
                        "parseJSONResponse": {
                            "mode": "chose"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:openai-gpt-3",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "select",
                        "type": "select",
                        "label": "Select Method",
                        "required": true,
                        "validate": {
                            "enum": [
                                "chat",
                                "prompt"
                            ]
                        }
                    },
                    {
                        "name": "temperature",
                        "type": "number",
                        "label": "Temperature",
                        "validate": {
                            "max": 2,
                            "min": 0
                        }
                    },
                    {
                        "name": "top_p",
                        "type": "number",
                        "label": "Top P",
                        "validate": {
                            "max": 1,
                            "min": 0
                        }
                    },
                    {
                        "name": "n_completions",
                        "type": "number",
                        "label": "Number"
                    },
                    {
                        "name": "frequency_penalty",
                        "type": "number",
                        "label": "Frequency Penalty",
                        "validate": {
                            "max": 2,
                            "min": -2
                        }
                    },
                    {
                        "name": "presence_penalty",
                        "type": "number",
                        "label": "Presence Penalty",
                        "validate": {
                            "max": 2,
                            "min": -2
                        }
                    },
                    {
                        "name": "logit_bias",
                        "type": "array",
                        "label": "Token Probability",
                        "spec": {
                            "spec": [
                                {
                                    "name": "token",
                                    "type": "text",
                                    "label": "Token ID",
                                    "required": true
                                },
                                {
                                    "name": "probability",
                                    "type": "number",
                                    "label": "Probability",
                                    "required": true,
                                    "validate": {
                                        "max": 100,
                                        "min": -100
                                    }
                                }
                            ],
                            "type": "collection",
                            "label": "Token Probability",
                            "name": "value"
                        }
                    },
                    {
                        "name": "seed",
                        "type": "integer",
                        "label": "Seed"
                    },
                    {
                        "name": "tool_choice",
                        "type": "select",
                        "label": "Tool Choice",
                        "validate": {
                            "enum": [
                                "none",
                                "auto",
                                "required"
                            ]
                        }
                    },
                    {
                        "name": "stop",
                        "type": "array",
                        "label": "Stop Sequences",
                        "validate": {
                            "maxItems": 4
                        },
                        "spec": {
                            "type": "text",
                            "label": "Stop Sequence",
                            "name": "value"
                        }
                    },
                    {
                        "name": "additionalParameters",
                        "type": "array",
                        "label": "Other Input Parameters",
                        "spec": {
                            "spec": [
                                {
                                    "name": "key",
                                    "type": "text",
                                    "label": "Parameter Name",
                                    "required": true
                                },
                                {
                                    "name": "type",
                                    "type": "select",
                                    "label": "Input Type",
                                    "options": [
                                        {
                                            "label": "Text",
                                            "value": "text",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "text",
                                                    "label": "Parameter Value"
                                                }
                                            ],
                                            "default": true
                                        },
                                        {
                                            "label": "Number",
                                            "value": "number",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "number",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Boolean",
                                            "value": "boolean",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "boolean",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Date",
                                            "value": "date",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "date",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Any",
                                            "value": "any",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "any",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "type": "collection",
                            "label": "Input Parameter",
                            "name": "value"
                        }
                    },
                    {
                        "name": "model",
                        "type": "select",
                        "label": "Model",
                        "required": true
                    },
                    {
                        "name": "max_tokens",
                        "type": "uinteger",
                        "label": "Max Completion Tokens"
                    },
                    {
                        "name": "messages",
                        "type": "array",
                        "label": "Messages",
                        "required": true,
                        "spec": {
                            "label": "Message",
                            "type": "collection",
                            "spec": [
                                {
                                    "name": "role",
                                    "type": "select",
                                    "label": "Role",
                                    "required": true,
                                    "options": {
                                        "store": [
                                            {
                                                "label": "User",
                                                "value": "user",
                                                "nested": [
                                                    {
                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "Text Content"
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "Assistant",
                                                "value": "assistant",
                                                "nested": [
                                                    {
                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "Text Content"
                                                    },
                                                    {
                                                        "name": "tool_calls",
                                                        "label": "Tool Calls",
                                                        "type": "array",
                                                        "labels": {
                                                            "add": "Add tool call"
                                                        },
                                                        "mode": "edit",
                                                        "mappable": {
                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                        },
                                                        "spec": {
                                                            "label": "Tool Call",
                                                            "type": "collection",
                                                            "spec": [
                                                                {
                                                                    "name": "type",
                                                                    "type": "hidden",
                                                                    "default": "function"
                                                                },
                                                                {
                                                                    "name": "id",
                                                                    "type": "text",
                                                                    "label": "Tool call ID",
                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`."
                                                                },
                                                                {
                                                                    "name": "function",
                                                                    "type": "collection",
                                                                    "label": "Function",
                                                                    "spec": [
                                                                        {
                                                                            "name": "name",
                                                                            "label": "Name",
                                                                            "type": "text",
                                                                            "required": true,
                                                                            "help": "The name of the function previously called."
                                                                        },
                                                                        {
                                                                            "name": "arguments",
                                                                            "label": "Arguments",
                                                                            "type": "text",
                                                                            "required": true,
                                                                            "help": "The arguments previously output by the AI."
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "Developer / System",
                                                "nested": [
                                                    {
                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "Text Content"
                                                    }
                                                ],
                                                "value": "system"
                                            },
                                            {
                                                "label": "Tool",
                                                "value": "tool",
                                                "nested": [
                                                    {
                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "Text Content",
                                                        "required": true
                                                    },
                                                    {
                                                        "label": "Tool Call ID.",
                                                        "name": "tool_call_id",
                                                        "type": "text",
                                                        "required": true,
                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`."
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                }
                            ],
                            "name": "value"
                        }
                    },
                    {
                        "name": "response_format",
                        "type": "select",
                        "label": "Response Format",
                        "validate": {
                            "enum": [
                                "text",
                                "json_object"
                            ]
                        }
                    },
                    {
                        "name": "reasoning_effort",
                        "type": "select",
                        "label": "Reasoning Effort",
                        "validate": {
                            "enum": [
                                "minimal",
                                "low",
                                "medium",
                                "high"
                            ]
                        }
                    },
                    {
                        "name": "parseJSONResponse",
                        "type": "boolean",
                        "label": "Parse JSON Response",
                        "required": true
                    }
                ],
                "interface": [
                    {
                        "name": "result",
                        "type": "any",
                        "label": "Result"
                    },
                    {
                        "name": "id",
                        "type": "text",
                        "label": "ID"
                    },
                    {
                        "name": "object",
                        "type": "text",
                        "label": "Object"
                    },
                    {
                        "name": "created",
                        "type": "date",
                        "label": "Created"
                    },
                    {
                        "name": "model",
                        "type": "text",
                        "label": "Model"
                    },
                    {
                        "name": "choices",
                        "spec": [
                            {
                                "name": "text",
                                "type": "text",
                                "label": "Text"
                            },
                            {
                                "name": "index",
                                "type": "number",
                                "label": "Index"
                            },
                            {
                                "name": "logprobs",
                                "type": "text",
                                "label": "Log Probs"
                            },
                            {
                                "name": "finish_reason",
                                "type": "text",
                                "label": "Finish Reason"
                            },
                            {
                                "name": "message",
                                "spec": [
                                    {
                                        "name": "role",
                                        "type": "text",
                                        "label": "Role"
                                    },
                                    {
                                        "name": "content",
                                        "type": "text",
                                        "label": "Content"
                                    },
                                    {
                                        "name": "tool_calls",
                                        "spec": [
                                            {
                                                "name": "id",
                                                "type": "text",
                                                "label": "ID"
                                            },
                                            {
                                                "name": "type",
                                                "type": "text",
                                                "label": "Type"
                                            },
                                            {
                                                "name": "function",
                                                "spec": [
                                                    {
                                                        "name": "name",
                                                        "type": "text",
                                                        "label": "Name"
                                                    },
                                                    {
                                                        "name": "arguments",
                                                        "type": "text",
                                                        "label": "Arguments"
                                                    }
                                                ],
                                                "type": "collection",
                                                "label": "Function"
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Tool Calls"
                                    },
                                    {
                                        "name": "refusal",
                                        "type": "text",
                                        "label": "Refusal"
                                    },
                                    {
                                        "name": "annotations",
                                        "spec": [
                                            {
                                                "name": "type",
                                                "type": "text",
                                                "label": "Type"
                                            },
                                            {
                                                "name": "url_citation",
                                                "spec": [
                                                    {
                                                        "name": "end_index",
                                                        "type": "number",
                                                        "label": "End Index"
                                                    },
                                                    {
                                                        "name": "start_index",
                                                        "type": "number",
                                                        "label": "Start Index"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text",
                                                        "label": "Title"
                                                    },
                                                    {
                                                        "name": "url",
                                                        "type": "text",
                                                        "label": "URL"
                                                    }
                                                ],
                                                "type": "collection",
                                                "label": "URL Citation"
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Annotations"
                                    }
                                ],
                                "type": "collection",
                                "label": "Message"
                            }
                        ],
                        "type": "array",
                        "label": "Choices"
                    },
                    {
                        "name": "usage",
                        "spec": [
                            {
                                "name": "prompt_tokens",
                                "type": "number",
                                "label": "Prompt Tokens"
                            },
                            {
                                "name": "completion_tokens",
                                "type": "text",
                                "label": "Completion Tokens"
                            },
                            {
                                "name": "total_tokens",
                                "type": "number",
                                "label": "Total Tokens"
                            },
                            {
                                "name": "prompt_tokens_details",
                                "spec": [
                                    {
                                        "name": "cached_tokens",
                                        "type": "uinteger",
                                        "label": "Cached Tokens"
                                    },
                                    {
                                        "name": "text_tokens",
                                        "type": "uinteger",
                                        "label": "Text Tokens"
                                    },
                                    {
                                        "name": "image_tokens",
                                        "type": "uinteger",
                                        "label": "Image Tokens"
                                    },
                                    {
                                        "name": "audio_tokens",
                                        "type": "uinteger",
                                        "label": "Audio Tokens"
                                    }
                                ],
                                "type": "collection",
                                "label": "Prompt Tokens Details"
                            },
                            {
                                "name": "completion_tokens_details",
                                "spec": [
                                    {
                                        "name": "reasoning_tokens",
                                        "type": "uinteger",
                                        "label": "Reasoning Tokens"
                                    },
                                    {
                                        "name": "text_tokens",
                                        "type": "uinteger",
                                        "label": "Text Tokens"
                                    },
                                    {
                                        "name": "audio_tokens",
                                        "type": "uinteger",
                                        "label": "Audio Tokens"
                                    },
                                    {
                                        "name": "accepted_prediction_tokens",
                                        "type": "uinteger",
                                        "label": "Accepted Prediction Tokens"
                                    },
                                    {
                                        "name": "rejected_prediction_tokens",
                                        "type": "uinteger",
                                        "label": "Rejected Prediction Tokens"
                                    }
                                ],
                                "type": "collection",
                                "label": "Completion Tokens Details"
                            }
                        ],
                        "type": "collection",
                        "label": "Usage"
                    },
                    {
                        "name": "service_tier",
                        "type": "text",
                        "label": "Service Tier"
                    },
                    {
                        "name": "system_fingerprint",
                        "type": "text",
                        "label": "System Fingerprint"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 15,
            "module": "pdf-co:HTMLtoPDF",
            "version": 1,
            "parameters": {
                "__IMTCONN__": 3197717
            },
            "mapper": {
                "name": "Market watch {{now}}",
                "async": 15000,
                "export": {
                    "exportType": "downloadFile"
                },
                "convert": {
                    "templateId": "10429",
                    "convertType": "fromHtmlTemplate",
                    "templateData": "{{30.result}}"
                },
                "paperSize": "a4",
                "expiration": "60",
                "orientation": "portrait",
                "printBackground": true,
                "doNotWaitFullLoad": false
            },
            "metadata": {
                "designer": {
                    "x": 3000,
                    "y": 0,
                    "name": "Template"
                },
                "restore": {
                    "expect": {
                        "async": {
                            "mode": "chose",
                            "label": "Async"
                        },
                        "export": {
                            "nested": {
                                "exportType": {
                                    "label": "Download a File"
                                }
                            }
                        },
                        "convert": {
                            "nested": {
                                "convertType": {
                                    "label": "HTML Template to PDF"
                                }
                            }
                        },
                        "paperSize": {
                            "label": "A4"
                        },
                        "orientation": {
                            "label": "Portrait"
                        },
                        "printBackground": {
                            "mode": "chose"
                        },
                        "doNotWaitFullLoad": {
                            "mode": "chose"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "pdf-co"
                            },
                            "label": "Amund PDF.co"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:pdf-co",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "convert",
                        "spec": [
                            {
                                "name": "convertType",
                                "type": "select",
                                "label": "Convert Type",
                                "required": true,
                                "validate": {
                                    "enum": [
                                        "fromHtml",
                                        "fromHtmlTemplate",
                                        "fromWebsite"
                                    ]
                                }
                            },
                            {
                                "name": "templateId",
                                "type": "text",
                                "label": "HTML Template ID"
                            },
                            {
                                "name": "templateData",
                                "type": "text",
                                "label": "Input data in CSV or JSON format",
                                "required": true
                            },
                            {
                                "name": "templateHtmlOverride",
                                "type": "text",
                                "label": "Raw HTML Template (for on-prem only)"
                            }
                        ],
                        "type": "collection",
                        "label": "Convert Options",
                        "required": true
                    },
                    {
                        "name": "name",
                        "type": "text",
                        "label": "Output File Name"
                    },
                    {
                        "name": "orientation",
                        "type": "select",
                        "label": "Orientation",
                        "validate": {
                            "enum": [
                                "portrait",
                                "landscape"
                            ]
                        }
                    },
                    {
                        "name": "paperSize",
                        "type": "select",
                        "label": "Paper Size ",
                        "validate": {
                            "enum": [
                                "a0",
                                "a1",
                                "a2",
                                "a3",
                                "a4",
                                "a5",
                                "a6",
                                "legal",
                                "letter",
                                "tabloid",
                                "custom"
                            ]
                        }
                    },
                    {
                        "name": "printBackground",
                        "type": "boolean",
                        "label": "Render Page Background"
                    },
                    {
                        "name": "doNotWaitFullLoad",
                        "type": "boolean",
                        "label": "Do not wait for full load"
                    },
                    {
                        "name": "margins",
                        "type": "text",
                        "label": "Margins"
                    },
                    {
                        "name": "async",
                        "type": "select",
                        "label": "Execution Mode",
                        "validate": {
                            "enum": [
                                false,
                                15000,
                                "asyncCheckLater"
                            ]
                        }
                    },
                    {
                        "name": "profiles",
                        "type": "text",
                        "label": "Profiles"
                    },
                    {
                        "name": "expiration",
                        "type": "number",
                        "label": "Output Links Expiration"
                    },
                    {
                        "name": "export",
                        "spec": [
                            {
                                "name": "exportType",
                                "type": "select",
                                "label": "Export Type",
                                "required": true,
                                "validate": {
                                    "enum": [
                                        "downloadFile",
                                        "inline"
                                    ]
                                }
                            }
                        ],
                        "type": "collection",
                        "label": "Export Options",
                        "required": true
                    }
                ]
            }
        },
        {
            "id": 1,
            "module": "email:ActionSendEmail",
            "version": 7,
            "parameters": {
                "account": 10296506,
                "saveAfterSent": false
            },
            "mapper": {
                "cc": [],
                "to": [
                    "amund@aiki.as"
                ],
                "bcc": [],
                "from": "",
                "html": "denne ukens market watch",
                "sender": "",
                "headers": [],
                "replyTo": "",
                "subject": "Market watch",
                "priority": "normal",
                "inReplyTo": "",
                "references": [],
                "attachments": [
                    {
                        "cid": "",
                        "data": "{{15.data}}",
                        "fileName": "{{15.name}}"
                    }
                ],
                "contentType": "html"
            },
            "metadata": {
                "designer": {
                    "x": 3300,
                    "y": 0
                },
                "restore": {
                    "expect": {
                        "cc": {
                            "mode": "chose"
                        },
                        "to": {
                            "mode": "chose",
                            "items": [
                                null
                            ]
                        },
                        "bcc": {
                            "mode": "chose"
                        },
                        "priority": {
                            "label": "Normal"
                        },
                        "references": {
                            "mode": "chose"
                        },
                        "attachments": {
                            "mode": "chose",
                            "items": [
                                null
                            ]
                        },
                        "contentType": {
                            "label": "HTML"
                        }
                    },
                    "parameters": {
                        "account": {
                            "data": {
                                "scoped": "true",
                                "connection": "smtp"
                            },
                            "label": "noreply@aiki.as (SMTP noreply@aiki.as)"
                        },
                        "saveAfterSent": {
                            "label": "No"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "account",
                        "type": "account:smtp,google-restricted,microsoft-smtp-imap",
                        "label": "Connection",
                        "required": true
                    },
                    {
                        "name": "saveAfterSent",
                        "type": "select",
                        "label": "Save message after sending",
                        "required": true,
                        "validate": {
                            "enum": [
                                true,
                                false
                            ]
                        }
                    },
                    {
                        "type": "hidden"
                    }
                ],
                "expect": [
                    {
                        "name": "to",
                        "spec": {
                            "name": "value",
                            "type": "email",
                            "label": "Email address",
                            "required": true
                        },
                        "type": "array",
                        "label": "To",
                        "required": true
                    },
                    {
                        "name": "subject",
                        "type": "text",
                        "label": "Subject"
                    },
                    {
                        "name": "contentType",
                        "type": "select",
                        "label": "Content Type",
                        "required": true,
                        "validate": {
                            "enum": [
                                "html",
                                "text"
                            ]
                        }
                    },
                    {
                        "name": "attachments",
                        "spec": [
                            {
                                "name": "fileName",
                                "type": "filename",
                                "label": "File name",
                                "required": true,
                                "semantic": "file:name"
                            },
                            {
                                "name": "data",
                                "type": "buffer",
                                "label": "Data",
                                "required": true,
                                "semantic": "file:data"
                            },
                            {
                                "name": "cid",
                                "type": "text",
                                "label": "Content-ID"
                            }
                        ],
                        "type": "array",
                        "label": "Attachments"
                    },
                    {
                        "name": "cc",
                        "spec": {
                            "name": "value",
                            "type": "email",
                            "label": "Email address"
                        },
                        "type": "array",
                        "label": "Copy recipient"
                    },
                    {
                        "name": "bcc",
                        "spec": {
                            "name": "value",
                            "type": "email",
                            "label": "Email address"
                        },
                        "type": "array",
                        "label": "Blind copy recipient"
                    },
                    {
                        "name": "from",
                        "type": "text",
                        "label": "From"
                    },
                    {
                        "name": "sender",
                        "type": "text",
                        "label": "Sender"
                    },
                    {
                        "name": "replyTo",
                        "type": "text",
                        "label": "Reply-To"
                    },
                    {
                        "name": "inReplyTo",
                        "type": "text",
                        "label": "In-Reply-To"
                    },
                    {
                        "name": "references",
                        "spec": {
                            "name": "value",
                            "type": "text",
                            "label": "Reference",
                            "required": true
                        },
                        "type": "array",
                        "label": "References"
                    },
                    {
                        "name": "priority",
                        "type": "select",
                        "label": "Priority",
                        "validate": {
                            "enum": [
                                "high",
                                "normal",
                                "low"
                            ]
                        }
                    },
                    {
                        "name": "headers",
                        "spec": [
                            {
                                "name": "key",
                                "type": "text",
                                "label": "Key",
                                "required": true
                            },
                            {
                                "name": "value",
                                "type": "text",
                                "label": "Value",
                                "required": true
                            }
                        ],
                        "type": "array",
                        "label": "Headers"
                    },
                    {
                        "name": "html",
                        "type": "text",
                        "label": "Content"
                    }
                ]
            }
        }
    ],
    "metadata": {
        "instant": false,
        "version": 1,
        "scenario": {
            "roundtrips": 1,
            "maxErrors": 3,
            "autoCommit": true,
            "autoCommitTriggerLast": true,
            "sequential": false,
            "slots": null,
            "confidential": false,
            "dataloss": false,
            "dlq": false,
            "freshVariables": false
        },
        "designer": {
            "orphans": []
        },
        "zone": "eu2.make.com",
        "notes": []
    }
}