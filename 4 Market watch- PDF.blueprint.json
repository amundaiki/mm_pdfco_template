{
    "name": "4 Market watch: PDF",
    "flow": [
        {
            "id": 55,
            "module": "google-sheets:filterRows",
            "version": 2,
            "parameters": {
                "__IMTCONN__": 5394937
            },
            "mapper": {
                "from": "drive",
                "limit": "12",
                "filter": [
                    [
                        {
                            "a": "H",
                            "b": "6",
                            "o": "number:greaterorequal"
                        }
                    ]
                ],
                "orderBy": "H",
                "sheetId": "Innlegg 29.08.2025",
                "fieldType": "number",
                "sortOrder": "desc",
                "spreadsheetId": "1p5lLUysE1TWqctWvVtvSkccC4znpAvojsuoogVGj_rk",
                "tableFirstRow": "A1:Z1",
                "includesHeaders": true,
                "valueRenderOption": "FORMATTED_VALUE",
                "dateTimeRenderOption": "FORMATTED_STRING"
            },
            "metadata": {
                "designer": {
                    "x": 0,
                    "y": 0
                },
                "restore": {
                    "expect": {
                        "from": {
                            "label": "Select from My Drive"
                        },
                        "orderBy": {
                            "mode": "chose",
                            "label": "H"
                        },
                        "fieldType": {
                            "mode": "chose",
                            "label": "Number"
                        },
                        "sortOrder": {
                            "mode": "chose",
                            "label": "Descending"
                        },
                        "spreadsheetId": {
                            "mode": "edit"
                        },
                        "tableFirstRow": {
                            "label": "A-Z"
                        },
                        "includesHeaders": {
                            "mode": "chose",
                            "label": "Yes"
                        },
                        "valueRenderOption": {
                            "mode": "chose",
                            "label": "Formatted value"
                        },
                        "dateTimeRenderOption": {
                            "mode": "chose",
                            "label": "Formatted string"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "google"
                            },
                            "label": "AMUND AIKI (amund@aiki.as)"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:google",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "from",
                        "type": "select",
                        "label": "Search Method",
                        "required": true,
                        "validate": {
                            "enum": [
                                "drive",
                                "share"
                            ]
                        }
                    },
                    {
                        "name": "valueRenderOption",
                        "type": "select",
                        "label": "Value render option",
                        "validate": {
                            "enum": [
                                "FORMATTED_VALUE",
                                "UNFORMATTED_VALUE",
                                "FORMULA"
                            ]
                        }
                    },
                    {
                        "name": "dateTimeRenderOption",
                        "type": "select",
                        "label": "Date and time render option",
                        "validate": {
                            "enum": [
                                "SERIAL_NUMBER",
                                "FORMATTED_STRING"
                            ]
                        }
                    },
                    {
                        "name": "limit",
                        "type": "uinteger",
                        "label": "Limit"
                    },
                    {
                        "name": "spreadsheetId",
                        "type": "select",
                        "label": "Spreadsheet ID",
                        "required": true
                    },
                    {
                        "name": "sheetId",
                        "type": "any",
                        "label": "Sheet Name",
                        "required": true
                    },
                    {
                        "name": "includesHeaders",
                        "type": "select",
                        "label": "Table contains headers",
                        "required": true,
                        "validate": {
                            "enum": [
                                true,
                                false
                            ]
                        }
                    },
                    {
                        "name": "tableFirstRow",
                        "type": "select",
                        "label": "Column range",
                        "required": true,
                        "validate": {
                            "enum": [
                                "A1:Z1",
                                "A1:BZ1",
                                "A1:CZ1",
                                "A1:DZ1",
                                "A1:MZ1",
                                "A1:ZZ1",
                                "A1:AZZ1",
                                "A1:BZZ1",
                                "A1:CZZ1",
                                "A1:DZZ1",
                                "A1:MZZ1",
                                "A1:ZZZ1"
                            ]
                        }
                    },
                    {
                        "name": "filter",
                        "type": "filter",
                        "label": "Filter",
                        "options": "rpc://google-sheets/2/rpcGetFilterKeys?includesHeaders=true"
                    },
                    {
                        "name": "orderBy",
                        "type": "select",
                        "label": "Order by"
                    },
                    {
                        "name": "sortOrder",
                        "type": "select",
                        "label": "Sort order",
                        "validate": {
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    },
                    {
                        "name": "fieldType",
                        "type": "select",
                        "label": "Field Type",
                        "validate": {
                            "enum": [
                                "string",
                                "number",
                                "date"
                            ]
                        }
                    }
                ],
                "interface": [
                    {
                        "name": "__IMTLENGTH__",
                        "type": "uinteger",
                        "label": "Total number of bundles"
                    },
                    {
                        "name": "__IMTINDEX__",
                        "type": "uinteger",
                        "label": "Bundle order position"
                    },
                    {
                        "name": "__ROW_NUMBER__",
                        "type": "number",
                        "label": "Row number"
                    },
                    {
                        "name": "__SPREADSHEET_ID__",
                        "type": "text",
                        "label": "Spreadsheet ID"
                    },
                    {
                        "name": "__SHEET__",
                        "type": "text",
                        "label": "Sheet"
                    },
                    {
                        "name": "0",
                        "type": "text",
                        "label": "Kilde (A)"
                    },
                    {
                        "name": "1",
                        "type": "text",
                        "label": "Dato (B)"
                    },
                    {
                        "name": "2",
                        "type": "text",
                        "label": "Tittel (C)"
                    },
                    {
                        "name": "3",
                        "type": "text",
                        "label": "Sammendrag (D)"
                    },
                    {
                        "name": "4",
                        "type": "text",
                        "label": "URL (E)"
                    },
                    {
                        "name": "5",
                        "type": "text",
                        "label": "Forfatter (F)"
                    },
                    {
                        "name": "6",
                        "type": "text",
                        "label": "Kategori (G)"
                    },
                    {
                        "name": "7",
                        "type": "text",
                        "label": "Relevans_Score (H)"
                    },
                    {
                        "name": "8",
                        "type": "text",
                        "label": "AI_Tags (I)"
                    },
                    {
                        "name": "9",
                        "type": "text",
                        "label": "Proff.no (J)"
                    },
                    {
                        "name": "10",
                        "type": "text",
                        "label": "Full artikkel tekst (K)"
                    },
                    {
                        "name": "11",
                        "type": "text",
                        "label": "Bedriftnavn (L)"
                    },
                    {
                        "name": "12",
                        "type": "text",
                        "label": "Antall nyheter (M)"
                    },
                    {
                        "name": "13",
                        "type": "text",
                        "label": "(N)"
                    },
                    {
                        "name": "14",
                        "type": "text",
                        "label": "(O)"
                    },
                    {
                        "name": "15",
                        "type": "text",
                        "label": "(P)"
                    },
                    {
                        "name": "16",
                        "type": "text",
                        "label": "(Q)"
                    },
                    {
                        "name": "17",
                        "type": "text",
                        "label": "(R)"
                    },
                    {
                        "name": "18",
                        "type": "text",
                        "label": "(S)"
                    },
                    {
                        "name": "19",
                        "type": "text",
                        "label": "(T)"
                    },
                    {
                        "name": "20",
                        "type": "text",
                        "label": "(U)"
                    },
                    {
                        "name": "21",
                        "type": "text",
                        "label": "(V)"
                    },
                    {
                        "name": "22",
                        "type": "text",
                        "label": "(W)"
                    },
                    {
                        "name": "23",
                        "type": "text",
                        "label": "(X)"
                    },
                    {
                        "name": "24",
                        "type": "text",
                        "label": "(Y)"
                    },
                    {
                        "name": "25",
                        "type": "text",
                        "label": "(Z)"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 3,
            "module": "util:TextAggregator",
            "version": 1,
            "parameters": {
                "feeder": 55,
                "rowSeparator": "\n"
            },
            "mapper": {
                "value": "Kilde: {{55.`0`}}\n\nDato skrevet: {{55.`1`}}\n\nTittel: {{55.`2`}}\n\nSammendrag: {{55.`3`}}\n\nURL: {{55.`4`}}\n\nForfatter: {{55.`6`}}\n\nkategori: {{55.`6`}}\n\nRelevans for sonat score: {{55.`7`}}/10\n\nai tags: {{55.`8`}}\n\nPRoff.no info: \n{{55.`9`}}"
            },
            "metadata": {
                "designer": {
                    "x": 300,
                    "y": 0,
                    "name": "NYHETER"
                },
                "restore": {
                    "extra": {
                        "feeder": {
                            "label": "Google Sheets - Search Rows [55]"
                        }
                    },
                    "parameters": {
                        "rowSeparator": {
                            "label": "New row"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "rowSeparator",
                        "type": "select",
                        "label": "Row separator",
                        "validate": {
                            "enum": [
                                "\n",
                                "\t",
                                "other"
                            ]
                        }
                    }
                ],
                "expect": [
                    {
                        "name": "value",
                        "type": "text",
                        "label": "Text"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 56,
            "module": "google-sheets:filterRows",
            "version": 2,
            "parameters": {
                "__IMTCONN__": 5394937
            },
            "mapper": {
                "from": "drive",
                "limit": "12",
                "filter": [
                    [
                        {
                            "a": "F",
                            "b": "6",
                            "o": "number:greaterorequal"
                        }
                    ]
                ],
                "orderBy": "F",
                "sheetId": "Linkedin 29.08.2025",
                "fieldType": "number",
                "sortOrder": "desc",
                "spreadsheetId": "1p5lLUysE1TWqctWvVtvSkccC4znpAvojsuoogVGj_rk",
                "tableFirstRow": "A1:Z1",
                "includesHeaders": true,
                "valueRenderOption": "FORMATTED_VALUE",
                "dateTimeRenderOption": "FORMATTED_STRING"
            },
            "metadata": {
                "designer": {
                    "x": 600,
                    "y": 0
                },
                "restore": {
                    "expect": {
                        "from": {
                            "label": "Select from My Drive"
                        },
                        "orderBy": {
                            "mode": "chose",
                            "label": "F"
                        },
                        "fieldType": {
                            "mode": "chose",
                            "label": "Number"
                        },
                        "sortOrder": {
                            "mode": "chose",
                            "label": "Descending"
                        },
                        "spreadsheetId": {
                            "mode": "edit"
                        },
                        "tableFirstRow": {
                            "label": "A-Z"
                        },
                        "includesHeaders": {
                            "mode": "chose",
                            "label": "Yes"
                        },
                        "valueRenderOption": {
                            "mode": "chose",
                            "label": "Formatted value"
                        },
                        "dateTimeRenderOption": {
                            "mode": "chose",
                            "label": "Formatted string"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "google"
                            },
                            "label": "AMUND AIKI (amund@aiki.as)"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:google",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "from",
                        "type": "select",
                        "label": "Search Method",
                        "required": true,
                        "validate": {
                            "enum": [
                                "drive",
                                "share"
                            ]
                        }
                    },
                    {
                        "name": "valueRenderOption",
                        "type": "select",
                        "label": "Value render option",
                        "validate": {
                            "enum": [
                                "FORMATTED_VALUE",
                                "UNFORMATTED_VALUE",
                                "FORMULA"
                            ]
                        }
                    },
                    {
                        "name": "dateTimeRenderOption",
                        "type": "select",
                        "label": "Date and time render option",
                        "validate": {
                            "enum": [
                                "SERIAL_NUMBER",
                                "FORMATTED_STRING"
                            ]
                        }
                    },
                    {
                        "name": "limit",
                        "type": "uinteger",
                        "label": "Limit"
                    },
                    {
                        "name": "spreadsheetId",
                        "type": "select",
                        "label": "Spreadsheet ID",
                        "required": true
                    },
                    {
                        "name": "sheetId",
                        "type": "any",
                        "label": "Sheet Name",
                        "required": true
                    },
                    {
                        "name": "includesHeaders",
                        "type": "select",
                        "label": "Table contains headers",
                        "required": true,
                        "validate": {
                            "enum": [
                                true,
                                false
                            ]
                        }
                    },
                    {
                        "name": "tableFirstRow",
                        "type": "select",
                        "label": "Column range",
                        "required": true,
                        "validate": {
                            "enum": [
                                "A1:Z1",
                                "A1:BZ1",
                                "A1:CZ1",
                                "A1:DZ1",
                                "A1:MZ1",
                                "A1:ZZ1",
                                "A1:AZZ1",
                                "A1:BZZ1",
                                "A1:CZZ1",
                                "A1:DZZ1",
                                "A1:MZZ1",
                                "A1:ZZZ1"
                            ]
                        }
                    },
                    {
                        "name": "filter",
                        "type": "filter",
                        "label": "Filter",
                        "options": "rpc://google-sheets/2/rpcGetFilterKeys?includesHeaders=true"
                    },
                    {
                        "name": "orderBy",
                        "type": "select",
                        "label": "Order by"
                    },
                    {
                        "name": "sortOrder",
                        "type": "select",
                        "label": "Sort order",
                        "validate": {
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    },
                    {
                        "name": "fieldType",
                        "type": "select",
                        "label": "Field Type",
                        "validate": {
                            "enum": [
                                "string",
                                "number",
                                "date"
                            ]
                        }
                    }
                ],
                "interface": [
                    {
                        "name": "__IMTLENGTH__",
                        "type": "uinteger",
                        "label": "Total number of bundles"
                    },
                    {
                        "name": "__IMTINDEX__",
                        "type": "uinteger",
                        "label": "Bundle order position"
                    },
                    {
                        "name": "__ROW_NUMBER__",
                        "type": "number",
                        "label": "Row number"
                    },
                    {
                        "name": "__SPREADSHEET_ID__",
                        "type": "text",
                        "label": "Spreadsheet ID"
                    },
                    {
                        "name": "__SHEET__",
                        "type": "text",
                        "label": "Sheet"
                    },
                    {
                        "name": "0",
                        "type": "text",
                        "label": "KONTO (A)"
                    },
                    {
                        "name": "1",
                        "type": "text",
                        "label": "URL (B)"
                    },
                    {
                        "name": "2",
                        "type": "text",
                        "label": "INNLEGG (C)"
                    },
                    {
                        "name": "3",
                        "type": "text",
                        "label": "DATO (D)"
                    },
                    {
                        "name": "4",
                        "type": "text",
                        "label": "kategori (E)"
                    },
                    {
                        "name": "5",
                        "type": "text",
                        "label": "relevans_score (F)"
                    },
                    {
                        "name": "6",
                        "type": "text",
                        "label": "sonat_match (G)"
                    },
                    {
                        "name": "7",
                        "type": "text",
                        "label": "action_required (H)"
                    },
                    {
                        "name": "8",
                        "type": "text",
                        "label": "Antall nyheter (I)"
                    },
                    {
                        "name": "9",
                        "type": "text",
                        "label": "(J)"
                    },
                    {
                        "name": "10",
                        "type": "text",
                        "label": "(K)"
                    },
                    {
                        "name": "11",
                        "type": "text",
                        "label": "(L)"
                    },
                    {
                        "name": "12",
                        "type": "text",
                        "label": "(M)"
                    },
                    {
                        "name": "13",
                        "type": "text",
                        "label": "(N)"
                    },
                    {
                        "name": "14",
                        "type": "text",
                        "label": "(O)"
                    },
                    {
                        "name": "15",
                        "type": "text",
                        "label": "(P)"
                    },
                    {
                        "name": "16",
                        "type": "text",
                        "label": "(Q)"
                    },
                    {
                        "name": "17",
                        "type": "text",
                        "label": "(R)"
                    },
                    {
                        "name": "18",
                        "type": "text",
                        "label": "(S)"
                    },
                    {
                        "name": "19",
                        "type": "text",
                        "label": "(T)"
                    },
                    {
                        "name": "20",
                        "type": "text",
                        "label": "(U)"
                    },
                    {
                        "name": "21",
                        "type": "text",
                        "label": "(V)"
                    },
                    {
                        "name": "22",
                        "type": "text",
                        "label": "(W)"
                    },
                    {
                        "name": "23",
                        "type": "text",
                        "label": "(X)"
                    },
                    {
                        "name": "24",
                        "type": "text",
                        "label": "(Y)"
                    },
                    {
                        "name": "25",
                        "type": "text",
                        "label": "(Z)"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 10,
            "module": "util:TextAggregator",
            "version": 1,
            "parameters": {
                "feeder": 56,
                "rowSeparator": "\n"
            },
            "mapper": {
                "value": "KONTO: {{56.`0`}}\n\nINNLEGG_TEKST: {{56.`2`}}\n\nINNLEGG_URL: {{56.`1`}}\n\nDato postet: {{56.`3`}}\n\nKategori: {{56.`4`}}\n\nRelevans_score: {{56.`5`}}\n\nsonat_match: {{56.`6`}}\n\naction: {{56.`7`}}"
            },
            "metadata": {
                "designer": {
                    "x": 900,
                    "y": 0,
                    "name": "LINKEDIN"
                },
                "restore": {
                    "extra": {
                        "feeder": {
                            "label": "Google Sheets - Search Rows [56]"
                        }
                    },
                    "parameters": {
                        "rowSeparator": {
                            "label": "New row"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "rowSeparator",
                        "type": "select",
                        "label": "Row separator",
                        "validate": {
                            "enum": [
                                "\n",
                                "\t",
                                "other"
                            ]
                        }
                    }
                ],
                "expect": [
                    {
                        "name": "value",
                        "type": "text",
                        "label": "Text"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 54,
            "module": "google-sheets:getCell",
            "version": 2,
            "parameters": {
                "__IMTCONN__": 5394937
            },
            "mapper": {
                "cell": "m2",
                "select": "map",
                "sheetId": "Innlegg 29.08.2025",
                "spreadsheetId": "1p5lLUysE1TWqctWvVtvSkccC4znpAvojsuoogVGj_rk",
                "valueRenderOption": "FORMATTED_VALUE",
                "dateTimeRenderOption": "FORMATTED_STRING"
            },
            "metadata": {
                "designer": {
                    "x": 1200,
                    "y": 0
                },
                "restore": {
                    "expect": {
                        "select": {
                            "label": "Enter manually"
                        },
                        "valueRenderOption": {
                            "mode": "chose",
                            "label": "Formatted value"
                        },
                        "dateTimeRenderOption": {
                            "mode": "chose",
                            "label": "Formatted string"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "google"
                            },
                            "label": "AMUND AIKI (amund@aiki.as)"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:google",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "select",
                        "type": "select",
                        "label": "Search Method",
                        "required": true,
                        "validate": {
                            "enum": [
                                "list",
                                "fromAll",
                                "map"
                            ]
                        }
                    },
                    {
                        "name": "cell",
                        "type": "text",
                        "label": "Cell",
                        "required": true
                    },
                    {
                        "name": "valueRenderOption",
                        "type": "select",
                        "label": "Value render option",
                        "validate": {
                            "enum": [
                                "FORMATTED_VALUE",
                                "UNFORMATTED_VALUE",
                                "FORMULA"
                            ]
                        }
                    },
                    {
                        "name": "dateTimeRenderOption",
                        "type": "select",
                        "label": "Date and time render option",
                        "validate": {
                            "enum": [
                                "SERIAL_NUMBER",
                                "FORMATTED_STRING"
                            ]
                        }
                    },
                    {
                        "name": "spreadsheetId",
                        "type": "text",
                        "label": "Spreadsheet ID",
                        "required": true
                    },
                    {
                        "name": "sheetId",
                        "type": "text",
                        "label": "Sheet Name",
                        "required": true
                    }
                ]
            }
        },
        {
            "id": 57,
            "module": "google-sheets:getCell",
            "version": 2,
            "parameters": {
                "__IMTCONN__": 5394937
            },
            "mapper": {
                "cell": "i2",
                "select": "map",
                "sheetId": "Linkedin 29.08.2025",
                "spreadsheetId": "1p5lLUysE1TWqctWvVtvSkccC4znpAvojsuoogVGj_rk",
                "valueRenderOption": "FORMATTED_VALUE",
                "dateTimeRenderOption": "FORMATTED_STRING"
            },
            "metadata": {
                "designer": {
                    "x": 1500,
                    "y": 0
                },
                "restore": {
                    "expect": {
                        "select": {
                            "label": "Enter manually"
                        },
                        "valueRenderOption": {
                            "mode": "chose",
                            "label": "Formatted value"
                        },
                        "dateTimeRenderOption": {
                            "mode": "chose",
                            "label": "Formatted string"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "google"
                            },
                            "label": "AMUND AIKI (amund@aiki.as)"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:google",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "select",
                        "type": "select",
                        "label": "Search Method",
                        "required": true,
                        "validate": {
                            "enum": [
                                "list",
                                "fromAll",
                                "map"
                            ]
                        }
                    },
                    {
                        "name": "cell",
                        "type": "text",
                        "label": "Cell",
                        "required": true
                    },
                    {
                        "name": "valueRenderOption",
                        "type": "select",
                        "label": "Value render option",
                        "validate": {
                            "enum": [
                                "FORMATTED_VALUE",
                                "UNFORMATTED_VALUE",
                                "FORMULA"
                            ]
                        }
                    },
                    {
                        "name": "dateTimeRenderOption",
                        "type": "select",
                        "label": "Date and time render option",
                        "validate": {
                            "enum": [
                                "SERIAL_NUMBER",
                                "FORMATTED_STRING"
                            ]
                        }
                    },
                    {
                        "name": "spreadsheetId",
                        "type": "text",
                        "label": "Spreadsheet ID",
                        "required": true
                    },
                    {
                        "name": "sheetId",
                        "type": "text",
                        "label": "Sheet Name",
                        "required": true
                    }
                ]
            }
        },
        {
            "id": 58,
            "module": "anthropic-claude:createAMessage",
            "version": 1,
            "parameters": {
                "__IMTCONN__": 7073506
            },
            "mapper": {
                "model": "claude-sonnet-4-20250514",
                "messages": [
                    {
                        "role": "user",
                        "content": [
                            {
                                "text": "Du er en salgsintelligens-ekspert for Sonat Consulting som skal lage en komplett Market Watch rapport basert på de 12 beste og mest relevante bedriftene og LinkedIn-innleggene fra siste uke.\n\n## SONAT PROFIL:\nSonat AS er et norsk konsulentmiljø (Bergen, Oslo, Trondheim) som hjelper bedrifter med digital transformasjon.\n\nEKSPERTOMRÅDER:\n- Digitalisering og digital transformasjon\n- Tjenestedesign og UX (brukeropplevelse)  \n- Maskinlæring og kunstig intelligens\n- VR/AR (virtuell og augmented reality)\n- Teknologirådgivning og systemutvikling\n- Java, Microsoft-teknologi, skytjenester (Azure, AWS, Google)\n\nMÅLGRUPPER:\n- Bank, forsikring og finans\n- Telecom og media\n- Maritim industri\n- Helse\n- Teknologi- og vekstbedrifter >10 ansatte\n\n## OPPGAVE:\nAnalyser input-dataene (nyheter og LinkedIn-poster) og generer en komplett JSON-struktur for Market Watch rapporten. Alle 12 bedrifter er pre-kvalifisert og rangert etter relevans og salgsmuligheter.\n\n**VIKTIG:** Du mottar alltid 12 LinkedIn-innlegg. Fordel dem på 3 sider med 4 innlegg på hver side (4+4+4).\n\n## KRITISKE KRAV:\n1. Returner BARE valid JSON - ingen forklarende tekst\n2. Alle 12 bedrifter er \"beste muligheter\" - ingen tier-system\n3. Fokuser på actionable insights og kontaktprioriteringer\n4. Bruk norsk språk (unntatt tekniske tags)\n5. Alle anbefalinger må være konkrete og handlingsrettede\n\n## JSON STRUKTUR (OBLIGATORISK):\n\n{\n  \"report_generated\": \"YYYY-MM-DD\",\n  \"total_companies\": \"[antall nyheter/bedrifter analysert totalt]\",\n  \"total_linkedin_posts\": \"[antall LinkedIn-poster analysert totalt]\",\n  \"high_priority_leads\": 12,\n  \"leads\": 12,\n  \n  \"banner_text\": \"Denne uken analyserte vi [total_companies] nyheter og [total_linkedin_posts] LinkedIn-poster, og valgte ut de 12 mest relevante og lovende bedriftene samt linkedin-innlegg for Sonat. Fokus på bedrifter med konkrete teknologibehov og vekstpotensial. Alle bedrifter er pre-kvalifisert for relevans og salgsmuligheter.\",\n  \n  \"critical_section_title\": \"De 12 beste bedriftene - Prioritert for kontakt\",\n  \"critical_section_badge\": \"Beste muligheter\",\n  \n  \"critical_companies\": [\n    {\n      \"name\": \"Bedriftsnavn 1\",\n      \"website_url\": \"https://bedrift1.no\",\n      \"sector\": \"Teknologi/Finans/Maritim/etc\",\n      \"employee_count\": 50,\n      \"location\": \"Oslo/Bergen/Trondheim/etc\",\n      \"ceo_name\": \"CEO navn eller kontaktperson\",\n      \"email\": \"kontakt@bedrift.no\",\n      \"phone\": \"+47 xxx xx xxx\",\n      \"funding_amount_nok\": \"50M NOK\",\n      \"funding_round\": \"Serie A/B/etc\",\n      \"source_name\": \"Kilde (DN, TU, etc)\",\n      \"source_url\": \"URL til artikkel\",\n      \"priority_score\": 9,\n      \"event_type\": \"Finansiering/Vekst/Ekspansjon/etc\",\n      \"event_description\": \"Konkret beskrivelse av hva som skjer i bedriften (100-200 ord)\",\n      \"technical_needs\": \"Detaljert analyse av tekniske behov og muligheter for Sonat (150-300 ord)\",\n      \"technical_needs_list\": [\"AI/ML implementering\", \"Skalerbar arkitektur\", \"UX-design\", \"etc\"],\n      \"growth_indicators_list\": [\"50% vekst\", \"Ny finansieringsrunde\", \"Ekspansjon til Europa\", \"etc\"],\n      \"sonat_relevance\": \"Konkret vurdering av hvordan Sonat kan hjelpe og hvorfor dette er en god mulighet (100-200 ord)\",\n      \"relevance_tags\": [\"AI\", \"digitalisering\", \"skalering\", \"fintech\"]\n    },\n    {\n      \"name\": \"Bedriftsnavn 2\",\n      \"website_url\": \"https://bedrift2.no\",\n      \"sector\": \"Teknologi/Finans/Maritim/etc\",\n      \"employee_count\": 75,\n      \"location\": \"Bergen/Oslo/Trondheim/etc\",\n      \"ceo_name\": \"CEO navn eller kontaktperson\",\n      \"email\": \"kontakt@bedrift2.no\",\n      \"phone\": \"+47 xxx xx xxx\",\n      \"funding_amount_nok\": \"25M NOK\",\n      \"funding_round\": \"Seed/Serie A/etc\",\n      \"source_name\": \"Kilde (DN, TU, etc)\",\n      \"source_url\": \"URL til artikkel\",\n      \"priority_score\": 8,\n      \"event_type\": \"Vekst/Ekspansjon/etc\",\n      \"event_description\": \"Konkret beskrivelse av hva som skjer i bedriften (100-200 ord)\",\n      \"technical_needs\": \"Detaljert analyse av tekniske behov og muligheter for Sonat (150-300 ord)\",\n      \"technical_needs_list\": [\"Cloud migration\", \"DevOps\", \"Digital transformasjon\", \"etc\"],\n      \"growth_indicators_list\": [\"Ny markedsposisjon\", \"Ansettelser\", \"Produktlansering\", \"etc\"],\n      \"sonat_relevance\": \"Konkret vurdering av hvordan Sonat kan hjelpe og hvorfor dette er en god mulighet (100-200 ord)\",\n      \"relevance_tags\": [\"cloud\", \"devops\", \"transformasjon\", \"maritim\"]\n    }\n    // ... FORTSETT MED ALLE 12 BEDRIFTER I SAMME FORMAT\n  ],\n  \n  \"key_findings\": [\n    {\n      \"number\": 1,\n      \"priority_class\": \"high\",\n      \"text\": \"Hovedfunn fra markedsanalysen - konkret trend med forretningsverdi for Sonat (150-300 tegn)\"\n    },\n    {\n      \"number\": 2,\n      \"priority_class\": \"medium\", \n      \"text\": \"Andre viktige funn (150-300 tegn)\"\n    },\n    {\n      \"number\": 3,\n      \"priority_class\": \"low\",\n      \"text\": \"Tredje funn (150-300 tegn)\"\n    }\n  ],\n  \n  \"linkedin_pages\": [\n    {\n      \"posts\": [\n        {\n          \"company_name\": \"Bedriftsnavn 1\",\n          \"post_date\": \"2025-01-XX\",\n          \"post_text\": \"LinkedIn innleggets tekst (150-300 tegn)\",\n          \"post_url\": \"https://linkedin.com/...\",\n          \"relevance_score\": 9,\n          \"sonat_opportunity\": \"Hvordan dette signaliserer en mulighet for Sonat\"\n        },\n        {\n          \"company_name\": \"Bedriftsnavn 2\", \n          \"post_date\": \"2025-01-XX\",\n          \"post_text\": \"LinkedIn innleggets tekst (150-300 tegn)\",\n          \"post_url\": \"https://linkedin.com/...\",\n          \"relevance_score\": 8,\n          \"sonat_opportunity\": \"Hvordan dette signaliserer en mulighet for Sonat\"\n        },\n        {\n          \"company_name\": \"Bedriftsnavn 3\", \n          \"post_date\": \"2025-01-XX\",\n          \"post_text\": \"LinkedIn innleggets tekst (150-300 tegn)\",\n          \"post_url\": \"https://linkedin.com/...\",\n          \"relevance_score\": 8,\n          \"sonat_opportunity\": \"Hvordan dette signaliserer en mulighet for Sonat\"\n        },\n        {\n          \"company_name\": \"Bedriftsnavn 4\", \n          \"post_date\": \"2025-01-XX\",\n          \"post_text\": \"LinkedIn innleggets tekst (150-300 tegn)\",\n          \"post_url\": \"https://linkedin.com/...\",\n          \"relevance_score\": 7,\n          \"sonat_opportunity\": \"Hvordan dette signaliserer en mulighet for Sonat\"\n        }\n      ]\n    },\n    {\n      \"posts\": [\n        {\n          \"company_name\": \"Bedriftsnavn 5\",\n          \"post_date\": \"2025-01-XX\",\n          \"post_text\": \"LinkedIn innleggets tekst (150-300 tegn)\",\n          \"post_url\": \"https://linkedin.com/...\",\n          \"relevance_score\": 7,\n          \"sonat_opportunity\": \"Hvordan dette signaliserer en mulighet for Sonat\"\n        },\n        {\n          \"company_name\": \"Bedriftsnavn 6\", \n          \"post_date\": \"2025-01-XX\",\n          \"post_text\": \"LinkedIn innleggets tekst (150-300 tegn)\",\n          \"post_url\": \"https://linkedin.com/...\",\n          \"relevance_score\": 7,\n          \"sonat_opportunity\": \"Hvordan dette signaliserer en mulighet for Sonat\"\n        },\n        {\n          \"company_name\": \"Bedriftsnavn 7\", \n          \"post_date\": \"2025-01-XX\",\n          \"post_text\": \"LinkedIn innleggets tekst (150-300 tegn)\",\n          \"post_url\": \"https://linkedin.com/...\",\n          \"relevance_score\": 6,\n          \"sonat_opportunity\": \"Hvordan dette signaliserer en mulighet for Sonat\"\n        },\n        {\n          \"company_name\": \"Bedriftsnavn 8\", \n          \"post_date\": \"2025-01-XX\",\n          \"post_text\": \"LinkedIn innleggets tekst (150-300 tegn)\",\n          \"post_url\": \"https://linkedin.com/...\",\n          \"relevance_score\": 6,\n          \"sonat_opportunity\": \"Hvordan dette signaliserer en mulighet for Sonat\"\n        }\n      ]\n    },\n    {\n      \"posts\": [\n        {\n          \"company_name\": \"Bedriftsnavn 9\",\n          \"post_date\": \"2025-01-XX\",\n          \"post_text\": \"LinkedIn innleggets tekst (150-300 tegn)\",\n          \"post_url\": \"https://linkedin.com/...\",\n          \"relevance_score\": 6,\n          \"sonat_opportunity\": \"Hvordan dette signaliserer en mulighet for Sonat\"\n        },\n        {\n          \"company_name\": \"Bedriftsnavn 10\", \n          \"post_date\": \"2025-01-XX\",\n          \"post_text\": \"LinkedIn innleggets tekst (150-300 tegn)\",\n          \"post_url\": \"https://linkedin.com/...\",\n          \"relevance_score\": 6,\n          \"sonat_opportunity\": \"Hvordan dette signaliserer en mulighet for Sonat\"\n        },\n        {\n          \"company_name\": \"Bedriftsnavn 11\", \n          \"post_date\": \"2025-01-XX\",\n          \"post_text\": \"LinkedIn innleggets tekst (150-300 tegn)\",\n          \"post_url\": \"https://linkedin.com/...\",\n          \"relevance_score\": 5,\n          \"sonat_opportunity\": \"Hvordan dette signaliserer en mulighet for Sonat\"\n        },\n        {\n          \"company_name\": \"Bedriftsnavn 12\", \n          \"post_date\": \"2025-01-XX\",\n          \"post_text\": \"LinkedIn innleggets tekst (150-300 tegn)\",\n          \"post_url\": \"https://linkedin.com/...\",\n          \"relevance_score\": 5,\n          \"sonat_opportunity\": \"Hvordan dette signaliserer en mulighet for Sonat\"\n        }\n      ]\n    }\n  ],\n  \n  \"strategic_recommendations\": [\n    {\n      \"title\": \"Fokuser på AI-implementering\",\n      \"content\": \"Konkret anbefaling basert på markedstrender (150-300 tegn)\"\n    },\n    {\n      \"title\": \"Prioriter fintech-segmentet\",\n      \"content\": \"Anbefaling nummer 2 (150-300 tegn)\"\n    }\n  ],\n  \n  \"action_items\": [\n    {\n      \"number\": 1,\n      \"priority\": \"critical\",\n      \"timeline\": \"Denne uken\",\n      \"action\": \"Konkret handlingsoppgave med kontaktinfo (100-200 tegn)\"\n    },\n    {\n      \"number\": 2,\n      \"priority\": \"high\", \n      \"timeline\": \"Neste uke\",\n      \"action\": \"Handlingsoppgave nummer 2 (100-200 tegn)\"\n    }\n  ],\n  \n  \"top_opportunities\": [\n    {\n      \"number\": 1,\n      \"company_name\": \"Fra critical_companies liste\",\n      \"potential_value\": \"Estimert prosjektverdi og type\",\n      \"recommended_action\": \"Konkret handlingsanbefaling\",\n      \"priority_level\": \"critical\",\n      \"urgency_indicator\": \"RING NÅ\"\n    },\n    {\n      \"number\": 2,\n      \"company_name\": \"Bedrift nummer 2\",\n      \"potential_value\": \"Verdi estimat\",\n      \"recommended_action\": \"Anbefaling\",\n      \"priority_level\": \"high\",\n      \"urgency_indicator\": \"48 TIMER\"\n    },\n    {\n      \"number\": 3,\n      \"company_name\": \"Bedrift nummer 3\", \n      \"potential_value\": \"Verdi estimat\",\n      \"recommended_action\": \"Anbefaling\",\n      \"priority_level\": \"high\",\n      \"urgency_indicator\": \"DENNE UKE\"\n    }\n  ],\n  \n  \"weekly_actions\": [\n    {\n      \"day_number\": 1,\n      \"day_label\": \"MANDAG\",\n      \"action_description\": \"Ring de 3 første bedriftene\",\n      \"target_companies\": \"3 kritiske leads\"\n    },\n    {\n      \"day_number\": 2,\n      \"day_label\": \"TIRSDAG\", \n      \"action_description\": \"Send LinkedIn-meldinger\",\n      \"target_companies\": \"4-6 bedrifter\"\n    },\n    {\n      \"day_number\": 3,\n      \"day_label\": \"ONSDAG\",\n      \"action_description\": \"Følg opp meetings\",\n      \"target_companies\": \"Alle kontaktede\"\n    },\n    {\n      \"day_number\": 4,\n      \"day_label\": \"TORSDAG\",\n      \"action_description\": \"Research og forberedelse\",\n      \"target_companies\": \"Resterende 6 bedrifter\"\n    },\n    {\n      \"day_number\": 5,\n      \"day_label\": \"FREDAG\",\n      \"action_description\": \"Oppsummering og planlegging\",\n      \"target_companies\": \"Alle 12 bedrifter\"\n    }\n  ],\n  \n  \"monitored_accounts_count\": 12,\n  \"high_engagement_count\": 8,\n  \"hiring_signals_count\": 5,\n  \"networking_events_count\": 3,\n  \"qualified_count\": 12,\n  \"qualified_action_text\": \"Book discovery-calls med de beste bedriftene. Alle er pre-kvalifisert for relevans og salgsmuligheter.\",\n  \"next_report_title\": \"NESTE RAPPORT\",\n  \"next_report_text\": \"Ny Market Watch leveres hver fredag kl. 08:00\"\n}\n\n## ANALYSEPROSESS:\n\n### 1. BEDRIFTSANALYSE (critical_companies):\n- ALLE 12 bedrifter skal være i critical_companies arrayet\n- Hver bedrift skal ha full detaljert informasjon (samme struktur som eksempel)\n- Ranger dem etter hvor attraktive de er for Sonat (priority_score)\n- For hver bedrift: analyser tekniske behov, vekstindikatorer og Sonat-relevans\n- Inkluder konkret kontaktinformasjon når tilgjengelig\n- INGEN qualified_companies eller qualified_chunks\n\n### 2. LINKEDIN-ANALYSE (linkedin_pages):\n- Du mottar alltid 12 LinkedIn-innlegg som skal inkluderes\n- Fokuser på innlegg som viser tekniske behov, vekst eller utfordringer  \n- Fordel de 12 innleggene på 3 sider med 4 innlegg på hver side (4+4+4)\n- IKKE bruk priority_class - alle innlegg har samme farge\n- Inkluder relevance_score (1-10) for hvert innlegg\n\n### 3. STRATEGISK ANALYSE:\n- Identifiser markedstrender som er relevante for Sonat\n- Lag konkrete handlingsanbefalinger\n- Prioriter aktiviteter for maksimal ROI\n\n### 4. UKESPLANLEGGING:\n- Lag en konkret 5-dagers handlingsplan\n- Fordel de 12 bedriftene over uken\n- Inkluder både kalde kontakter og oppfølging\n\n## VIKTIGE RETNINGSLINJER:\n- Alle 12 bedrifter er \"beste muligheter\" - ikke kategoriser i tiers\n- Fokuser på konkrete teknologibehov som matcher Sonat\n- Inkluder timing og urgency-indikatorer\n- Bruk norsk språk konsistent\n- Alle anbefalinger må være handlingsrettede\n- Inkluder kontaktinformasjon når mulig\n\n## INPUT DATA:\n[Her kommer nyhetsartikler og LinkedIn-poster]\n​",
                                "type": "text"
                            },
                            {
                                "text": "\n## INPUT DATA:\n[Her kommer nyhetsartikler og LinkedIn-poster]\n\n\n## INPUT DATA:\nNYHETER:\nTotalt analysert: {{54.value}}\n{{3.text}}\n\n/////////////////////////////////////////\n\nLinkedin:\nTotalt analysert: {{57.value}}\n{{10.text}}\n\n\n",
                                "type": "text"
                            }
                        ]
                    }
                ],
                "metadata": {},
                "max_tokens": "64000",
                "temperature": "1"
            },
            "metadata": {
                "designer": {
                    "x": 1800,
                    "y": 0
                },
                "restore": {
                    "expect": {
                        "model": {
                            "mode": "chose",
                            "label": "Claude Sonnet 4"
                        },
                        "messages": {
                            "mode": "chose",
                            "items": [
                                {
                                    "role": {
                                        "mode": "chose",
                                        "label": "User"
                                    },
                                    "content": {
                                        "mode": "chose",
                                        "items": [
                                            {
                                                "type": {
                                                    "mode": "chose",
                                                    "label": "Text"
                                                }
                                            },
                                            {
                                                "type": {
                                                    "mode": "chose",
                                                    "label": "Text"
                                                }
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        "stop_sequences": {
                            "mode": "chose"
                        },
                        "additionalParameters": {
                            "mode": "chose"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "anthropic-claude"
                            },
                            "label": "AIKI"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:anthropic-claude",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "model",
                        "type": "select",
                        "label": "Model",
                        "required": true
                    },
                    {
                        "name": "max_tokens",
                        "type": "uinteger",
                        "label": "Max Tokens",
                        "required": true
                    },
                    {
                        "name": "messages",
                        "spec": {
                            "name": "value",
                            "spec": [
                                {
                                    "name": "role",
                                    "type": "select",
                                    "label": "Role",
                                    "options": [
                                        {
                                            "label": "User",
                                            "value": "user",
                                            "nested": [
                                                {
                                                    "name": "content",
                                                    "spec": {
                                                        "spec": [
                                                            {
                                                                "help": "For models that support image content blocks (vision), see the [Anthropic model comparison table](https://docs.anthropic.com/en/docs/about-claude/models#model-comparison-table).",
                                                                "name": "type",
                                                                "type": "select",
                                                                "label": "Type",
                                                                "options": [
                                                                    {
                                                                        "label": "Text",
                                                                        "value": "text",
                                                                        "nested": [
                                                                            {
                                                                                "help": "Content of the message on behalf of the selected **Role** .",
                                                                                "name": "text",
                                                                                "type": "text",
                                                                                "label": "Text",
                                                                                "required": true
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "label": "Image",
                                                                        "value": "image",
                                                                        "nested": [
                                                                            {
                                                                                "name": "source",
                                                                                "spec": [
                                                                                    {
                                                                                        "help": "File name, including the extension, for example, `image.jpg`.",
                                                                                        "name": "filename",
                                                                                        "type": "filename",
                                                                                        "label": "Filename",
                                                                                        "required": true,
                                                                                        "semantic": "file:name",
                                                                                        "extension": [
                                                                                            "jpeg",
                                                                                            "jpg",
                                                                                            "png",
                                                                                            "gif",
                                                                                            "webp"
                                                                                        ]
                                                                                    },
                                                                                    {
                                                                                        "help": "Binary data of the image. For example, you can retrieve the binary data of your image using the **HTTP: Get a file** module.",
                                                                                        "name": "data",
                                                                                        "type": "buffer",
                                                                                        "label": "Data",
                                                                                        "required": true,
                                                                                        "semantic": "file:data"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Source",
                                                                                "required": true
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "label": "PDF document",
                                                                        "value": "document",
                                                                        "nested": [
                                                                            "rpc://anthropic-claude/1/notePdfDocument",
                                                                            {
                                                                                "name": "pdfFileName",
                                                                                "type": "filename",
                                                                                "label": "Filename",
                                                                                "required": true,
                                                                                "semantic": "file:name",
                                                                                "extension": [
                                                                                    "pdf"
                                                                                ]
                                                                            },
                                                                            {
                                                                                "name": "pdfFileData",
                                                                                "type": "buffer",
                                                                                "label": "Data",
                                                                                "required": true,
                                                                                "semantic": "file:data"
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "label": "Tool result",
                                                                        "value": "tool_result",
                                                                        "nested": [
                                                                            {
                                                                                "name": "tool_use_id",
                                                                                "type": "text",
                                                                                "label": "Tool Use ID",
                                                                                "required": true
                                                                            },
                                                                            {
                                                                                "name": "content",
                                                                                "type": "text",
                                                                                "label": "Content",
                                                                                "required": true
                                                                            }
                                                                        ]
                                                                    }
                                                                ],
                                                                "required": true
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Content"
                                                    },
                                                    "type": "array",
                                                    "label": "Content",
                                                    "labels": {
                                                        "add": "Add content"
                                                    },
                                                    "required": true
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Assistant",
                                            "value": "assistant",
                                            "nested": [
                                                {
                                                    "help": "If the request ends with an assistant turn, then the response content will continue directly from that last turn.",
                                                    "name": "content",
                                                    "type": "text",
                                                    "label": "Content",
                                                    "required": true
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Tool Assistant",
                                            "value": "tool_assistant",
                                            "nested": [
                                                {
                                                    "name": "content",
                                                    "spec": {
                                                        "spec": [
                                                            {
                                                                "help": "You can send image content blocks starting with Claude 3 models.",
                                                                "name": "type",
                                                                "type": "select",
                                                                "label": "Type",
                                                                "options": [
                                                                    {
                                                                        "label": "Text",
                                                                        "value": "text",
                                                                        "nested": [
                                                                            {
                                                                                "help": "Content of the message on behalf of the selected **Role** .",
                                                                                "name": "text",
                                                                                "type": "text",
                                                                                "label": "Text",
                                                                                "required": true
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "label": "Tool Use",
                                                                        "value": "tool_use",
                                                                        "nested": [
                                                                            {
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "Tool Use ID",
                                                                                "required": true
                                                                            },
                                                                            {
                                                                                "name": "name",
                                                                                "type": "text",
                                                                                "label": "Tool Name",
                                                                                "required": true
                                                                            },
                                                                            {
                                                                                "name": "input",
                                                                                "type": "any",
                                                                                "label": "Input",
                                                                                "required": true
                                                                            }
                                                                        ]
                                                                    }
                                                                ],
                                                                "required": true
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Content"
                                                    },
                                                    "type": "array",
                                                    "label": "Content",
                                                    "labels": {
                                                        "add": "Add content"
                                                    },
                                                    "required": true
                                                }
                                            ]
                                        }
                                    ],
                                    "required": true
                                }
                            ],
                            "type": "collection",
                            "label": "Message"
                        },
                        "type": "array",
                        "label": "Messages",
                        "required": true
                    },
                    {
                        "name": "system",
                        "type": "text",
                        "label": "System Prompt"
                    },
                    {
                        "name": "metadata",
                        "spec": [
                            {
                                "name": "user_id",
                                "type": "text",
                                "label": "User ID"
                            }
                        ],
                        "type": "collection",
                        "label": "Metadata"
                    },
                    {
                        "name": "stop_sequences",
                        "spec": {
                            "name": "value",
                            "type": "text",
                            "label": "Stop Sequence"
                        },
                        "type": "array",
                        "label": "Stop Sequences"
                    },
                    {
                        "name": "temperature",
                        "type": "number",
                        "label": "Temperature",
                        "validate": {
                            "max": 1,
                            "min": 0
                        }
                    },
                    {
                        "name": "top_p",
                        "type": "number",
                        "label": "Top P",
                        "validate": {
                            "max": 1
                        }
                    },
                    {
                        "name": "top_k",
                        "type": "uinteger",
                        "label": "Top K"
                    },
                    {
                        "name": "additionalParameters",
                        "spec": {
                            "name": "value",
                            "spec": [
                                {
                                    "name": "key",
                                    "type": "text",
                                    "label": "Parameter Name",
                                    "required": true
                                },
                                {
                                    "name": "type",
                                    "type": "select",
                                    "label": "Input Type",
                                    "options": [
                                        {
                                            "label": "Text",
                                            "value": "text",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "text",
                                                    "label": "Parameter Value"
                                                }
                                            ],
                                            "default": true
                                        },
                                        {
                                            "label": "Number",
                                            "value": "number",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "number",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Boolean",
                                            "value": "boolean",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "boolean",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Date",
                                            "value": "date",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "date",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Tools",
                                            "value": "tools",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "spec": {
                                                        "type": "text",
                                                        "label": "Parameter Value"
                                                    },
                                                    "type": "array",
                                                    "label": "Parameter Values",
                                                    "labels": {
                                                        "add": "Add parameter value"
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "label": "Any",
                                            "value": "any",
                                            "nested": [
                                                {
                                                    "name": "value",
                                                    "type": "any",
                                                    "label": "Parameter Value"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "type": "collection",
                            "label": "Input Parameter"
                        },
                        "type": "array",
                        "label": "Other Input Parameters"
                    }
                ]
            }
        },
        {
            "id": 15,
            "module": "pdf-co:HTMLtoPDF",
            "version": 1,
            "parameters": {
                "__IMTCONN__": 3197717
            },
            "mapper": {
                "convert": {
                    "convertType": "fromHtmlTemplate",
                    "templateId": "10429",
                    "templateData": "{{58.textResponse}}"
                },
                "name": "Market watch {{now}}",
                "orientation": "portrait",
                "paperSize": "a4",
                "printBackground": true,
                "doNotWaitFullLoad": false,
                "async": 15000,
                "expiration": "60",
                "export": {
                    "exportType": "downloadFile"
                }
            },
            "metadata": {
                "designer": {
                    "x": 2100,
                    "y": 0,
                    "name": "Template"
                },
                "restore": {
                    "parameters": {
                        "__IMTCONN__": {
                            "label": "Amund PDF.co",
                            "data": {
                                "scoped": "true",
                                "connection": "pdf-co"
                            }
                        }
                    },
                    "expect": {
                        "convert": {
                            "nested": {
                                "convertType": {
                                    "label": "HTML Template to PDF"
                                }
                            }
                        },
                        "orientation": {
                            "label": "Portrait"
                        },
                        "paperSize": {
                            "label": "A4"
                        },
                        "printBackground": {
                            "mode": "chose"
                        },
                        "doNotWaitFullLoad": {
                            "mode": "chose"
                        },
                        "async": {
                            "mode": "chose",
                            "label": "Async"
                        },
                        "export": {
                            "nested": {
                                "exportType": {
                                    "label": "Download a File"
                                }
                            }
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:pdf-co",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "convert",
                        "type": "collection",
                        "label": "Convert Options",
                        "required": true,
                        "spec": [
                            {
                                "name": "convertType",
                                "type": "select",
                                "label": "Convert Type",
                                "required": true,
                                "validate": {
                                    "enum": [
                                        "fromHtml",
                                        "fromHtmlTemplate",
                                        "fromWebsite"
                                    ]
                                }
                            },
                            {
                                "name": "templateId",
                                "type": "text",
                                "label": "HTML Template ID"
                            },
                            {
                                "name": "templateData",
                                "type": "text",
                                "label": "Input data in CSV or JSON format",
                                "required": true
                            },
                            {
                                "name": "templateHtmlOverride",
                                "type": "text",
                                "label": "Raw HTML Template (for on-prem only)"
                            }
                        ]
                    },
                    {
                        "name": "name",
                        "type": "text",
                        "label": "Output File Name"
                    },
                    {
                        "name": "orientation",
                        "type": "select",
                        "label": "Orientation",
                        "validate": {
                            "enum": [
                                "portrait",
                                "landscape"
                            ]
                        }
                    },
                    {
                        "name": "paperSize",
                        "type": "select",
                        "label": "Paper Size ",
                        "validate": {
                            "enum": [
                                "a0",
                                "a1",
                                "a2",
                                "a3",
                                "a4",
                                "a5",
                                "a6",
                                "legal",
                                "letter",
                                "tabloid",
                                "custom"
                            ]
                        }
                    },
                    {
                        "name": "printBackground",
                        "type": "boolean",
                        "label": "Render Page Background"
                    },
                    {
                        "name": "doNotWaitFullLoad",
                        "type": "boolean",
                        "label": "Do not wait for full load"
                    },
                    {
                        "name": "margins",
                        "type": "text",
                        "label": "Margins"
                    },
                    {
                        "name": "async",
                        "type": "select",
                        "label": "Execution Mode",
                        "validate": {
                            "enum": [
                                false,
                                15000,
                                "asyncCheckLater"
                            ]
                        }
                    },
                    {
                        "name": "profiles",
                        "type": "text",
                        "label": "Profiles"
                    },
                    {
                        "name": "expiration",
                        "type": "number",
                        "label": "Output Links Expiration"
                    },
                    {
                        "name": "export",
                        "type": "collection",
                        "label": "Export Options",
                        "required": true,
                        "spec": [
                            {
                                "name": "exportType",
                                "type": "select",
                                "label": "Export Type",
                                "required": true,
                                "validate": {
                                    "enum": [
                                        "downloadFile",
                                        "inline"
                                    ]
                                }
                            }
                        ]
                    }
                ]
            }
        },
        {
            "id": 1,
            "module": "email:ActionSendEmail",
            "version": 7,
            "parameters": {
                "account": 10296506,
                "saveAfterSent": false
            },
            "mapper": {
                "cc": [],
                "to": [
                    "amund@aiki.as"
                ],
                "bcc": [],
                "from": "",
                "html": "denne ukens market watch",
                "sender": "",
                "headers": [],
                "replyTo": "",
                "subject": "Market watch",
                "priority": "normal",
                "inReplyTo": "",
                "references": [],
                "attachments": [
                    {
                        "cid": "",
                        "data": "{{15.data}}",
                        "fileName": "{{15.name}}"
                    }
                ],
                "contentType": "html"
            },
            "metadata": {
                "designer": {
                    "x": 2400,
                    "y": 0
                },
                "restore": {
                    "expect": {
                        "cc": {
                            "mode": "chose"
                        },
                        "to": {
                            "mode": "chose",
                            "items": [
                                null
                            ]
                        },
                        "bcc": {
                            "mode": "chose"
                        },
                        "priority": {
                            "label": "Normal"
                        },
                        "references": {
                            "mode": "chose"
                        },
                        "attachments": {
                            "mode": "chose",
                            "items": [
                                null
                            ]
                        },
                        "contentType": {
                            "label": "HTML"
                        }
                    },
                    "parameters": {
                        "account": {
                            "data": {
                                "scoped": "true",
                                "connection": "smtp"
                            },
                            "label": "noreply@aiki.as (SMTP noreply@aiki.as)"
                        },
                        "saveAfterSent": {
                            "label": "No"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "account",
                        "type": "account:smtp,google-restricted,microsoft-smtp-imap",
                        "label": "Connection",
                        "required": true
                    },
                    {
                        "name": "saveAfterSent",
                        "type": "select",
                        "label": "Save message after sending",
                        "required": true,
                        "validate": {
                            "enum": [
                                true,
                                false
                            ]
                        }
                    },
                    {
                        "type": "hidden"
                    }
                ],
                "expect": [
                    {
                        "name": "to",
                        "spec": {
                            "name": "value",
                            "type": "email",
                            "label": "Email address",
                            "required": true
                        },
                        "type": "array",
                        "label": "To",
                        "required": true
                    },
                    {
                        "name": "subject",
                        "type": "text",
                        "label": "Subject"
                    },
                    {
                        "name": "contentType",
                        "type": "select",
                        "label": "Content Type",
                        "required": true,
                        "validate": {
                            "enum": [
                                "html",
                                "text"
                            ]
                        }
                    },
                    {
                        "name": "attachments",
                        "spec": [
                            {
                                "name": "fileName",
                                "type": "filename",
                                "label": "File name",
                                "required": true,
                                "semantic": "file:name"
                            },
                            {
                                "name": "data",
                                "type": "buffer",
                                "label": "Data",
                                "required": true,
                                "semantic": "file:data"
                            },
                            {
                                "name": "cid",
                                "type": "text",
                                "label": "Content-ID"
                            }
                        ],
                        "type": "array",
                        "label": "Attachments"
                    },
                    {
                        "name": "cc",
                        "spec": {
                            "name": "value",
                            "type": "email",
                            "label": "Email address"
                        },
                        "type": "array",
                        "label": "Copy recipient"
                    },
                    {
                        "name": "bcc",
                        "spec": {
                            "name": "value",
                            "type": "email",
                            "label": "Email address"
                        },
                        "type": "array",
                        "label": "Blind copy recipient"
                    },
                    {
                        "name": "from",
                        "type": "text",
                        "label": "From"
                    },
                    {
                        "name": "sender",
                        "type": "text",
                        "label": "Sender"
                    },
                    {
                        "name": "replyTo",
                        "type": "text",
                        "label": "Reply-To"
                    },
                    {
                        "name": "inReplyTo",
                        "type": "text",
                        "label": "In-Reply-To"
                    },
                    {
                        "name": "references",
                        "spec": {
                            "name": "value",
                            "type": "text",
                            "label": "Reference",
                            "required": true
                        },
                        "type": "array",
                        "label": "References"
                    },
                    {
                        "name": "priority",
                        "type": "select",
                        "label": "Priority",
                        "validate": {
                            "enum": [
                                "high",
                                "normal",
                                "low"
                            ]
                        }
                    },
                    {
                        "name": "headers",
                        "spec": [
                            {
                                "name": "key",
                                "type": "text",
                                "label": "Key",
                                "required": true
                            },
                            {
                                "name": "value",
                                "type": "text",
                                "label": "Value",
                                "required": true
                            }
                        ],
                        "type": "array",
                        "label": "Headers"
                    },
                    {
                        "name": "html",
                        "type": "text",
                        "label": "Content"
                    }
                ]
            }
        }
    ],
    "metadata": {
        "instant": false,
        "version": 1,
        "scenario": {
            "roundtrips": 1,
            "maxErrors": 3,
            "autoCommit": true,
            "autoCommitTriggerLast": true,
            "sequential": false,
            "slots": null,
            "confidential": false,
            "dataloss": false,
            "dlq": false,
            "freshVariables": false
        },
        "designer": {
            "orphans": [
                [
                    {
                        "id": 31,
                        "module": "openai-gpt-3:CreateCompletion",
                        "version": 1,
                        "parameters": {
                            "__IMTCONN__": 7361319
                        },
                        "mapper": {
                            "model": "gpt-5-nano",
                            "top_p": "1",
                            "select": "chat",
                            "messages": [
                                {
                                    "role": "system",
                                    "content": "Du er en **LinkedIn Social Intelligence Processor** for SONAT Consulting som transformerer norsk bedrifts-aktivitet på LinkedIn til strukturerte sales opportunities"
                                },
                                {
                                    "role": "system",
                                    "content": "# SONAT LINKEDIN SOCIAL INTELLIGENCE PROCESSOR - AI-MODUL v2.0\n\n## 1. SYSTEM ARKITEKTUR OG ROLLE\n\n### 1.1 Modul-Spesifikk Rolle\nDu er **ANDRE LEDD** i Market Watch-prosesseringskjeden for SONAT Consulting. Du mottar filtrerte LinkedIn-data (score >6) og produserer TRIPLE LINKEDIN STRUCTURE for HTML-template kompatibilitet.\n\n**KRITISK: Dette er ikke den finale rapporten - kun LinkedIn-intelligence for JSON merger-modulen**\n\n**🎨 PDF-VISNING TEKSTBEGRENSNINGER:**\n- LinkedIn post_content: MAKS 500 tegn (7 linjer i PDF)\n- SONAT opportunity: 150-300 tegn (5 linjer i PDF)\n- Lengre tekst blir kuttet av i PDF-visningen!\n\n### 1.2 Social Intelligence Domain Expertise\n**SONAT LinkedIn Opportunity Indicators:**\n- Tech role hiring posts (DevOps, Cloud, AI/ML, Data)\n- Digital transformation announcements  \n- Product launch posts requiring technical scaling\n- Partnership announcements with tech vendors\n- Conference participation in relevant tech events\n- Technical challenge discussions indicating consulting needs\n\n**SONAT tjenester:**\n- Digitalisering\n- Tjenestedesign og UX\n- Maskinlæring og kunstig intelligens\n- VR/AR (virtuell og augmented reality)\n- Teknologirådgivning\n- Systemutvikling\n\n### 1.3 Technical Output Requirements\n- **Format**: Exclusively valid JSON without markdown/comments\n- **First Character**: `{`\n- **Last Character**: `}`\n- **Structure**: MANDATORY Triple LinkedIn arrays for HTML compatibility\n- **Parse Validation**: Must pass JSON.parse() test\n- **Language**: Consistent Norwegian in all text fields\n\n## 2. INPUT EXPECTATION\n\nDu mottar JSON fra LinkedIn filter-modulen:\n```json\n{\n  \"qualifying_posts\": [\n    {\n      \"company_name\": \"[Firmanavn]\",\n      \"post_content\": \"[LinkedIn-innlegg tekst - MAKS 500 tegn for optimal PDF-visning]\",\n      \"post_url\": \"[LinkedIn URL]\",\n      \"post_date\": \"[YYYY-MM-DD]\",\n      \"kategori\": \"[Kategori]\",\n      \"relevans_score\": \"[7-10]\",\n      \"ai_tags\": \"[Array]\",\n      \"sonat_kontakt_grunn\": \"[Begrunnelse]\"\n    }\n  ]\n}\n```\n\n## 3. MANDATORY TRIPLE LINKEDIN STRUCTURE\n\n### 3.1 Root LinkedIn Intelligence Metadata\n```json\n{\n  \"linkedin_intelligence_source\": \"sonat_linkedin_processor_v2\",\n  \"processing_timestamp\": \"[YYYY-MM-DD HH:MM:SS Norwegian time]\",\n  \"total_posts_processed\": \"[INTEGER: from input qualifying_posts count]\",\n  \"unique_companies_monitored\": \"[INTEGER: distinct company count]\",\n  \"high_priority_signals\": \"[INTEGER: posts with priority_class 'hot']\"\n}\n```\n\n### 3.2 Dashboard Summary Metrics\n```json\n{\n  \"linkedin_dashboard\": {\n    \"monitored_accounts_count\": \"[STRING: unique_companies_monitored as string]\",\n    \"high_engagement_count\": \"[STRING: hot-priority posts as string]\", \n    \"hiring_signals_count\": \"[STRING: hiring-related posts as string]\",\n    \"networking_events_count\": \"[STRING: event-related posts as string]\"\n  }\n}\n```\n\n### 3.3 KRITISK: Triple LinkedIn Structure (All 3 MANDATORY)\n\n#### Structure 1: linkedin_posts_pages (Flat Array - HTML Primary)\n```json\n{\n  \"linkedin_posts_pages\": [\n    {\n      \"company_name\": \"[EXACT match from input]\",\n      \"post_date\": \"[EXACT match from input YYYY-MM-DD]\",\n      \"engagement_level\": \"[Høy|Middels|Lav based on relevans_score]\",\n      \"priority_class\": \"[hot (9-10)|warm (7-8)|medium (6-7)]\",\n      \"relevance_score\": \"[EXACT from input]\",\n      \"post_text\": \"[EXACT post_content from input]\",\n      \"post_url\": \"[EXACT from input]\",\n      \"sonat_opportunity\": \"[Transform sonat_kontakt_grunn to 150-300 characters - økt plass i PDF]\",\n      \"opportunity_tags\": \"[Transform ai_tags from input]\",\n      \"engagement_score\": \"[Estimate 50-200 based on priority]\"\n    }\n    // Continue for ALL qualifying_posts from input\n  ]\n}\n```\n\n#### Structure 2: linkedin_pages (Nested Array - HTML Secondary)\n```json\n{\n  \"linkedin_pages\": [\n    [  // Page 1 (first 4 posts)\n      {\n        \"company_name\": \"[Company name]\",\n        \"post_count\": \"[Number of posts for this company]\",\n        \"posts\": [\n          {\n            // IDENTICAL data as linkedin_posts_pages for this company\n            \"post_date\": \"[Same as linkedin_posts_pages]\",\n            \"engagement_level\": \"[Same as linkedin_posts_pages]\",\n            \"priority_class\": \"[Same as linkedin_posts_pages]\",\n            \"relevance_score\": \"[Same as linkedin_posts_pages]\",\n            \"post_text\": \"[Same as linkedin_posts_pages]\",\n            \"post_url\": \"[Same as linkedin_posts_pages]\",\n            \"sonat_opportunity\": \"[Same as linkedin_posts_pages]\",\n            \"opportunity_tags\": \"[Same as linkedin_posts_pages]\"\n          }\n        ]\n      }\n    ],\n    [  // Page 2 (next 4 posts) if needed\n      // Same structure\n    ],\n    [  // Page 3 (next 4 posts) if needed\n      // Same structure  \n    ]\n  ]\n}\n```\n\n#### Structure 3: linkedin_accounts (Flat Company Array - HTML Tertiary)\n```json\n{\n  \"linkedin_accounts\": [\n    {\n      \"company_name\": \"[IDENTICAL to linkedin_pages company names]\",\n      \"post_count\": \"[IDENTICAL to linkedin_pages post counts]\", \n      \"posts\": [\n        {\n          // IDENTICAL data as linkedin_posts_pages for this company\n          \"post_date\": \"[Same as linkedin_posts_pages]\",\n          \"engagement_level\": \"[Same as linkedin_posts_pages]\",\n          \"priority_class\": \"[Same as linkedin_posts_pages]\",\n          \"relevance_score\": \"[Same as linkedin_posts_pages]\",\n          \"post_text\": \"[Same as linkedin_posts_pages]\",\n          \"post_url\": \"[Same as linkedin_posts_pages]\",\n          \"sonat_opportunity\": \"[Same as linkedin_posts_pages]\",\n          \"opportunity_tags\": \"[Same as linkedin_posts_pages]\"\n        }\n      ]\n    }\n    // Continue for ALL companies\n  ]\n}\n```\n\n## 4. DATA TRANSFORMATION RULES\n\n### 4.1 Priority Class Mapping\n```\nrelevans_score 9-10 → priority_class: \"hot\"\nrelevans_score 7-8 → priority_class: \"warm\"  \nrelevans_score 6-7 → priority_class: \"medium\"\n```\n\n### 4.2 Engagement Level Mapping\n```\nrelevans_score 9-10 → engagement_level: \"Høy\"\nrelevans_score 7-8 → engagement_level: \"Middels\"\nrelevans_score 6-7 → engagement_level: \"Lav\"\n```\n\n### 4.3 Content Transformation\n- `post_content` → `post_text` (exact copy)\n- `sonat_kontakt_grunn` → `sonat_opportunity` (reformat to 150-300 characters - økt plass i PDF)\n- `ai_tags` → `opportunity_tags` (exact copy)\n\n## 5. DATA SYNCHRONIZATION VALIDATION\n\n### 5.1 MANDATORY Consistency Checks\n```python\n# All three LinkedIn structures must contain identical data\nassert len(linkedin_posts_pages) == sum(account[\"post_count\"] for account in linkedin_accounts)\n\n# Company names consistent across structures  \npage_companies = set(post[\"company_name\"] for post in linkedin_posts_pages)\naccount_companies = set(account[\"company_name\"] for account in linkedin_accounts)\nassert page_companies == account_companies\n\n# Post data identical across structures\nfor post in linkedin_posts_pages:\n    # Find same post in linkedin_accounts\n    found = False\n    for account in linkedin_accounts:\n        if account[\"company_name\"] == post[\"company_name\"]:\n            for account_post in account[\"posts\"]:\n                if account_post[\"post_url\"] == post[\"post_url\"]:\n                    assert account_post == post  # Identical data\n                    found = True\n    assert found, f\"Post not found in linkedin_accounts: {post['post_url']}\"\n```\n\n## 6. PAGE GROUPING ALGORITHM\n\n### 6.1 linkedin_pages Structure Rules\n- Maximum 4 posts per page\n- Group posts by company when possible\n- Split companies across pages if necessary\n- Maintain chronological order within companies\n\n### 6.2 Example Grouping\n```\nInput: 10 posts from 4 companies\nPage 1: [Company A (2 posts), Company B (2 posts)]\nPage 2: [Company C (3 posts), Company D (1 post)]  \nPage 3: [Company D (2 more posts), Other companies...]\n```\n\n## 7. ERROR HANDLING\n\n### 7.1 Insufficient Input Data\n**If <3 qualifying posts:**\n- Generate minimum viable triple structure\n- Pad with realistic synthetic posts maintaining data consistency\n- Ensure all three structures have identical data\n\n### 7.2 Missing Data Fields\n- Use fallback values maintaining structure consistency\n- Estimate engagement_score: hot=150, warm=100, medium=50\n- Default missing companies to \"Ikke tilgjengelig\"\n\n## 8. EXECUTION SPECIFICATIONS\n\n### 8.1 Processing Algorithm (15-Second Timeline)\n**Phase 1: Input Validation (2 seconds)**\n1. Parse LinkedIn filter input\n2. Validate qualifying_posts structure\n3. Count total posts and companies\n\n**Phase 2: Triple Structure Generation (10 seconds)**\n1. Build linkedin_posts_pages (primary structure)\n2. Group into linkedin_pages (page-based structure)  \n3. Organize linkedin_accounts (company-based structure)\n4. **CRITICAL**: Validate identical data across all three\n\n**Phase 3: Output Validation (3 seconds)**\n1. Execute data synchronization checks\n2. Validate JSON structure and field completeness\n3. Generate dashboard metrics\n4. Output raw JSON for merger module\n\n### 8.2 Success Criteria\n- **Data Consistency**: 100% identical data across triple structures\n- **Structure Completeness**: All three LinkedIn arrays populated\n- **HTML Compatibility**: Structures match template expectations\n- **JSON Validity**: Passes JSON.parse() test\n\n---\n\n**LINKEDIN PROCESSING INITIATION**: Transform filtered LinkedIn data into triple-structure format for HTML template compatibility. Ensure perfect data synchronization across all three LinkedIn arrays."
                                },
                                {
                                    "role": "user",
                                    "content": "INPUT FRA LINKEDIN:\n{{10.text}}"
                                }
                            ],
                            "max_tokens": "0",
                            "temperature": "1",
                            "n_completions": "1",
                            "response_format": "json_object",
                            "parseJSONResponse": false
                        },
                        "metadata": {
                            "designer": {
                                "x": 0,
                                "y": 300,
                                "name": "Linkedin JSON",
                                "messages": [
                                    {
                                        "category": "reference",
                                        "severity": "warning",
                                        "message": "Referenced module 'Tools - Text aggregator' [10] is not accessible."
                                    },
                                    {
                                        "category": "link",
                                        "severity": "warning",
                                        "message": "The module is not connected to the data flow."
                                    }
                                ]
                            },
                            "restore": {
                                "expect": {
                                    "stop": {
                                        "mode": "chose"
                                    },
                                    "model": {
                                        "mode": "chose",
                                        "label": "gpt-5-nano (system)"
                                    },
                                    "select": {
                                        "label": "Create a Chat Completion (GPT and o1 models)"
                                    },
                                    "messages": {
                                        "mode": "chose",
                                        "items": [
                                            {
                                                "role": {
                                                    "mode": "chose",
                                                    "label": "Developer / System"
                                                }
                                            },
                                            {
                                                "role": {
                                                    "mode": "chose",
                                                    "label": "Developer / System"
                                                }
                                            },
                                            {
                                                "role": {
                                                    "mode": "chose",
                                                    "label": "User"
                                                }
                                            }
                                        ]
                                    },
                                    "logit_bias": {
                                        "mode": "chose"
                                    },
                                    "tool_choice": {
                                        "mode": "chose",
                                        "label": "Empty"
                                    },
                                    "response_format": {
                                        "mode": "chose",
                                        "label": "JSON Object"
                                    },
                                    "reasoning_effort": {
                                        "mode": "chose",
                                        "label": "Empty"
                                    },
                                    "parseJSONResponse": {
                                        "mode": "chose"
                                    },
                                    "additionalParameters": {
                                        "mode": "chose"
                                    }
                                },
                                "parameters": {
                                    "__IMTCONN__": {
                                        "data": {
                                            "scoped": "true",
                                            "connection": "openai-gpt-3"
                                        },
                                        "label": "AIKI team"
                                    }
                                }
                            },
                            "parameters": [
                                {
                                    "name": "__IMTCONN__",
                                    "type": "account:openai-gpt-3",
                                    "label": "Connection",
                                    "required": true
                                }
                            ],
                            "expect": [
                                {
                                    "name": "select",
                                    "type": "select",
                                    "label": "Select Method",
                                    "required": true,
                                    "validate": {
                                        "enum": [
                                            "chat",
                                            "prompt"
                                        ]
                                    }
                                },
                                {
                                    "name": "temperature",
                                    "type": "number",
                                    "label": "Temperature",
                                    "validate": {
                                        "max": 2,
                                        "min": 0
                                    }
                                },
                                {
                                    "name": "top_p",
                                    "type": "number",
                                    "label": "Top P",
                                    "validate": {
                                        "max": 1,
                                        "min": 0
                                    }
                                },
                                {
                                    "name": "n_completions",
                                    "type": "number",
                                    "label": "Number"
                                },
                                {
                                    "name": "frequency_penalty",
                                    "type": "number",
                                    "label": "Frequency Penalty",
                                    "validate": {
                                        "max": 2,
                                        "min": -2
                                    }
                                },
                                {
                                    "name": "presence_penalty",
                                    "type": "number",
                                    "label": "Presence Penalty",
                                    "validate": {
                                        "max": 2,
                                        "min": -2
                                    }
                                },
                                {
                                    "name": "logit_bias",
                                    "spec": {
                                        "name": "value",
                                        "spec": [
                                            {
                                                "name": "token",
                                                "type": "text",
                                                "label": "Token ID",
                                                "required": true
                                            },
                                            {
                                                "name": "probability",
                                                "type": "number",
                                                "label": "Probability",
                                                "required": true,
                                                "validate": {
                                                    "max": 100,
                                                    "min": -100
                                                }
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "Token Probability"
                                    },
                                    "type": "array",
                                    "label": "Token Probability"
                                },
                                {
                                    "name": "seed",
                                    "type": "integer",
                                    "label": "Seed"
                                },
                                {
                                    "name": "tool_choice",
                                    "type": "select",
                                    "label": "Tool Choice",
                                    "validate": {
                                        "enum": [
                                            "none",
                                            "auto",
                                            "required"
                                        ]
                                    }
                                },
                                {
                                    "name": "stop",
                                    "spec": {
                                        "name": "value",
                                        "type": "text",
                                        "label": "Stop Sequence"
                                    },
                                    "type": "array",
                                    "label": "Stop Sequences",
                                    "validate": {
                                        "maxItems": 4
                                    }
                                },
                                {
                                    "name": "additionalParameters",
                                    "spec": {
                                        "name": "value",
                                        "spec": [
                                            {
                                                "name": "key",
                                                "type": "text",
                                                "label": "Parameter Name",
                                                "required": true
                                            },
                                            {
                                                "name": "type",
                                                "type": "select",
                                                "label": "Input Type",
                                                "options": [
                                                    {
                                                        "label": "Text",
                                                        "value": "text",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "text",
                                                                "label": "Parameter Value"
                                                            }
                                                        ],
                                                        "default": true
                                                    },
                                                    {
                                                        "label": "Number",
                                                        "value": "number",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "number",
                                                                "label": "Parameter Value"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "label": "Boolean",
                                                        "value": "boolean",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "boolean",
                                                                "label": "Parameter Value"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "label": "Date",
                                                        "value": "date",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "date",
                                                                "label": "Parameter Value"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "label": "Any",
                                                        "value": "any",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "any",
                                                                "label": "Parameter Value"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "Input Parameter"
                                    },
                                    "type": "array",
                                    "label": "Other Input Parameters"
                                },
                                {
                                    "name": "model",
                                    "type": "select",
                                    "label": "Model",
                                    "required": true
                                },
                                {
                                    "name": "max_tokens",
                                    "type": "uinteger",
                                    "label": "Max Completion Tokens"
                                },
                                {
                                    "name": "messages",
                                    "spec": {
                                        "name": "value",
                                        "spec": [
                                            {
                                                "name": "role",
                                                "type": "select",
                                                "label": "Role",
                                                "options": {
                                                    "store": [
                                                        {
                                                            "label": "User",
                                                            "value": "user",
                                                            "nested": [
                                                                {
                                                                    "help": "Text content of the message on behalf of the selected __Role__.",
                                                                    "name": "content",
                                                                    "type": "text",
                                                                    "label": "Text Content"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "label": "Assistant",
                                                            "value": "assistant",
                                                            "nested": [
                                                                {
                                                                    "help": "Text content of the message on behalf of the selected __Role__.",
                                                                    "name": "content",
                                                                    "type": "text",
                                                                    "label": "Text Content"
                                                                },
                                                                {
                                                                    "mode": "edit",
                                                                    "name": "tool_calls",
                                                                    "spec": {
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "hidden",
                                                                                "default": "function"
                                                                            },
                                                                            {
                                                                                "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "Tool call ID"
                                                                            },
                                                                            {
                                                                                "name": "function",
                                                                                "spec": [
                                                                                    {
                                                                                        "help": "The name of the function previously called.",
                                                                                        "name": "name",
                                                                                        "type": "text",
                                                                                        "label": "Name",
                                                                                        "required": true
                                                                                    },
                                                                                    {
                                                                                        "help": "The arguments previously output by the AI.",
                                                                                        "name": "arguments",
                                                                                        "type": "text",
                                                                                        "label": "Arguments",
                                                                                        "required": true
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Function"
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Tool Call"
                                                                    },
                                                                    "type": "array",
                                                                    "label": "Tool Calls",
                                                                    "labels": {
                                                                        "add": "Add tool call"
                                                                    },
                                                                    "mappable": {
                                                                        "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "label": "Developer / System",
                                                            "value": "system",
                                                            "nested": [
                                                                {
                                                                    "help": "Text content of the message on behalf of the selected __Role__.",
                                                                    "name": "content",
                                                                    "type": "text",
                                                                    "label": "Text Content"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "label": "Tool",
                                                            "value": "tool",
                                                            "nested": [
                                                                {
                                                                    "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                                    "name": "content",
                                                                    "type": "text",
                                                                    "label": "Text Content",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                    "name": "tool_call_id",
                                                                    "type": "text",
                                                                    "label": "Tool Call ID.",
                                                                    "required": true
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "required": true
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "Message"
                                    },
                                    "type": "array",
                                    "label": "Messages",
                                    "required": true
                                },
                                {
                                    "name": "response_format",
                                    "type": "select",
                                    "label": "Response Format",
                                    "validate": {
                                        "enum": [
                                            "text",
                                            "json_object"
                                        ]
                                    }
                                },
                                {
                                    "name": "reasoning_effort",
                                    "type": "select",
                                    "label": "Reasoning Effort",
                                    "validate": {
                                        "enum": [
                                            "minimal",
                                            "low",
                                            "medium",
                                            "high"
                                        ]
                                    }
                                },
                                {
                                    "name": "parseJSONResponse",
                                    "type": "boolean",
                                    "label": "Parse JSON Response",
                                    "required": true
                                }
                            ],
                            "interface": [
                                {
                                    "name": "result",
                                    "type": "any",
                                    "label": "Result"
                                },
                                {
                                    "name": "id",
                                    "type": "text",
                                    "label": "ID"
                                },
                                {
                                    "name": "object",
                                    "type": "text",
                                    "label": "Object"
                                },
                                {
                                    "name": "created",
                                    "type": "date",
                                    "label": "Created"
                                },
                                {
                                    "name": "model",
                                    "type": "text",
                                    "label": "Model"
                                },
                                {
                                    "name": "choices",
                                    "spec": [
                                        {
                                            "name": "text",
                                            "type": "text",
                                            "label": "Text"
                                        },
                                        {
                                            "name": "index",
                                            "type": "number",
                                            "label": "Index"
                                        },
                                        {
                                            "name": "logprobs",
                                            "type": "text",
                                            "label": "Log Probs"
                                        },
                                        {
                                            "name": "finish_reason",
                                            "type": "text",
                                            "label": "Finish Reason"
                                        },
                                        {
                                            "name": "message",
                                            "spec": [
                                                {
                                                    "name": "role",
                                                    "type": "text",
                                                    "label": "Role"
                                                },
                                                {
                                                    "name": "content",
                                                    "type": "text",
                                                    "label": "Content"
                                                },
                                                {
                                                    "name": "tool_calls",
                                                    "spec": [
                                                        {
                                                            "name": "id",
                                                            "type": "text",
                                                            "label": "ID"
                                                        },
                                                        {
                                                            "name": "type",
                                                            "type": "text",
                                                            "label": "Type"
                                                        },
                                                        {
                                                            "name": "function",
                                                            "spec": [
                                                                {
                                                                    "name": "name",
                                                                    "type": "text",
                                                                    "label": "Name"
                                                                },
                                                                {
                                                                    "name": "arguments",
                                                                    "type": "text",
                                                                    "label": "Arguments"
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Function"
                                                        }
                                                    ],
                                                    "type": "array",
                                                    "label": "Tool Calls"
                                                },
                                                {
                                                    "name": "refusal",
                                                    "type": "text",
                                                    "label": "Refusal"
                                                },
                                                {
                                                    "name": "annotations",
                                                    "spec": [
                                                        {
                                                            "name": "type",
                                                            "type": "text",
                                                            "label": "Type"
                                                        },
                                                        {
                                                            "name": "url_citation",
                                                            "spec": [
                                                                {
                                                                    "name": "end_index",
                                                                    "type": "number",
                                                                    "label": "End Index"
                                                                },
                                                                {
                                                                    "name": "start_index",
                                                                    "type": "number",
                                                                    "label": "Start Index"
                                                                },
                                                                {
                                                                    "name": "title",
                                                                    "type": "text",
                                                                    "label": "Title"
                                                                },
                                                                {
                                                                    "name": "url",
                                                                    "type": "text",
                                                                    "label": "URL"
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "URL Citation"
                                                        }
                                                    ],
                                                    "type": "array",
                                                    "label": "Annotations"
                                                }
                                            ],
                                            "type": "collection",
                                            "label": "Message"
                                        }
                                    ],
                                    "type": "array",
                                    "label": "Choices"
                                },
                                {
                                    "name": "usage",
                                    "spec": [
                                        {
                                            "name": "prompt_tokens",
                                            "type": "number",
                                            "label": "Prompt Tokens"
                                        },
                                        {
                                            "name": "completion_tokens",
                                            "type": "text",
                                            "label": "Completion Tokens"
                                        },
                                        {
                                            "name": "total_tokens",
                                            "type": "number",
                                            "label": "Total Tokens"
                                        },
                                        {
                                            "name": "prompt_tokens_details",
                                            "spec": [
                                                {
                                                    "name": "cached_tokens",
                                                    "type": "uinteger",
                                                    "label": "Cached Tokens"
                                                },
                                                {
                                                    "name": "text_tokens",
                                                    "type": "uinteger",
                                                    "label": "Text Tokens"
                                                },
                                                {
                                                    "name": "image_tokens",
                                                    "type": "uinteger",
                                                    "label": "Image Tokens"
                                                },
                                                {
                                                    "name": "audio_tokens",
                                                    "type": "uinteger",
                                                    "label": "Audio Tokens"
                                                }
                                            ],
                                            "type": "collection",
                                            "label": "Prompt Tokens Details"
                                        },
                                        {
                                            "name": "completion_tokens_details",
                                            "spec": [
                                                {
                                                    "name": "reasoning_tokens",
                                                    "type": "uinteger",
                                                    "label": "Reasoning Tokens"
                                                },
                                                {
                                                    "name": "text_tokens",
                                                    "type": "uinteger",
                                                    "label": "Text Tokens"
                                                },
                                                {
                                                    "name": "audio_tokens",
                                                    "type": "uinteger",
                                                    "label": "Audio Tokens"
                                                },
                                                {
                                                    "name": "accepted_prediction_tokens",
                                                    "type": "uinteger",
                                                    "label": "Accepted Prediction Tokens"
                                                },
                                                {
                                                    "name": "rejected_prediction_tokens",
                                                    "type": "uinteger",
                                                    "label": "Rejected Prediction Tokens"
                                                }
                                            ],
                                            "type": "collection",
                                            "label": "Completion Tokens Details"
                                        }
                                    ],
                                    "type": "collection",
                                    "label": "Usage"
                                },
                                {
                                    "name": "service_tier",
                                    "type": "text",
                                    "label": "Service Tier"
                                },
                                {
                                    "name": "system_fingerprint",
                                    "type": "text",
                                    "label": "System Fingerprint"
                                }
                            ],
                            "advanced": true
                        }
                    },
                    {
                        "id": 23,
                        "module": "anthropic-claude:createAMessage",
                        "version": 1,
                        "parameters": {
                            "__IMTCONN__": 7073506
                        },
                        "mapper": {
                            "model": "claude-sonnet-4-20250514",
                            "messages": [
                                {
                                    "role": "user",
                                    "content": [
                                        {
                                            "text": "# SONAT NEWS INTELLIGENCE PROCESSOR - AI-MODUL v2.0\n\n## 1. SYSTEM ARKITEKTUR OG ROLLE\n\n### 1.1 Modul-Spesifikk Rolle\nDu er **FØRSTE LEDD** i Market Watch-prosesseringskjeden for SONAT Consulting. Din oppgave er å transformere norsk teknologi-nyhetsdata til strukturerte bedriftsprofiler for videre prosessering.\n\n**🚨 KRITISKE BEGRENSNINGER - FØLG NØYE:**\n- MAKSIMUM 12 bedrifter totalt - ALDRI mer!\n- MINIMUM 6 n_tier1 bedrifter (kritiske)  \n- INGEN duplikater - sjekk navn case-insensitive\n- STOPP når du har 12 bedrifter!\n\n**KRITISK: Dette er ikke den finale rapporten - kun rådata for JSON merger-modulen**\n\n### 1.2 Domain Expertise Requirements\nSONAT tilbyr tjenester innen:\n- Digitalisering\n- Tjenestedesign og UX \n- Maskinlæring og kunstig intelligens\n- VR/AR (virtuell og augmented reality)\n- Teknologirådgivning\n- Systemutvikling\n\n**Target Company Profile:**\n- Norske tech-selskaper ≥15 ansatte\n- Årlig revenue ≥10M NOK\n- Sektorer: Bank/Fintech, Maritime, Media, Health, Telecom, Olje/Gass\n- Active growth/funding/digital transformation signals\n\n### 1.3 Technical Output Mandate\n- **Format**: Exclusively valid JSON without markdown/comments\n- **First Character**: `{`\n- **Last Character**: `}`\n- **Parse Validation**: Must pass JSON.parse() test\n- **Language**: Consistent Norwegian in all text fields\n- **Purpose**: RAW DATA for JSON merger - ikke ferdig rapport\n\n## 2. INPUT DATA PROCESSING FRAMEWORK\n\n### 2.1 Expected Input Structure Pattern\n```\n[Nyhetssak rad: X/Y]\nKilde: [E24|DN|Finansavisen|TU|FinancialTribune|Digi|ITWatch]\nDato: [YYYY-MM-DD]\nTittel: [Article headline]\nSammendrag: [150-300 word business summary]  \nURL: [Article link]\nForfatter: [Author name or \"Ikke oppgitt\"]\nKategori: [Finans|Teknologi|Business|M&A|Funding|Ekspansjon|Diverse]\nRelevans_Score: [1-10 SONAT relevance pre-score]\nAI_Tags: [Array of relevant tags]\n```\n\n## 3. SONAT RELEVANCE SCORING MATRIX\n\n### 3.1 Scoring Framework (1-10 Scale)\n\n**N_TIER1 (Score 9-10) - Kritiske leads:**\n- Capital raising ≥50M NOK with explicit tech focus\n- C-level tech appointments (CTO, CDO, Chief Data Officer)\n- AI/ML/Cloud transformation projects announced\n- IPO preparations or M&A activity for tech companies\n- >500 employees with digital modernization initiatives\n\n**N_TIER2 (Score 7-8) - Høy prioritet:**\n- Significant growth >50% or major expansion plans  \n- Tech role hiring sprees (DevOps, Cloud, Data Engineering)\n- Strategic partnerships with technology vendors\n- Product launches requiring scalable infrastructure\n- 100-500 employees in priority sectors\n\n**N_TIER3 (Score 5-6) - Kvalifiserte leads:**\n- General business growth in relevant industries\n- Minor technology upgrades or modernization\n- 50-100 employees showing growth signals\n- Industry positioning suggesting future tech needs\n\n**EXCLUDE (Score 1-4):**\n- Skip entirely - ikke inkluder i output\n\n### 3.2 SCORING STRATEGY - VIKTIG!\n**GENERØS SCORING PÅKREVD:**\n- Hvis i tvil, score HØYERE ikke lavere\n- Bedre med flere kandidater enn for få\n- Tenk langsiktig potensial, ikke kun umiddelbar match\n- Alle tech-selskaper med vekst bør få minimum score 6 (n_tier3)\n- Finansierte selskaper automatisk score 7+ (n_tier2 eller n_tier1)\n\n## 4. JSON OUTPUT STRUCTURE FOR MERGER\n\n```json\n{  \n  \"news_companies\": [\n    {\n      \"name\": \"[REQUIRED: Exact legal company name including AS/ASA - NO DUPLICATES!]\",\n      \"sector\": \"[REQUIRED: Primary industry in UPPERCASE - FINTECH|MARITIME|MEDIA|HEALTH|TELECOM|TECHNOLOGY|ENERGY]\",\n      \"employee_count\": \"[REQUIRED: INTEGER employee count - minimum 15 for inclusion]\",\n      \"location\": \"[REQUIRED: Primary city location - Oslo|Bergen|Trondheim|Stavanger|etc.]\",\n      \"priority_tier\": \"[REQUIRED: 'n_tier1' (9-10) | 'n_tier2' (7-8) | 'n_tier3' (5-6)]\",\n      \"relevance_score\": \"[REQUIRED: INTEGER 5-10 only - BE GENEROUS with scoring]\",\n      \n      \"event_type\": \"[REQUIRED: FUNDING|EXPANSION|LEADERSHIP|PARTNERSHIP|PRODUCT_LAUNCH|IPO|M&A]\",\n      \"event_date\": \"[REQUIRED: YYYY-MM-DD event date]\", \n      \"event_description\": \"[REQUIRED: 300-500 characters detailed event description]\",\n      \n      \"ceo_name\": \"[REQUIRED: Full name of CEO/Managing Director - research if needed]\",\n      \"email\": \"[REQUIRED: Business email or estimate 'kontakt@bedriftsnavn.no']\",\n      \"phone\": \"[REQUIRED: +47 XXXXXXXX format or 'Ikke tilgjengelig']\",\n      \"website_url\": \"[REQUIRED: Full https:// URL or estimate 'https://www.bedriftsnavn.no']\",\n      \n      \"funding_amount_nok\": \"[REQUIRED: 'XXX M NOK'|'Ikke oppgitt']\",\n      \"funding_round\": \"[REQUIRED: 'Serie A'|'Serie B'|'Serie C'|'Growth Capital'|'IPO'|'Operational']\",\n      \n      \"source_name\": \"[REQUIRED: E24|DN|Finansavisen|TU|etc.]\",\n      \"source_url\": \"[REQUIRED: Full URL to original article]\", \n      \"source_author\": \"[REQUIRED: Journalist name or 'Ikke oppgitt']\",\n      \"source_date\": \"[REQUIRED: YYYY-MM-DD publication date]\",\n      \n      \"technical_needs\": \"[REQUIRED: 150-300 characters tech needs for SONAT]\",\n      \"technical_needs_list\": \"[REQUIRED: Array of 3-5 specific tech needs]\",\n      \"growth_indicators_list\": \"[REQUIRED: Array of 3-5 growth signals]\",\n      \"sonat_relevance\": \"[REQUIRED: 150-250 characters why perfect SONAT match]\",\n      \"relevance_tags\": \"[REQUIRED: Array of 3-5 technical tags]\"\n    }\n  ],\n  \n  \"news_summary\": {\n    \"total_funding_identified_mnok\": \"[INTEGER: sum of funding amounts]\",\n    \"most_active_sectors\": \"[Array of top 3 sectors]\",\n    \"n_tier1_count\": \"[INTEGER: companies with score 9-10]\",\n    \"n_tier2_count\": \"[INTEGER: companies with score 7-8]\",\n    \"n_tier3_count\": \"[INTEGER: companies with score 5-6]\"\n  }\n}\n```\n\n## 5. PROCESSING ALGORITHM\n\n### 5.1 Phase 1: Data Ingestion (3 seconds)\n1. Parse all article inputs and extract Y-values\n2. Calculate total_articles_processed\n3. Validate article structure and data quality\n\n### 5.2 Phase 2: Company Analysis (12 seconds)  \n1. Extract company mentions and business events\n2. Apply SONAT relevance scoring matrix - BE GENEROUS with scoring\n3. **EXCLUDE companies with score < 5**\n4. **ANTI-DUPLIKAT CHECK: Sammenlign bedriftsnavn case-insensitive**\n5. Categorize into n_tier1/n_tier2/n_tier3 tiers\n6. Generate technical needs and business cases\n7. **ENSURE MINIMUM COUNTS: 4 n_tier1, 2 n_tier2, 2+ n_tier3**\n\n### 5.3 Phase 3: Output Generation (5 seconds)\n1. Structure all qualified companies (score ≥5) \n2. Generate summary statistics\n3. Validate JSON syntax and required fields\n4. Output raw JSON for merger module\n\n## 6. QUALITY GATES\n\n**Minimum Output Requirements:**\n- NØYAKTIG 8-12 companies total - STOPP VED 12!\n- MINIMUM 6 n_tier1 companies (økt fra 4)\n- MINIMUM 2 n_tier2 companies  \n- 🚨 STOPP PROSESSERING VED 12 BEDRIFTER 🚨\n- All companies must have score ≥5\n- All required fields populated with realistic data\n- Valid JSON structure for merger consumption\n- NO DUPLICATES - sammenlign bedriftsnavn case-insensitive\n\n**Business Logic Validation:**\n- N_tier1 (9-10): Must have substantial funding/growth indicators\n- N_tier2 (7-8): Clear business potential with tech angle\n- N_tier3 (5-6): Realistic opportunity with SONAT relevance\n\n---\n\n**PROCESSING INITIATION**: Analyser input news data og generer strukturerte bedriftsprofiler for JSON merger. Fokuser på kvalitet over kvantitet - bedre med færre høykvalitets profiler enn mange svake kandidater.",
                                            "type": "text"
                                        },
                                        {
                                            "text": "Totalt antall: {{54.value}}\nINPUT DATA FRA NYHETER:\n{{3.text}}",
                                            "type": "text"
                                        }
                                    ]
                                }
                            ],
                            "metadata": {},
                            "max_tokens": "64000",
                            "temperature": "1"
                        },
                        "metadata": {
                            "designer": {
                                "x": 300,
                                "y": 300,
                                "name": "News JSON",
                                "messages": [
                                    {
                                        "category": "reference",
                                        "severity": "warning",
                                        "message": "Referenced module 'Tools - Text aggregator' [3] is not accessible."
                                    },
                                    {
                                        "category": "reference",
                                        "severity": "warning",
                                        "message": "Referenced module 'Google Sheets - Get a Cell' [54] is not accessible."
                                    }
                                ]
                            },
                            "restore": {
                                "expect": {
                                    "model": {
                                        "mode": "chose",
                                        "label": "Claude Sonnet 4"
                                    },
                                    "messages": {
                                        "mode": "chose",
                                        "items": [
                                            {
                                                "role": {
                                                    "mode": "chose",
                                                    "label": "User"
                                                },
                                                "content": {
                                                    "mode": "chose",
                                                    "items": [
                                                        {
                                                            "type": {
                                                                "mode": "chose",
                                                                "label": "Text"
                                                            }
                                                        },
                                                        {
                                                            "type": {
                                                                "mode": "chose",
                                                                "label": "Text"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    },
                                    "stop_sequences": {
                                        "mode": "chose"
                                    },
                                    "additionalParameters": {
                                        "mode": "chose"
                                    }
                                },
                                "parameters": {
                                    "__IMTCONN__": {
                                        "data": {
                                            "scoped": "true",
                                            "connection": "anthropic-claude"
                                        },
                                        "label": "AIKI"
                                    }
                                }
                            },
                            "parameters": [
                                {
                                    "name": "__IMTCONN__",
                                    "type": "account:anthropic-claude",
                                    "label": "Connection",
                                    "required": true
                                }
                            ],
                            "expect": [
                                {
                                    "name": "model",
                                    "type": "select",
                                    "label": "Model",
                                    "required": true
                                },
                                {
                                    "name": "max_tokens",
                                    "type": "uinteger",
                                    "label": "Max Tokens",
                                    "required": true
                                },
                                {
                                    "name": "messages",
                                    "spec": {
                                        "name": "value",
                                        "spec": [
                                            {
                                                "name": "role",
                                                "type": "select",
                                                "label": "Role",
                                                "options": [
                                                    {
                                                        "label": "User",
                                                        "value": "user",
                                                        "nested": [
                                                            {
                                                                "name": "content",
                                                                "spec": {
                                                                    "spec": [
                                                                        {
                                                                            "help": "For models that support image content blocks (vision), see the [Anthropic model comparison table](https://docs.anthropic.com/en/docs/about-claude/models#model-comparison-table).",
                                                                            "name": "type",
                                                                            "type": "select",
                                                                            "label": "Type",
                                                                            "options": [
                                                                                {
                                                                                    "label": "Text",
                                                                                    "value": "text",
                                                                                    "nested": [
                                                                                        {
                                                                                            "help": "Content of the message on behalf of the selected **Role** .",
                                                                                            "name": "text",
                                                                                            "type": "text",
                                                                                            "label": "Text",
                                                                                            "required": true
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Image",
                                                                                    "value": "image",
                                                                                    "nested": [
                                                                                        {
                                                                                            "name": "source",
                                                                                            "spec": [
                                                                                                {
                                                                                                    "help": "File name, including the extension, for example, `image.jpg`.",
                                                                                                    "name": "filename",
                                                                                                    "type": "filename",
                                                                                                    "label": "Filename",
                                                                                                    "required": true,
                                                                                                    "semantic": "file:name",
                                                                                                    "extension": [
                                                                                                        "jpeg",
                                                                                                        "jpg",
                                                                                                        "png",
                                                                                                        "gif",
                                                                                                        "webp"
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "help": "Binary data of the image. For example, you can retrieve the binary data of your image using the **HTTP: Get a file** module.",
                                                                                                    "name": "data",
                                                                                                    "type": "buffer",
                                                                                                    "label": "Data",
                                                                                                    "required": true,
                                                                                                    "semantic": "file:data"
                                                                                                }
                                                                                            ],
                                                                                            "type": "collection",
                                                                                            "label": "Source",
                                                                                            "required": true
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "PDF document",
                                                                                    "value": "document",
                                                                                    "nested": [
                                                                                        "rpc://anthropic-claude/1/notePdfDocument",
                                                                                        {
                                                                                            "name": "pdfFileName",
                                                                                            "type": "filename",
                                                                                            "label": "Filename",
                                                                                            "required": true,
                                                                                            "semantic": "file:name",
                                                                                            "extension": [
                                                                                                "pdf"
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "name": "pdfFileData",
                                                                                            "type": "buffer",
                                                                                            "label": "Data",
                                                                                            "required": true,
                                                                                            "semantic": "file:data"
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Tool result",
                                                                                    "value": "tool_result",
                                                                                    "nested": [
                                                                                        {
                                                                                            "name": "tool_use_id",
                                                                                            "type": "text",
                                                                                            "label": "Tool Use ID",
                                                                                            "required": true
                                                                                        },
                                                                                        {
                                                                                            "name": "content",
                                                                                            "type": "text",
                                                                                            "label": "Content",
                                                                                            "required": true
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "required": true
                                                                        }
                                                                    ],
                                                                    "type": "collection",
                                                                    "label": "Content"
                                                                },
                                                                "type": "array",
                                                                "label": "Content",
                                                                "labels": {
                                                                    "add": "Add content"
                                                                },
                                                                "required": true
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "label": "Assistant",
                                                        "value": "assistant",
                                                        "nested": [
                                                            {
                                                                "help": "If the request ends with an assistant turn, then the response content will continue directly from that last turn.",
                                                                "name": "content",
                                                                "type": "text",
                                                                "label": "Content",
                                                                "required": true
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "label": "Tool Assistant",
                                                        "value": "tool_assistant",
                                                        "nested": [
                                                            {
                                                                "name": "content",
                                                                "spec": {
                                                                    "spec": [
                                                                        {
                                                                            "help": "You can send image content blocks starting with Claude 3 models.",
                                                                            "name": "type",
                                                                            "type": "select",
                                                                            "label": "Type",
                                                                            "options": [
                                                                                {
                                                                                    "label": "Text",
                                                                                    "value": "text",
                                                                                    "nested": [
                                                                                        {
                                                                                            "help": "Content of the message on behalf of the selected **Role** .",
                                                                                            "name": "text",
                                                                                            "type": "text",
                                                                                            "label": "Text",
                                                                                            "required": true
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Tool Use",
                                                                                    "value": "tool_use",
                                                                                    "nested": [
                                                                                        {
                                                                                            "name": "id",
                                                                                            "type": "text",
                                                                                            "label": "Tool Use ID",
                                                                                            "required": true
                                                                                        },
                                                                                        {
                                                                                            "name": "name",
                                                                                            "type": "text",
                                                                                            "label": "Tool Name",
                                                                                            "required": true
                                                                                        },
                                                                                        {
                                                                                            "name": "input",
                                                                                            "type": "any",
                                                                                            "label": "Input",
                                                                                            "required": true
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "required": true
                                                                        }
                                                                    ],
                                                                    "type": "collection",
                                                                    "label": "Content"
                                                                },
                                                                "type": "array",
                                                                "label": "Content",
                                                                "labels": {
                                                                    "add": "Add content"
                                                                },
                                                                "required": true
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "required": true
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "Message"
                                    },
                                    "type": "array",
                                    "label": "Messages",
                                    "required": true
                                },
                                {
                                    "name": "system",
                                    "type": "text",
                                    "label": "System Prompt"
                                },
                                {
                                    "name": "metadata",
                                    "spec": [
                                        {
                                            "name": "user_id",
                                            "type": "text",
                                            "label": "User ID"
                                        }
                                    ],
                                    "type": "collection",
                                    "label": "Metadata"
                                },
                                {
                                    "name": "stop_sequences",
                                    "spec": {
                                        "name": "value",
                                        "type": "text",
                                        "label": "Stop Sequence"
                                    },
                                    "type": "array",
                                    "label": "Stop Sequences"
                                },
                                {
                                    "name": "temperature",
                                    "type": "number",
                                    "label": "Temperature",
                                    "validate": {
                                        "max": 1,
                                        "min": 0
                                    }
                                },
                                {
                                    "name": "top_p",
                                    "type": "number",
                                    "label": "Top P",
                                    "validate": {
                                        "max": 1
                                    }
                                },
                                {
                                    "name": "top_k",
                                    "type": "uinteger",
                                    "label": "Top K"
                                },
                                {
                                    "name": "additionalParameters",
                                    "spec": {
                                        "name": "value",
                                        "spec": [
                                            {
                                                "name": "key",
                                                "type": "text",
                                                "label": "Parameter Name",
                                                "required": true
                                            },
                                            {
                                                "name": "type",
                                                "type": "select",
                                                "label": "Input Type",
                                                "options": [
                                                    {
                                                        "label": "Text",
                                                        "value": "text",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "text",
                                                                "label": "Parameter Value"
                                                            }
                                                        ],
                                                        "default": true
                                                    },
                                                    {
                                                        "label": "Number",
                                                        "value": "number",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "number",
                                                                "label": "Parameter Value"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "label": "Boolean",
                                                        "value": "boolean",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "boolean",
                                                                "label": "Parameter Value"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "label": "Date",
                                                        "value": "date",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "date",
                                                                "label": "Parameter Value"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "label": "Tools",
                                                        "value": "tools",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "spec": {
                                                                    "type": "text",
                                                                    "label": "Parameter Value"
                                                                },
                                                                "type": "array",
                                                                "label": "Parameter Values",
                                                                "labels": {
                                                                    "add": "Add parameter value"
                                                                }
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "label": "Any",
                                                        "value": "any",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "any",
                                                                "label": "Parameter Value"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "Input Parameter"
                                    },
                                    "type": "array",
                                    "label": "Other Input Parameters"
                                }
                            ]
                        }
                    },
                    {
                        "id": 30,
                        "module": "openai-gpt-3:CreateCompletion",
                        "version": 1,
                        "parameters": {
                            "__IMTCONN__": 7361319
                        },
                        "mapper": {
                            "model": "gpt-5",
                            "top_p": "1",
                            "select": "chat",
                            "messages": [
                                {
                                    "role": "system",
                                    "content": "Du er en JSON Intelligence Merger for SONAT Consulting som kombinerer separate news- og LinkedIn-intelligence outputs til en komplett Market Watch-rapport"
                                },
                                {
                                    "role": "system",
                                    "content": "​\n\n# SONAT MARKET WATCH JSON MERGER - AI-MODUL v2.0\n\n## 1. SYSTEM ARKITEKTUR OG ROLLE\n\n### 1.1 Final Module Role\nDu er **SISTE LEDD** i Market Watch-prosesseringskjeden for SONAT Consulting. Du mottar:\n1. **News Intelligence** fra nyheter-modulen \n2. **LinkedIn Intelligence** fra LinkedIn-prosessor-modulen\n\n**🚨 ABSOLUTTE GRENSER - OVERSKRID ALDRI:**\n- MAKSIMUM 14 total_companies - STOPP VED 14!\n- MAKSIMUM 6 n_tier1 companies (critical)\n- MAKSIMUM 12 LinkedIn poster - KUTT OVERFLØDIG DATA!\n- INGEN duplikater - strict case-insensitive sjekk\n\n**🎨 PDF-VISNING TEKSTBEGRENSNINGER:**\n- LinkedIn post_text: MAKS 500 tegn (7 linjer i PDF)\n- SONAT opportunity: 150-300 tegn (5 linjer i PDF)\n- Lengre tekst blir kuttet av - hold deg innenfor grensene!\n\nDin oppgave er å produsere den **KOMPLETTE Market Watch JSON-rapporten** som sendes direkte til HTML-template for PDF-generering.\n\n### 1.2 Integration Responsibility\n**KRITISK: Dette er den FINALE rapporten** som må inneholde:\n- Minimum 8, MAKSIMUM 14 totale bedrifter (redusert fra 16)\n- Minimum 6 kritiske bedrifter (økt fra 4)  \n- MAKSIMUM 12 LinkedIn-poster (3 sider à 4 poster) - KUTT OVERFLØDIG!\n- IDENTISKE data i alle LinkedIn-strukturer\n- Komplette arrays for alle seksjoner\n\n## 2. INPUT EXPECTATION\n\n### 2.1 News Intelligence Input\n```json\n{\n  \"news_intelligence_source\": \"sonat_news_processor_v2\",\n  \"news_companies\": [\n    {\n      \"name\": \"Bedrift AS\",\n      \"priority_tier\": \"n_tier1|n_tier2|n_tier3\",\n      \"relevance_score\": 5-10,\n      // ... complete company data\n    }\n  ],\n  \"news_summary\": { /* summary data */ }\n}\n```\n\n### 2.2 LinkedIn Intelligence Input  \n```json\n{\n  \"linkedin_intelligence_source\": \"sonat_linkedin_processor_v2\",\n  \"linkedin_posts_pages\": [ /* 12 posts flat */ ],\n  \"linkedin_pages\": [ /* 3 pages nested */ ],\n  \"linkedin_accounts\": [ /* company-grouped */ ],\n  \"linkedin_dashboard\": { /* metrics */ }\n}\n```\n\n## 3. FINAL MARKET WATCH JSON STRUCTURE\n\n```json\n{\n  \"report_generated\": \"DD. måned YYYY\",\n  // FORKLARING: Dagens dato på norsk format, f.eks. \"15. desember 2024\"\n  \n  \"total_pages\": \"[CALCULATED: Based on content]\",\n  // FORKLARING: Totalt antall sider i PDF-rapporten. Beregn basert på: \n  // - 1 forside + 1 sammendrag + antall bedriftssider + 3 LinkedIn-sider + strategisider\n  // - Hver kritisk bedrift = 1 side, qualified bedrifter = mindre plass\n  \n  \"total_companies\": \"[CALCULATED: critical + qualified count]\",\n  // FORKLARING: Totalt antall bedrifter i rapporten (critical_companies.length + qualified_companies.length)\n  // MÅ VÆRE: Minimum 8, maksimum 16 bedrifter totalt\n  \n  \"leads\": \"[SAME as total_companies]\",\n  // FORKLARING: Identisk med total_companies - dette er samme tall bare annet navn\n  \n  \"high_priority_leads\": \"[COUNT of critical_companies]\",\n  // FORKLARING: Antall bedrifter i critical_companies array\n  // MÅ VÆRE: Minimum 4 kritiske leads, skriv som tall f.eks. \"6\"\n  \n  \"immediate_opportunities_count\": \"[COUNT of critical_companies]\",\n  // FORKLARING: Samme som high_priority_leads - antall kritiske bedrifter som krever umiddelbar handling\n  // MÅ VÆRE: Samme tall som high_priority_leads, skriv som tall f.eks. \"6\"\n  \n  \"banner_text\": \"Denne uken identifiserte vi [total_companies] aktive bedrifter i det norske markedet, hvorav [high_priority_leads] representerer umiddelbare salgsmuligheter. Sterk aktivitet innen [most_active_sectors].\",\n  // FORKLARING: Hovedtekst på forsiden. Erstatt:\n  // - [total_companies] med faktisk tall (f.eks. \"12\")  \n  // - [high_priority_leads] med antall kritiske (f.eks. \"6\")\n  // - [most_active_sectors] med 2-3 mest aktive sektorer fra news_summary\n  \n  \"critical_section_title\": \"Kritiske leads - Umiddelbar kontakt\",\n  // FORKLARING: Fast tittel for kritiske bedrifter-seksjonen - ikke endre\n  \n  \"critical_section_badge\": \"Høy prioritet\",\n  // FORKLARING: Fast badge-tekst for kritiske bedrifter - ikke endre\n  \n  \"key_findings\": [\n    // FORKLARING: 4-5 viktigste markedsfunn basert på analyserte data (økt fra 2-3)\n    {\n      \"number\": 1,\n      // FORKLARING: Alltid 1 for første funn\n      \n      \"priority_class\": \"critical\",\n      // FORKLARING: Prioritetsnivå - bruk \"critical\" for viktigste funn\n      \n      \"text\": \"Konkret markedsfunn basert på news/LinkedIn intelligence (150-300 tegn)\"\n      // FORKLARING: Konkret, handlingsrettet funn basert på faktiske data fra news_summary eller LinkedIn\n      // EKSEMPEL: \"8 teknologiselskaper har fått finansiering på til sammen 200M NOK denne måneden - alle trenger cloud-migrering og skalering\"\n    },\n    {\n      \"number\": 2, \n      // FORKLARING: Alltid 2 for andre funn\n      \n      \"priority_class\": \"critical\",\n      // FORKLARING: Også \"critical\" for andre viktigste funn\n      \n      \"text\": \"Andre kritiske funn fra dataanalysen\"\n      // FORKLARING: Andre kritiske markedstrender eller muligheter\n      // EKSEMPEL: \"Massiv ansettelsesaktivitet innen AI/ML hos 12 bedrifter - indikerer ekspansjonsfase og akutt tekniske behov\"\n    },\n    {\n      \"number\": 3,\n      // FORKLARING: Alltid 3 for tredje funn\n      \n      \"priority_class\": \"high\", \n      // FORKLARING: Høy prioritet for tredje funn\n      \n      \"text\": \"Tredje hovedfunn med høy relevans\"\n      // FORKLARING: Viktig markedsinnsikt eller strategisk observasjon\n      // EKSEMPEL: \"LinkedIn viser 40% økning i DevOps-stillinger - bedrifter trenger umiddelbar infrastruktur-støtte\"\n    },\n    {\n      \"number\": 4,\n      // FORKLARING: Alltid 4 for fjerde funn\n      \n      \"priority_class\": \"high\",\n      // FORKLARING: Høy prioritet for fjerde funn\n      \n      \"text\": \"Fjerde viktige markedstrend\"\n      // FORKLARING: Ytterligere viktig markedsinnsikt\n      // EKSEMPEL: \"Geografisk konsentrasjon i Oslo-området (75%) - mulighet for effektiv lokal tilstedeværelse\"\n    },\n    {\n      \"number\": 5,\n      // FORKLARING: Alltid 5 for femte funn (valgfritt - kan utelates hvis kun 4 funn)\n      \n      \"priority_class\": \"medium\",\n      // FORKLARING: Medium prioritet for femte funn\n      \n      \"text\": \"Femte strategiske observasjon\"\n      // FORKLARING: Strategisk markedsinnsikt eller langsiktig trend\n      // EKSEMPEL: \"Økning i fintech M&A-aktivitet indikerer konsolideringsfase - mulighet for integrasjonsprosjekter\"\n    }\n  ],\n  \n  \"critical_companies\": [\n    // FORKLARING: Array med minimum 6, maksimum 16 n_tier1 bedrifter som krever umiddelbar handling\n    // VIKTIG: Hvis færre enn 6 n_tier1 i input, promoter høyeste n_tier2 bedrifter til n_tier1\n    {\n      \"name\": \"[FROM news_companies where priority_tier='n_tier1']\",\n      // FORKLARING: Bedriftsnavn fra news_companies data, f.eks. \"TechCorp AS\"\n      \n      \"website_url\": \"[FROM news_companies]\",\n      // FORKLARING: Bedriftens hjemmeside URL, f.eks. \"https://techcorp.no\"\n      // HVIS MANGLER: Bruk \"https://www.bedriftsnavn.no\" (estimat)\n      \n      \"sector\": \"[FROM news_companies]\", \n      // FORKLARING: Bransje/sektor, f.eks. \"Teknologi\", \"Fintech\", \"E-handel\"\n      \n      \"employee_count\": \"[FROM news_companies]\",\n      // FORKLARING: Antall ansatte som tall eller range, f.eks. \"50-100\" eller \"250\"\n      \n      \"location\": \"[FROM news_companies]\",\n      // FORKLARING: Geografisk lokasjon, f.eks. \"Oslo\", \"Bergen\", \"Trondheim\"\n      \n      \"priority_score\": \"[FROM relevance_score]\",\n      // FORKLARING: Relevans-score fra news_companies (1-10), høyere = viktigere\n      // BRUK: Det faktiske tallet fra relevance_score feltet\n      \n      \"event_type\": \"[FROM news_companies]\",\n      // FORKLARING: Type hendelse, f.eks. \"Finansieringsrunde\", \"Oppkjøp\", \"Ekspansjon\", \"Ny lederansettelse\"\n      \n      \"event_description\": \"[FROM news_companies]\",\n      // FORKLARING: Detaljert beskrivelse av hendelsen som gjør bedriften relevant nå\n      // EKSEMPEL: \"Har fått 50M NOK i serie A-finansiering for å skalere AI-plattformen\"\n      \n      \"ceo_name\": \"[FROM news_companies]\",\n      // FORKLARING: CEO/daglig leder navn, f.eks. \"Kari Nordmann\"\n      // HVIS MANGLER: Bruk \"Ikke tilgjengelig\"\n      \n      \"email\": \"[FROM news_companies]\", \n      // FORKLARING: Kontakt-epost, fortrinnsvis CEO eller salgsansvarlig\n      // HVIS MANGLER: Bruk \"kontakt@bedriftsnavn.no\" (estimat)\n      \n      \"phone\": \"[FROM news_companies]\",\n      // FORKLARING: Telefonnummer, f.eks. \"+47 12 34 56 78\"\n      // HVIS MANGLER: Bruk \"Ikke tilgjengelig\"\n      \n      \"funding_amount_nok\": \"[FROM news_companies]\",\n      // FORKLARING: Finansieringsbeløp i NOK, f.eks. \"50000000\" for 50M\n      // HVIS IKKE RELEVANT: Bruk \"0\" eller null\n      \n      \"funding_round\": \"[FROM news_companies]\",\n      // FORKLARING: Type finansieringsrunde, f.eks. \"Serie A\", \"Seed\", \"Serie B\"\n      // HVIS IKKE RELEVANT: Bruk \"N/A\"\n      \n      \"technical_needs\": \"[FROM news_companies]\",\n      // FORKLARING: Tekstbeskrivelse av tekniske behov bedriften har\n      // EKSEMPEL: \"Trenger cloud-migrering og AI/ML-implementering for skalering\"\n      \n      \"technical_needs_list\": \"[FROM news_companies]\",\n      // FORKLARING: Array med spesifikke tekniske behov\n      // EKSEMPEL: [\"Cloud migrering\", \"AI/ML utvikling\", \"DevOps optimering\"]\n      \n      \"growth_indicators_list\": \"[FROM news_companies]\",\n      // FORKLARING: Array med vekstsignaler\n      // EKSEMPEL: [\"Ny finansiering\", \"Ansetter 20 utviklere\", \"Ekspanderer til Europa\"]\n      \n      \"source_name\": \"[FROM news_companies]\",\n      // FORKLARING: Navn på nyhetskilde, f.eks. \"DN\", \"E24\", \"TU\"\n      \n      \"source_url\": \"[FROM news_companies]\",\n      // FORKLARING: URL til opprinnelig nyhet/kilde\n      \n      \"sonat_relevance\": \"[FROM news_companies]\",\n      // FORKLARING: Hvorfor bedriften er relevant for SONAT spesifikt\n      // EKSEMPEL: \"Trenger cloud-arkitektur og DevOps-ekspertise for å håndtere vekst etter finansieringsrunden\"\n      \n      \"relevance_tags\": \"[FROM news_companies]\"\n      // FORKLARING: Array med relevans-tags\n      // EKSEMPEL: [\"cloud\", \"fintech\", \"scaling\", \"devops\"]\n    }\n    // KRITISK REGEL: MINIMUM 6 n_tier1 companies - hvis færre, promoter n_tier2 bedrifter\n    // MAKSIMUM: 16 bedrifter i denne listen\n  ],\n  \n  \"qualified_companies\": [\n    // FORKLARING: Array med bedrifter som er interessante men ikke kritiske (priority_tier='n_tier2' eller 'n_tier3')\n    // FORMÅL: Fylle ut til totalt 12-16 bedrifter i rapporten\n    {\n      \"name\": \"[FROM news_companies where priority_tier='n_tier2'|'n_tier3']\",\n      // FORKLARING: Bedriftsnavn fra news_companies med høy eller qualified prioritet\n      \n      \"website_url\": \"[FROM news_companies]\",\n      // FORKLARING: Bedriftens hjemmeside URL\n      // HVIS MANGLER: Estimer basert på bedriftsnavn\n      \n      \"sector\": \"[FROM news_companies]\",\n      // FORKLARING: Bransje/sektor bedriften opererer i\n      \n      \"employee_count\": \"[FROM news_companies]\",\n      // FORKLARING: Antall ansatte (tall eller range)\n      \n      \"location\": \"[FROM news_companies]\",\n      // FORKLARING: Geografisk lokasjon\n      \n      \"event_type\": \"[FROM news_companies]\",\n      // FORKLARING: Type hendelse som gjør bedriften interessant\n      \n      \"event_description\": \"[FROM news_companies]\",\n      // FORKLARING: Beskrivelse av hendelsen/nyheten\n      \n      \"technical_needs\": \"[FROM news_companies]\",\n      // FORKLARING: Tekniske behov bedriften har\n      \n      \"sonat_opportunity\": \"[TRANSFORM from sonat_relevance to 100-200 characters]\"\n      // FORKLARING: Kort sammendrag (100-200 tegn) av muligheten for SONAT\n      // EKSEMPEL: \"Voksende e-handelsplattform som trenger skalerbar cloud-arkitektur og DevOps-optimering\"\n    }\n    // REGEL: Fyll ut til totalt 12-16 bedrifter (n_tier1 + n_tier2 + n_tier3)\n  ],\n  \n  \"monitored_accounts_count\": \"[FROM linkedin_dashboard]\",\n  // FORKLARING: Antall LinkedIn-kontoer som overvåkes, f.eks. \"45\"\n  // HENT FRA: linkedin_input.linkedin_dashboard.monitored_accounts_count\n  \n  \"high_engagement_count\": \"[FROM linkedin_dashboard]\",\n  // FORKLARING: Antall kontoer med høy engagement, f.eks. \"12\"\n  // HENT FRA: linkedin_input.linkedin_dashboard.high_engagement_count\n  \n  \"hiring_signals_count\": \"[FROM linkedin_dashboard]\", \n  // FORKLARING: Antall bedrifter som viser ansettelsessignaler, f.eks. \"8\"\n  // HENT FRA: linkedin_input.linkedin_dashboard.hiring_signals_count\n  \n  \"networking_events_count\": \"[FROM linkedin_dashboard]\",\n  // FORKLARING: Antall networking-events identifisert, f.eks. \"3\"\n  // HENT FRA: linkedin_input.linkedin_dashboard.networking_events_count\n  \n  \"linkedin_posts_pages\": \"[EXACT COPY from LinkedIn input]\",\n  // FORKLARING: EKSAKT KOPI av linkedin_input.linkedin_posts_pages array\n  // VIKTIG: Ikke endre innholdet - bare kopier direkte over\n  // PROBLEM: Hvis denne mangler eller er tom, bruk linkedin_posts_flat eller generer fra andre LinkedIn-data\n  \n  \"total_posts\": \"[COUNT of linkedin_posts_pages]\",\n  // FORKLARING: Antall LinkedIn-poster totalt, f.eks. \"12\"\n  // BEREGN: Antall elementer i linkedin_posts_pages array\n  // FALLBACK: Hvis linkedin_posts_pages mangler, tell fra andre LinkedIn-strukturer\n  \n  \"linkedin_pages\": \"[EXACT COPY from LinkedIn input OR GENERATE]\", \n  // FORKLARING: EKSAKT KOPI av linkedin_input.linkedin_pages array\n  // VIKTIG: Hvis mangler i input, generer 3 sider med 4 poster hver fra linkedin_posts_pages\n  // STRUKTUR: [{\"page_number\": 1, \"posts\": [post1, post2, post3, post4]}, {...}, {...}]\n  \n  \"linkedin_accounts\": \"[EXACT COPY from LinkedIn input OR GENERATE]\",\n  // FORKLARING: EKSAKT KOPI av linkedin_input.linkedin_accounts array  \n  // VIKTIG: Hvis mangler, generer fra linkedin_posts_pages ved å gruppere etter company_name\n  // STRUKTUR: [{\"company_name\": \"Bedrift AS\", \"posts\": [...], \"engagement_score\": X, \"hiring_signals\": true/false}]\n  \n  \"top_opportunities_title\": \"TOPP 3 MULIGHETER DENNE UKEN\",\n  // FORKLARING: Fast tittel - ikke endre\n  \n  \"top_opportunities\": [\n    // FORKLARING: De 3 beste mulighetene rangert etter priority_score\n    {\n      \"number\": 1,\n      // FORKLARING: Alltid 1 for beste mulighet\n      \n      \"company_name\": \"[TOP critical company by priority_score]\",\n      // FORKLARING: Navn på bedrift med høyest priority_score fra critical_companies\n      \n      \"potential_value\": \"[GENERATE based on sector and funding: 'X-Y M NOK potensial']\",\n      // FORKLARING: Estimert prosjektverdi basert på sektor og størrelse\n      // EKSEMPEL: \"2-5M NOK potensial\" (teknologi), \"5-15M NOK potensial\" (stor bedrift)\n      \n      \"recommended_action\": \"Ring CEO [ceo_name] på [phone] innen 48 timer - [specific urgency reason]\",\n      // FORKLARING: Konkret handling med ekte kontaktinfo fra bedriftsdata\n      // EKSEMPEL: \"Ring CEO Kari Nordmann på +47 12 34 56 78 innen 48 timer - finansieringsrunden krever rask teknisk skalering\"\n      \n      \"priority_level\": \"critical\",\n      // FORKLARING: Alltid \"critical\" for nummer 1\n      \n      \"urgency_indicator\": \"RING NÅ\"\n      // FORKLARING: Alltid \"RING NÅ\" for nummer 1\n    },\n    {\n      \"number\": 2,\n      // FORKLARING: Alltid 2 for andre beste mulighet\n      \n      \"company_name\": \"[SECOND highest priority company]\",\n      // FORKLARING: Navn på bedrift med nest høyest priority_score\n      \n      \"potential_value\": \"[GENERATE estimated project value]\",\n      // FORKLARING: Estimert prosjektverdi basert på bedriftens størrelse og behov\n      \n      \"recommended_action\": \"[GENERATE specific action with contact info]\",\n      // FORKLARING: Spesifikk handling med kontaktinfo hvis tilgjengelig\n      // EKSEMPEL: \"Send tilbud til CTO på johndoe@techcorp.no om cloud-migrering\"\n      \n      \"priority_level\": \"high\", \n      // FORKLARING: Alltid \"high\" for nummer 2\n      \n      \"urgency_indicator\": \"DENNE UKE\"\n      // FORKLARING: Alltid \"DENNE UKE\" for nummer 2\n    },\n    {\n      \"number\": 3,\n      // FORKLARING: Alltid 3 for tredje beste mulighet\n      \n      \"company_name\": \"[THIRD highest priority company]\",\n      // FORKLARING: Navn på bedrift med tredje høyest priority_score\n      \n      \"potential_value\": \"[GENERATE estimated project value]\",\n      // FORKLARING: Estimert prosjektverdi\n      \n      \"recommended_action\": \"[GENERATE specific action]\",\n      // FORKLARING: Passende handling for denne prioriteten\n      // EKSEMPEL: \"Følg opp med LinkedIn-melding til lederteam\"\n      \n      \"priority_level\": \"high\",\n      // FORKLARING: \"high\" for nummer 3\n      \n      \"urgency_indicator\": \"DENNE MÅNEDEN\"\n      // FORKLARING: Alltid \"DENNE MÅNEDEN\" for nummer 3\n    }\n  ],\n  \n  \"strategic_recommendations\": [\n    // FORKLARING: 5 strategiske anbefalinger basert på markedsdata og trender\n    {\n      \"title\": \"[GENERATE based on sector trends from news_summary]\",\n      // FORKLARING: Tittel basert på sektortrender fra news_summary\n      // EKSEMPEL: \"Teknologi-sektoren dominerer finansieringsaktivitet\"\n      \n      \"content\": \"[150-300 tegn anbefaling basert på markedsdata]\"\n      // FORKLARING: Konkret anbefaling på 150-300 tegn\n      // EKSEMPEL: \"Med 60% av finansieringen innen teknologi bør SONAT prioritere cloud- og AI-tjenester. Fokuser på startups som nettopp har fått funding og trenger skalerbar arkitektur.\"\n    },\n    {\n      \"title\": \"[GENERATE based on LinkedIn trends]\", \n      // FORKLARING: Tittel basert på LinkedIn-aktivitet og signaler\n      // EKSEMPEL: \"Økt ansettelsesaktivitet signaliserer vekstfase\"\n      \n      \"content\": \"[150-300 tegn anbefaling basert på LinkedIn-signaler]\"\n      // FORKLARING: Anbefaling basert på LinkedIn-data\n      // EKSEMPEL: \"LinkedIn viser stor ansettelsesaktivitet innen utviklerroller. Bedrifter som ansetter 10+ utviklere trenger DevOps og cloud-infrastruktur støtte.\"\n    },\n    {\n      \"title\": \"[GENERATE based on funding trends]\",\n      // FORKLARING: Tittel om finansieringstrender\n      // EKSEMPEL: \"Serie A-runder skaper umiddelbare tekniske behov\"\n      \n      \"content\": \"[150-300 tegn anbefaling basert på finansieringsaktivitet]\"\n      // FORKLARING: Anbefaling om hvordan SONAT kan utnytte finansieringstrender\n      // EKSEMPEL: \"Bedrifter i Serie A-fase har kapital til store tekniske investeringer. Kontakt innen 30 dager etter finansieringsannonsering for best respons.\"\n    },\n    {\n      \"title\": \"[GENERATE based on geographic distribution]\",\n      // FORKLARING: Tittel om geografisk fordeling av muligheter\n      // EKSEMPEL: \"Oslo-regionen konsentrerer 70% av mulighetene\"\n      \n      \"content\": \"[150-300 tegn anbefaling basert på geografisk spredning]\"\n      // FORKLARING: Geografisk strategi for SONAT\n      // EKSEMPEL: \"Høy konsentrasjon i Oslo-området tillater effektiv face-to-face salg. Vurder lokal tilstedeværelse i Bergen for å fange opp voksende tech-scene.\"\n    },\n    {\n      \"title\": \"[GENERATE based on technical needs patterns]\",\n      // FORKLARING: Tittel om tekniske behov-mønstre\n      // EKSEMPEL: \"Cloud-migrering og DevOps er dominerende behov\"\n      \n      \"content\": \"[150-300 tegn anbefaling basert på tekniske trender]\"\n      // FORKLARING: Anbefaling om tekniske tjenester SONAT bør fokusere på\n      // EKSEMPEL: \"80% av bedriftene trenger cloud-migrering og DevOps-optimering. Utvikle standardiserte pakker for rask leveranse til voksende bedrifter.\"\n    }\n  ],\n  \n  \"action_items\": [\n    // FORKLARING: 7 konkrete handlingspunkter prioritert etter viktighet og tidslinje\n    {\n      \"number\": 1,\n      // FORKLARING: Alltid 1 for første og viktigste handling\n      \n      \"priority\": \"critical\",\n      // FORKLARING: Alltid \"critical\" for nummer 1 og 2\n      \n      \"timeline\": \"Denne uken\", \n      // FORKLARING: \"Denne uken\" for kritiske handlinger\n      \n      \"action\": \"Kontakt [company] ang. [specific need] - [contact]: [email] / [phone]\"\n      // FORKLARING: Konkret handling med ekte bedriftsnavn og kontaktinfo\n      // EKSEMPEL: \"Kontakt TechCorp AS ang. cloud-migrering etter finansieringsrunde - Kari Nordmann: kari@techcorp.no / +47 12 34 56 78\"\n    },\n    {\n      \"number\": 2,\n      // FORKLARING: Alltid 2 for andre viktigste handling\n      \n      \"priority\": \"critical\",\n      // FORKLARING: \"critical\" for nummer 2\n      \n      \"timeline\": \"Denne uken\",\n      // FORKLARING: \"Denne uken\" for kritiske handlinger\n      \n      \"action\": \"[GENERATE from second highest priority company]\"\n      // FORKLARING: Konkret handling for nest viktigste bedrift\n      // EKSEMPEL: \"Send tilbud til FinTech Solutions om DevOps-optimering - kontakt CTO på john@fintech.no\"\n    },\n    {\n      \"number\": 3,\n      // FORKLARING: Alltid 3 for tredje handling\n      \n      \"priority\": \"high\",\n      // FORKLARING: \"high\" for nummer 3 og 4\n      \n      \"timeline\": \"Neste uke\",\n      // FORKLARING: \"Neste uke\" for høy prioritet handlinger\n      \n      \"action\": \"[GENERATE from LinkedIn hot signals]\"\n      // FORKLARING: Handling basert på LinkedIn-signaler (ansettelser, aktivitet)\n      // EKSEMPEL: \"Følg opp med DataCorp som ansetter 15 utviklere - tilby cloud-arkitektur workshop\"\n    },\n    {\n      \"number\": 4,\n      // FORKLARING: Alltid 4 for fjerde handling\n      \n      \"priority\": \"high\", \n      // FORKLARING: \"high\" for nummer 4\n      \n      \"timeline\": \"Neste uke\",\n      // FORKLARING: \"Neste uke\" for høy prioritet\n      \n      \"action\": \"[GENERATE from news intelligence]\"\n      // FORKLARING: Handling basert på nyhetsintelligens\n      // EKSEMPEL: \"Kontakt E-commerce Plus etter oppkjøpsannonsering - tilby integrasjonsekspertise\"\n    },\n    {\n      \"number\": 5,\n      // FORKLARING: Alltid 5 for femte handling\n      \n      \"priority\": \"medium\",\n      // FORKLARING: \"medium\" for nummer 5, 6 og 7\n      \n      \"timeline\": \"Denne måneden\",\n      // FORKLARING: \"Denne måneden\" for medium prioritet\n      \n      \"action\": \"[GENERATE from qualified companies]\"\n      // FORKLARING: Handling for qualified companies\n      // EKSEMPEL: \"Oppfølging med GrowthCorp om langsiktig teknologipartnerskap\"\n    },\n    {\n      \"number\": 6,\n      // FORKLARING: Alltid 6 for sjette handling\n      \n      \"priority\": \"medium\",\n      // FORKLARING: \"medium\" prioritet\n      \n      \"timeline\": \"Denne måneden\", \n      // FORKLARING: \"Denne måneden\" for medium prioritet\n      \n      \"action\": \"[GENERATE follow-up action]\"\n      // FORKLARING: Oppfølgingshandling\n      // EKSEMPEL: \"Organiser tech-meetup for å bygge relasjoner med identifiserte prospects\"\n    },\n    {\n      \"number\": 7,\n      // FORKLARING: Alltid 7 for syvende handling\n      \n      \"priority\": \"medium\",\n      // FORKLARING: \"medium\" prioritet\n      \n      \"timeline\": \"Neste måned\",\n      // FORKLARING: \"Neste måned\" for laveste prioritet\n      \n      \"action\": \"[GENERATE strategic action]\"\n      // FORKLARING: Strategisk eller langsiktig handling\n      // EKSEMPEL: \"Utvikle bransjespesifikke case studies basert på identifiserte markedstrender\"\n    }\n  ],\n  \n  \"weekly_actions\": [\n    // FORKLARING: 7 dager med spesifikke handlinger og målselskaper\n    {\n      \"day_number\": 1,\n      // FORKLARING: Alltid 1 for mandag\n      \n      \"day_label\": \"MANDAG\", \n      // FORKLARING: Alltid \"MANDAG\" for dag 1\n      \n      \"action_description\": \"Prioriterte oppfølginger etter helgen\",\n      // FORKLARING: Beskrivelse av dagens fokusområde\n      \n      \"target_companies\": \"[NUMBER] kritiske leads\"\n      // FORKLARING: Antall kritiske bedrifter å fokusere på\n      // EKSEMPEL: \"4 kritiske leads\" (basert på antall critical_companies)\n    },\n    {\n      \"day_number\": 2,\n      // FORKLARING: Alltid 2 for tirsdag\n      \n      \"day_label\": \"TIRSDAG\",\n      // FORKLARING: Alltid \"TIRSDAG\" for dag 2\n      \n      \"action_description\": \"LinkedIn hot signal oppfølging\", \n      // FORKLARING: Fokus på LinkedIn-baserte muligheter\n      \n      \"target_companies\": \"[NUMBER] LinkedIn-identifiserte leads\"\n      // FORKLARING: Antall bedrifter identifisert via LinkedIn\n      // BEREGN: Basert på hiring_signals_count eller high_engagement_count\n    },\n    {\n      \"day_number\": 3,\n      // FORKLARING: Alltid 3 for onsdag\n      \n      \"day_label\": \"ONSDAG\",\n      // FORKLARING: Alltid \"ONSDAG\" for dag 3\n      \n      \"action_description\": \"Møter og presentasjoner med top prospects\",\n      // FORKLARING: Fokus på møter med viktigste prospects\n      \n      \"target_companies\": \"[NUMBER] critical companies\"\n      // FORKLARING: Antall kritiske bedrifter for møter\n      // BRUK: Samme som antall critical_companies\n    },\n    {\n      \"day_number\": 4,\n      // FORKLARING: Alltid 4 for torsdag\n      \n      \"day_label\": \"TORSDAG\", \n      // FORKLARING: Alltid \"TORSDAG\" for dag 4\n      \n      \"action_description\": \"Oppfølging av funding-runde selskaper\",\n      // FORKLARING: Fokus på bedrifter som har fått finansiering\n      \n      \"target_companies\": \"[NUMBER] finansierte bedrifter\"\n      // FORKLARING: Antall bedrifter med funding_amount_nok > 0\n      // BEREGN: Tell bedrifter i critical_companies med finansiering\n    },\n    {\n      \"day_number\": 5,\n      // FORKLARING: Alltid 5 for fredag\n      \n      \"day_label\": \"FREDAG\",\n      // FORKLARING: Alltid \"FREDAG\" for dag 5\n      \n      \"action_description\": \"Ukesavslutning og planlegging\", \n      // FORKLARING: Oppsummering og planlegging\n      \n      \"target_companies\": \"Rapportering og neste ukes prioriteringer\"\n      // FORKLARING: Fast tekst for fredag - ikke tall\n    },\n    {\n      \"day_number\": 6,\n      // FORKLARING: Alltid 6 for lørdag\n      \n      \"day_label\": \"LØRDAG\",\n      // FORKLARING: Alltid \"LØRDAG\" for dag 6\n      \n      \"action_description\": \"Research og forberedelser\",\n      // FORKLARING: Forskningsaktiviteter\n      \n      \"target_companies\": \"Markedsanalyse og konkurranseovervåkning\"\n      // FORKLARING: Fast tekst for lørdag - ikke tall\n    },\n    {\n      \"day_number\": 7,\n      // FORKLARING: Alltid 7 for søndag\n      \n      \"day_label\": \"SØNDAG\", \n      // FORKLARING: Alltid \"SØNDAG\" for dag 7\n      \n      \"action_description\": \"Strategisk planlegging\",\n      // FORKLARING: Strategiske aktiviteter\n      \n      \"target_companies\": \"Langsiktig strategiutvikling\"\n      // FORKLARING: Fast tekst for søndag - ikke tall\n    }\n  ]\n}\n```\n\n## 4. KRITISKE REGLER FOR TALL OG TELLINGER\n\n### 4.1 Obligatoriske Tall som MÅ Inkluderes\n**VIKTIG: Alle tall må være faktiske numeriske verdier, IKKE tekst som \"[COUNT]\" eller \"[NUMBER]\"**\n\n```json\n{\n  \"total_companies\": 14,           // TALL - ikke \"[CALCULATED]\" (MINIMUM 12, MAKS 16)\n  \"leads\": 14,                     // SAMME som total_companies\n  \"high_priority_leads\": 6,        // TALL - antall n_tier1 companies (MINIMUM 6)\n  \"immediate_opportunities_count\": 6, // SAMME som high_priority_leads\n  \"total_posts\": 12,               // TALL - antall LinkedIn-poster\n  \"monitored_accounts_count\": 45,  // TALL fra LinkedIn dashboard\n  \"high_engagement_count\": 12,     // TALL fra LinkedIn dashboard\n  \"hiring_signals_count\": 8,       // TALL fra LinkedIn dashboard\n  \"networking_events_count\": 3     // TALL fra LinkedIn dashboard\n}\n```\n\n### 4.2 Beregningsregler\n1. **total_companies** = n_tier1_companies.length + n_tier2_companies.length + n_tier3_companies.length (MINIMUM 12, MAKS 16)\n2. **high_priority_leads** = n_tier1_companies.length (MINIMUM 6, ikke 4)\n3. **immediate_opportunities_count** = samme som high_priority_leads\n4. **total_posts** = linkedin_posts_pages.length\n5. **Alle LinkedIn-tall** = kopier eksakte tall fra linkedin_dashboard\n\n### 4.3 ANTI-DUPLIKAT REGLER - KRITISK!\n**INGEN DUPLIKATER TILLATT:**\n- Sammenlign bedriftsnavn case-insensitive (SPORVEIEN AS = sporveien as)\n- Fjern duplikater FØR telling av totals\n- Hvis duplikater fjernes, fyll opp med nye unike bedrifter\n- Valider at alle bedriftsnavn er unike i final output\n\n### 4.3 Tekstlige Referanser til Tall\nNår tall refereres i tekst, bruk de faktiske tallene:\n```\n\"banner_text\": \"Denne uken identifiserte vi 12 aktive bedrifter i det norske markedet, hvorav 6 representerer umiddelbare salgsmuligheter.\"\n\n\"target_companies\": \"4 kritiske leads\"  // Ikke \"[NUMBER] kritiske leads\"\n```\n\n## 5. DATA MERGER ALGORITHM\n\n### 5.1 Company Prioritization Logic\n```python\n# Step 1: Extract companies by priority\nn_tier1_candidates = [c for c in news_companies if c[\"priority_tier\"] == \"n_tier1\"]\nn_tier2_candidates = [c for c in news_companies if c[\"priority_tier\"] == \"n_tier2\"] \nn_tier3_candidates = [c for c in news_companies if c[\"priority_tier\"] == \"n_tier3\"]\n\n# Step 2: ANTI-DUPLIKAT FILTER - KRITISK!\ndef remove_duplicates(companies_list):\n    seen_names = set()\n    unique_companies = []\n    for company in companies_list:\n        company_name = company[\"name\"].strip().upper()\n        if company_name not in seen_names:\n            seen_names.add(company_name)\n            unique_companies.append(company)\n    return unique_companies\n\n# Apply deduplication to all lists\nn_tier1_candidates = remove_duplicates(n_tier1_candidates)\nn_tier2_candidates = remove_duplicates(n_tier2_candidates)\nn_tier3_candidates = remove_duplicates(n_tier3_candidates)\n\n# Step 3: Ensure minimum 6 n_tier1 companies (økt fra 4)\nif len(n_tier1_candidates) < 6:\n    # Promote highest-scoring n_tier2 companies to n_tier1\n    n_tier2_sorted = sorted(n_tier2_candidates, key=lambda x: x[\"relevance_score\"], reverse=True)\n    promote_count = 6 - len(n_tier1_candidates)\n    critical_companies = n_tier1_candidates + n_tier2_sorted[:promote_count]\n    remaining_n_tier2 = n_tier2_sorted[promote_count:]\nelse:\n    critical_companies = sorted(n_tier1_candidates, key=lambda x: x[\"relevance_score\"], reverse=True)[:8]\n    remaining_n_tier2 = n_tier2_candidates\n\n# Step 4: Fill qualified_companies to reach 12-16 total (økt minimum)\nremaining_slots = max(12 - len(critical_companies), 6)  # Minimum 6 qualified\nqualified_companies = (remaining_n_tier2 + n_tier3_candidates)[:remaining_slots]\n\n# Step 5: Final deduplication across all lists\nall_companies = critical_companies + qualified_companies\nall_companies = remove_duplicates(all_companies)\n\n# Step 6: Redistribute if duplicates were removed\nif len(all_companies) < 12:\n    # Add more companies from remaining candidates\n    remaining_candidates = [c for c in (n_tier2_candidates + n_tier3_candidates) \n                          if c[\"name\"].strip().upper() not in [comp[\"name\"].strip().upper() for comp in all_companies]]\n    needed = 12 - len(all_companies)\n    all_companies.extend(remaining_candidates[:needed])\n\n# Step 7: Split back into critical and qualified\ncritical_companies = all_companies[:max(6, len(critical_companies))]\nqualified_companies = all_companies[len(critical_companies):]\n```\n\n### 5.2 Content Generation Rules\n**Banner Text Generation:**\n```python\ntotal = len(critical_companies) + len(qualified_companies)\nhigh_priority = len(critical_companies)\nsectors = extract_top_sectors(news_summary[\"most_active_sectors\"])\nbanner = f\"Denne uken identifiserte vi {total} aktive bedrifter i det norske markedet, hvorav {high_priority} representerer umiddelbare salgsmuligheter. Sterk aktivitet innen {', '.join(sectors[:2])} og {sectors[2] if len(sectors) > 2 else 'teknologi'}.\"\n```\n\n**Key Findings Generation:**\n1. Analyze funding patterns from news_summary\n2. Identify hiring trends from LinkedIn data  \n3. Extract geographic/sector concentrations\n4. Generate 2-3 actionable insights for SONAT\n\n## 6. LINKEDIN DATA PRESERVATION\n\n### 6.0 LinkedIn Data Trimming - KRITISK!\n```python\n# 🚨 KUTT LINKEDIN DATA TIL MAKSIMUM 12 POSTER\ndef trim_linkedin_data(linkedin_input):\n    posts = linkedin_input.get(\"linkedin_posts_pages\", [])\n    \n    # Ta kun de 12 første postene - KUTT RESTEN!\n    trimmed_posts = posts[:12]\n    \n    # Generer nye strukturer basert på trimmed data\n    # KRITISK: Standardiser feltnavn - alltid bruk post_text\n    for post in trimmed_posts:\n        if 'post_content' in post and 'post_text' not in post:\n            post['post_text'] = post['post_content']\n        elif 'post_text' not in post and 'post_content' not in post:\n            post['post_text'] = post.get('post_content', '')\n        \n        # 🎨 TEKSTLENGDE VALIDERING FOR PDF\n        if len(post.get('post_text', '')) > 500:\n            post['post_text'] = post['post_text'][:497] + \"...\"\n        if len(post.get('sonat_opportunity', '')) > 300:\n            post['sonat_opportunity'] = post['sonat_opportunity'][:297] + \"...\"\n    \n    linkedin_pages = [\n        {\"page_number\": 1, \"posts\": trimmed_posts[0:4]},\n        {\"page_number\": 2, \"posts\": trimmed_posts[4:8]},\n        {\"page_number\": 3, \"posts\": trimmed_posts[8:12]}\n    ]\n    \n    # Grupper accounts (unike bedrifter)\n    seen_companies = set()\n    linkedin_accounts = []\n    for post in trimmed_posts:\n        company = post.get(\"company_name\", \"\").strip()\n        if company and company.upper() not in seen_companies:\n            seen_companies.add(company.upper())\n            linkedin_accounts.append({\n                \"company_name\": company,\n                \"posts\": [p for p in trimmed_posts if p.get(\"company_name\") == company],\n                \"engagement_score\": post.get(\"engagement_score\", 100)\n            })\n    \n    return {\n        \"linkedin_posts_pages\": trimmed_posts,  # MAX 12\n        \"linkedin_pages\": linkedin_pages,       # 3 sider\n        \"linkedin_accounts\": linkedin_accounts  # Unike bedrifter\n    }\n```\n\n### 6.1 Exact Copy Requirements\n```python\n# MANDATORY: Preserve exact LinkedIn structures OR generate if missing\nif \"linkedin_posts_pages\" in linkedin_input and linkedin_input[\"linkedin_posts_pages\"]:\n    # 🚨 TRIM FØRST - MAKSIMUM 12 POSTER!\n    trimmed_data = trim_linkedin_data(linkedin_input)\n    output[\"linkedin_posts_pages\"] = trimmed_data[\"linkedin_posts_pages\"]  # MAX 12\n    output[\"linkedin_pages\"] = trimmed_data[\"linkedin_pages\"]               # 3 sider\n    output[\"linkedin_accounts\"] = trimmed_data[\"linkedin_accounts\"]         # Unike\n    output[\"total_posts\"] = len(trimmed_data[\"linkedin_posts_pages\"])       # MAX 12\nelse:\n    # FALLBACK: Use alternative LinkedIn data structures\n    output[\"linkedin_posts_pages\"] = linkedin_input.get(\"linkedin_posts_flat\", [])\n    output[\"total_posts\"] = len(output[\"linkedin_posts_pages\"])\n\n# Handle linkedin_pages - generate if missing\nif \"linkedin_pages\" in linkedin_input and linkedin_input[\"linkedin_pages\"]:\n    output[\"linkedin_pages\"] = linkedin_input[\"linkedin_pages\"]  # Exact copy\nelse:\n    # Generate 3 pages from linkedin_posts_pages\n    posts = output[\"linkedin_posts_pages\"]\n    pages = []\n    for i in range(0, len(posts), 4):\n        pages.append({\n            \"page_number\": len(pages) + 1,\n            \"posts\": posts[i:i+4]\n        })\n    output[\"linkedin_pages\"] = pages[:3]  # Maximum 3 pages\n\n# Handle linkedin_accounts - generate if missing  \nif \"linkedin_accounts\" in linkedin_input and linkedin_input[\"linkedin_accounts\"]:\n    output[\"linkedin_accounts\"] = linkedin_input[\"linkedin_accounts\"]  # Exact copy\nelse:\n    # Generate from linkedin_posts_pages by grouping by company\n    from collections import defaultdict\n    accounts = defaultdict(list)\n    for post in output[\"linkedin_posts_pages\"]:\n        if \"company_name\" in post:\n            accounts[post[\"company_name\"]].append(post)\n    \n    output[\"linkedin_accounts\"] = [\n        {\n            \"company_name\": company,\n            \"posts\": posts,\n            \"engagement_score\": len(posts) * 2,  # Simple scoring\n            \"hiring_signals\": any(\"hiring\" in post.get(\"ai_tags\", []) for post in posts)\n        }\n        for company, posts in accounts.items()\n    ]\n\n# Dashboard metrics\ndashboard = linkedin_input.get(\"linkedin_dashboard\", {})\noutput[\"monitored_accounts_count\"] = dashboard.get(\"monitored_accounts_count\", len(output[\"linkedin_accounts\"]))\noutput[\"high_engagement_count\"] = dashboard.get(\"high_engagement_count\", max(1, len(output[\"linkedin_accounts\"]) // 3))\noutput[\"hiring_signals_count\"] = dashboard.get(\"hiring_signals_count\", sum(1 for acc in output[\"linkedin_accounts\"] if acc.get(\"hiring_signals\", False)))\noutput[\"networking_events_count\"] = dashboard.get(\"networking_events_count\", 2)\n```\n\n## 7. QUALITY ASSURANCE\n\n### 7.1 Final Validation Checklist\n- [ ] Total companies MAKSIMUM 14 (redusert fra 16)\n- [ ] MAKSIMUM 14 total companies, minimum 6 n_tier1 companies\n- [ ] INGEN DUPLIKATER i critical_companies eller qualified_companies\n- [ ] All critical_companies have complete contact info  \n- [ ] LinkedIn structures are complete (posts_pages, pages, accounts)\n- [ ] LinkedIn posts MAKSIMUM 12 - KUTT OVERFLØDIG DATA!\n- [ ] 4-5 key findings med actionable insights (økt fra 3)\n- [ ] 3 top opportunities with specific contact actions\n- [ ] 5 strategic recommendations \n- [ ] 7 action items prioritized appropriately\n- [ ] 7 weekly actions covering all days\n- [ ] Valid JSON structure\n- [ ] Norwegian language consistency\n- [ ] Alle tall er numeriske verdier, ikke tekst-placeholders\n\n### 7.2 Business Logic Verification\n- Top opportunities ranked by priority_score\n- Action items reflect actual company contact information\n- Weekly actions realistic and actionable\n- Strategic recommendations based on actual data trends\n- All companies have clear SONAT value proposition\n\n## 8. ERROR HANDLING\n\n### 8.1 Insufficient Input Data\n**If news_companies < 4 total:**\n- Generate realistic synthetic companies maintaining data quality\n- Ensure minimum viable report structure\n- Focus on quality over quantity\n\n**If linkedin_posts_pages < 12:**\n- Use available posts\n- Adjust total_posts accordingly\n- Maintain structure consistency\n\n### 8.2 Missing Contact Information\n- Use \"Ikke tilgjengelig\" for missing data\n- Estimate realistic company details based on sector/size\n- Maintain data consistency across all references\n\n### 8.3 Duplikat-håndtering\n**KRITISK PROBLEM: Duplikater som SPORVEIEN AS eksemplet**\n```python\n# BEFORE adding any company to final lists:\ndef is_duplicate(new_company, existing_companies):\n    new_name = new_company[\"name\"].strip().upper()\n    for existing in existing_companies:\n        existing_name = existing[\"name\"].strip().upper()\n        if new_name == existing_name:\n            return True\n    return False\n\n# Apply to all company additions:\nfinal_companies = []\nfor company in all_candidates:\n    if not is_duplicate(company, final_companies):\n        final_companies.append(company)\n```\n\n### 8.4 LinkedIn Data Missing\n**If linkedin_posts_pages is empty or missing:**\n- Check for linkedin_posts_flat or other LinkedIn structures\n- Generate linkedin_pages from available posts (3 pages, 4 posts each)\n- Generate linkedin_accounts by grouping posts by company_name\n- Set realistic dashboard metrics based on available data\n\n---\n\n**MERGER PROCESSING INITIATION**: Kombiner news og LinkedIn intelligence til komplett Market Watch-rapport. Fokuser på datakvalitet, strukturell konsistens og HTML-template kompatibilitet."
                                },
                                {
                                    "role": "user",
                                    "content": "input nyhet:\n{{23.textResponse}}\n\ninput linkedin:\n{{10.text}}"
                                }
                            ],
                            "max_tokens": "0",
                            "temperature": "1",
                            "n_completions": "1",
                            "response_format": "json_object",
                            "reasoning_effort": "high",
                            "parseJSONResponse": false
                        },
                        "metadata": {
                            "designer": {
                                "x": 600,
                                "y": 300,
                                "name": "JSON Merger",
                                "messages": [
                                    {
                                        "category": "reference",
                                        "severity": "warning",
                                        "message": "Referenced module 'Tools - Text aggregator' [10] is not accessible."
                                    }
                                ]
                            },
                            "restore": {
                                "expect": {
                                    "stop": {
                                        "mode": "chose"
                                    },
                                    "model": {
                                        "mode": "chose",
                                        "label": "gpt-5 (system)"
                                    },
                                    "select": {
                                        "label": "Create a Chat Completion (GPT and o1 models)"
                                    },
                                    "messages": {
                                        "mode": "chose",
                                        "items": [
                                            {
                                                "role": {
                                                    "mode": "chose",
                                                    "label": "Developer / System"
                                                }
                                            },
                                            {
                                                "role": {
                                                    "mode": "chose",
                                                    "label": "Developer / System"
                                                }
                                            },
                                            {
                                                "role": {
                                                    "mode": "chose",
                                                    "label": "User"
                                                }
                                            }
                                        ]
                                    },
                                    "logit_bias": {
                                        "mode": "chose"
                                    },
                                    "tool_choice": {
                                        "mode": "chose",
                                        "label": "Empty"
                                    },
                                    "response_format": {
                                        "mode": "chose",
                                        "label": "JSON Object"
                                    },
                                    "reasoning_effort": {
                                        "mode": "chose",
                                        "label": "High"
                                    },
                                    "parseJSONResponse": {
                                        "mode": "chose"
                                    },
                                    "additionalParameters": {
                                        "mode": "chose"
                                    }
                                },
                                "parameters": {
                                    "__IMTCONN__": {
                                        "data": {
                                            "scoped": "true",
                                            "connection": "openai-gpt-3"
                                        },
                                        "label": "AIKI team"
                                    }
                                }
                            },
                            "parameters": [
                                {
                                    "name": "__IMTCONN__",
                                    "type": "account:openai-gpt-3",
                                    "label": "Connection",
                                    "required": true
                                }
                            ],
                            "expect": [
                                {
                                    "name": "select",
                                    "type": "select",
                                    "label": "Select Method",
                                    "required": true,
                                    "validate": {
                                        "enum": [
                                            "chat",
                                            "prompt"
                                        ]
                                    }
                                },
                                {
                                    "name": "temperature",
                                    "type": "number",
                                    "label": "Temperature",
                                    "validate": {
                                        "max": 2,
                                        "min": 0
                                    }
                                },
                                {
                                    "name": "top_p",
                                    "type": "number",
                                    "label": "Top P",
                                    "validate": {
                                        "max": 1,
                                        "min": 0
                                    }
                                },
                                {
                                    "name": "n_completions",
                                    "type": "number",
                                    "label": "Number"
                                },
                                {
                                    "name": "frequency_penalty",
                                    "type": "number",
                                    "label": "Frequency Penalty",
                                    "validate": {
                                        "max": 2,
                                        "min": -2
                                    }
                                },
                                {
                                    "name": "presence_penalty",
                                    "type": "number",
                                    "label": "Presence Penalty",
                                    "validate": {
                                        "max": 2,
                                        "min": -2
                                    }
                                },
                                {
                                    "name": "logit_bias",
                                    "spec": {
                                        "name": "value",
                                        "spec": [
                                            {
                                                "name": "token",
                                                "type": "text",
                                                "label": "Token ID",
                                                "required": true
                                            },
                                            {
                                                "name": "probability",
                                                "type": "number",
                                                "label": "Probability",
                                                "required": true,
                                                "validate": {
                                                    "max": 100,
                                                    "min": -100
                                                }
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "Token Probability"
                                    },
                                    "type": "array",
                                    "label": "Token Probability"
                                },
                                {
                                    "name": "seed",
                                    "type": "integer",
                                    "label": "Seed"
                                },
                                {
                                    "name": "tool_choice",
                                    "type": "select",
                                    "label": "Tool Choice",
                                    "validate": {
                                        "enum": [
                                            "none",
                                            "auto",
                                            "required"
                                        ]
                                    }
                                },
                                {
                                    "name": "stop",
                                    "spec": {
                                        "name": "value",
                                        "type": "text",
                                        "label": "Stop Sequence"
                                    },
                                    "type": "array",
                                    "label": "Stop Sequences",
                                    "validate": {
                                        "maxItems": 4
                                    }
                                },
                                {
                                    "name": "additionalParameters",
                                    "spec": {
                                        "name": "value",
                                        "spec": [
                                            {
                                                "name": "key",
                                                "type": "text",
                                                "label": "Parameter Name",
                                                "required": true
                                            },
                                            {
                                                "name": "type",
                                                "type": "select",
                                                "label": "Input Type",
                                                "options": [
                                                    {
                                                        "label": "Text",
                                                        "value": "text",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "text",
                                                                "label": "Parameter Value"
                                                            }
                                                        ],
                                                        "default": true
                                                    },
                                                    {
                                                        "label": "Number",
                                                        "value": "number",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "number",
                                                                "label": "Parameter Value"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "label": "Boolean",
                                                        "value": "boolean",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "boolean",
                                                                "label": "Parameter Value"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "label": "Date",
                                                        "value": "date",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "date",
                                                                "label": "Parameter Value"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "label": "Any",
                                                        "value": "any",
                                                        "nested": [
                                                            {
                                                                "name": "value",
                                                                "type": "any",
                                                                "label": "Parameter Value"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "Input Parameter"
                                    },
                                    "type": "array",
                                    "label": "Other Input Parameters"
                                },
                                {
                                    "name": "model",
                                    "type": "select",
                                    "label": "Model",
                                    "required": true
                                },
                                {
                                    "name": "max_tokens",
                                    "type": "uinteger",
                                    "label": "Max Completion Tokens"
                                },
                                {
                                    "name": "messages",
                                    "spec": {
                                        "name": "value",
                                        "spec": [
                                            {
                                                "name": "role",
                                                "type": "select",
                                                "label": "Role",
                                                "options": {
                                                    "store": [
                                                        {
                                                            "label": "User",
                                                            "value": "user",
                                                            "nested": [
                                                                {
                                                                    "help": "Text content of the message on behalf of the selected __Role__.",
                                                                    "name": "content",
                                                                    "type": "text",
                                                                    "label": "Text Content"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "label": "Assistant",
                                                            "value": "assistant",
                                                            "nested": [
                                                                {
                                                                    "help": "Text content of the message on behalf of the selected __Role__.",
                                                                    "name": "content",
                                                                    "type": "text",
                                                                    "label": "Text Content"
                                                                },
                                                                {
                                                                    "mode": "edit",
                                                                    "name": "tool_calls",
                                                                    "spec": {
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "hidden",
                                                                                "default": "function"
                                                                            },
                                                                            {
                                                                                "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "Tool call ID"
                                                                            },
                                                                            {
                                                                                "name": "function",
                                                                                "spec": [
                                                                                    {
                                                                                        "help": "The name of the function previously called.",
                                                                                        "name": "name",
                                                                                        "type": "text",
                                                                                        "label": "Name",
                                                                                        "required": true
                                                                                    },
                                                                                    {
                                                                                        "help": "The arguments previously output by the AI.",
                                                                                        "name": "arguments",
                                                                                        "type": "text",
                                                                                        "label": "Arguments",
                                                                                        "required": true
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Function"
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Tool Call"
                                                                    },
                                                                    "type": "array",
                                                                    "label": "Tool Calls",
                                                                    "labels": {
                                                                        "add": "Add tool call"
                                                                    },
                                                                    "mappable": {
                                                                        "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "label": "Developer / System",
                                                            "value": "system",
                                                            "nested": [
                                                                {
                                                                    "help": "Text content of the message on behalf of the selected __Role__.",
                                                                    "name": "content",
                                                                    "type": "text",
                                                                    "label": "Text Content"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "label": "Tool",
                                                            "value": "tool",
                                                            "nested": [
                                                                {
                                                                    "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                                    "name": "content",
                                                                    "type": "text",
                                                                    "label": "Text Content",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                    "name": "tool_call_id",
                                                                    "type": "text",
                                                                    "label": "Tool Call ID.",
                                                                    "required": true
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "required": true
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "Message"
                                    },
                                    "type": "array",
                                    "label": "Messages",
                                    "required": true
                                },
                                {
                                    "name": "response_format",
                                    "type": "select",
                                    "label": "Response Format",
                                    "validate": {
                                        "enum": [
                                            "text",
                                            "json_object"
                                        ]
                                    }
                                },
                                {
                                    "name": "reasoning_effort",
                                    "type": "select",
                                    "label": "Reasoning Effort",
                                    "validate": {
                                        "enum": [
                                            "minimal",
                                            "low",
                                            "medium",
                                            "high"
                                        ]
                                    }
                                },
                                {
                                    "name": "parseJSONResponse",
                                    "type": "boolean",
                                    "label": "Parse JSON Response",
                                    "required": true
                                }
                            ],
                            "interface": [
                                {
                                    "name": "result",
                                    "type": "any",
                                    "label": "Result"
                                },
                                {
                                    "name": "id",
                                    "type": "text",
                                    "label": "ID"
                                },
                                {
                                    "name": "object",
                                    "type": "text",
                                    "label": "Object"
                                },
                                {
                                    "name": "created",
                                    "type": "date",
                                    "label": "Created"
                                },
                                {
                                    "name": "model",
                                    "type": "text",
                                    "label": "Model"
                                },
                                {
                                    "name": "choices",
                                    "spec": [
                                        {
                                            "name": "text",
                                            "type": "text",
                                            "label": "Text"
                                        },
                                        {
                                            "name": "index",
                                            "type": "number",
                                            "label": "Index"
                                        },
                                        {
                                            "name": "logprobs",
                                            "type": "text",
                                            "label": "Log Probs"
                                        },
                                        {
                                            "name": "finish_reason",
                                            "type": "text",
                                            "label": "Finish Reason"
                                        },
                                        {
                                            "name": "message",
                                            "spec": [
                                                {
                                                    "name": "role",
                                                    "type": "text",
                                                    "label": "Role"
                                                },
                                                {
                                                    "name": "content",
                                                    "type": "text",
                                                    "label": "Content"
                                                },
                                                {
                                                    "name": "tool_calls",
                                                    "spec": [
                                                        {
                                                            "name": "id",
                                                            "type": "text",
                                                            "label": "ID"
                                                        },
                                                        {
                                                            "name": "type",
                                                            "type": "text",
                                                            "label": "Type"
                                                        },
                                                        {
                                                            "name": "function",
                                                            "spec": [
                                                                {
                                                                    "name": "name",
                                                                    "type": "text",
                                                                    "label": "Name"
                                                                },
                                                                {
                                                                    "name": "arguments",
                                                                    "type": "text",
                                                                    "label": "Arguments"
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Function"
                                                        }
                                                    ],
                                                    "type": "array",
                                                    "label": "Tool Calls"
                                                },
                                                {
                                                    "name": "refusal",
                                                    "type": "text",
                                                    "label": "Refusal"
                                                },
                                                {
                                                    "name": "annotations",
                                                    "spec": [
                                                        {
                                                            "name": "type",
                                                            "type": "text",
                                                            "label": "Type"
                                                        },
                                                        {
                                                            "name": "url_citation",
                                                            "spec": [
                                                                {
                                                                    "name": "end_index",
                                                                    "type": "number",
                                                                    "label": "End Index"
                                                                },
                                                                {
                                                                    "name": "start_index",
                                                                    "type": "number",
                                                                    "label": "Start Index"
                                                                },
                                                                {
                                                                    "name": "title",
                                                                    "type": "text",
                                                                    "label": "Title"
                                                                },
                                                                {
                                                                    "name": "url",
                                                                    "type": "text",
                                                                    "label": "URL"
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "URL Citation"
                                                        }
                                                    ],
                                                    "type": "array",
                                                    "label": "Annotations"
                                                }
                                            ],
                                            "type": "collection",
                                            "label": "Message"
                                        }
                                    ],
                                    "type": "array",
                                    "label": "Choices"
                                },
                                {
                                    "name": "usage",
                                    "spec": [
                                        {
                                            "name": "prompt_tokens",
                                            "type": "number",
                                            "label": "Prompt Tokens"
                                        },
                                        {
                                            "name": "completion_tokens",
                                            "type": "text",
                                            "label": "Completion Tokens"
                                        },
                                        {
                                            "name": "total_tokens",
                                            "type": "number",
                                            "label": "Total Tokens"
                                        },
                                        {
                                            "name": "prompt_tokens_details",
                                            "spec": [
                                                {
                                                    "name": "cached_tokens",
                                                    "type": "uinteger",
                                                    "label": "Cached Tokens"
                                                },
                                                {
                                                    "name": "text_tokens",
                                                    "type": "uinteger",
                                                    "label": "Text Tokens"
                                                },
                                                {
                                                    "name": "image_tokens",
                                                    "type": "uinteger",
                                                    "label": "Image Tokens"
                                                },
                                                {
                                                    "name": "audio_tokens",
                                                    "type": "uinteger",
                                                    "label": "Audio Tokens"
                                                }
                                            ],
                                            "type": "collection",
                                            "label": "Prompt Tokens Details"
                                        },
                                        {
                                            "name": "completion_tokens_details",
                                            "spec": [
                                                {
                                                    "name": "reasoning_tokens",
                                                    "type": "uinteger",
                                                    "label": "Reasoning Tokens"
                                                },
                                                {
                                                    "name": "text_tokens",
                                                    "type": "uinteger",
                                                    "label": "Text Tokens"
                                                },
                                                {
                                                    "name": "audio_tokens",
                                                    "type": "uinteger",
                                                    "label": "Audio Tokens"
                                                },
                                                {
                                                    "name": "accepted_prediction_tokens",
                                                    "type": "uinteger",
                                                    "label": "Accepted Prediction Tokens"
                                                },
                                                {
                                                    "name": "rejected_prediction_tokens",
                                                    "type": "uinteger",
                                                    "label": "Rejected Prediction Tokens"
                                                }
                                            ],
                                            "type": "collection",
                                            "label": "Completion Tokens Details"
                                        }
                                    ],
                                    "type": "collection",
                                    "label": "Usage"
                                },
                                {
                                    "name": "service_tier",
                                    "type": "text",
                                    "label": "Service Tier"
                                },
                                {
                                    "name": "system_fingerprint",
                                    "type": "text",
                                    "label": "System Fingerprint"
                                }
                            ],
                            "advanced": true
                        }
                    }
                ]
            ]
        },
        "zone": "eu2.make.com",
        "notes": []
    }
}